import{w as ea,d as pn}from"./index-7bef9c92.js";import{u as hn}from"./useModal-26d96a01.js";import{u as fa}from"./index-cf57f2c8.js";import{X as Nt,r as G,C as ta,u as q,Y as de,d as Ae,Z as yn,e as ee,f as _,a as Y,c as ve,h as o,w as x,b as v,t as le,F as St,x as Xa,$ as pa,i as se,H as Ge,g as ue,p as vn,m as gn,_ as wn,a0 as Ut,o as ot,a1 as j,a2 as ha}from"./index-4edeae8c.js";import{u as Pe}from"./useToast-08cd3300.js";const Ka="3.7.8",Vn=Ka,je=typeof Buffer=="function",ya=typeof TextDecoder=="function"?new TextDecoder:void 0,va=typeof TextEncoder=="function"?new TextEncoder:void 0,xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",at=Array.prototype.slice.call(xn),mt=(t=>{let e={};return t.forEach((a,l)=>e[a]=l),e})(at),In=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ne=String.fromCharCode.bind(String),ga=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),el=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),tl=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),al=t=>{let e,a,l,n,s="";const r=t.length%3;for(let i=0;i<t.length;){if((a=t.charCodeAt(i++))>255||(l=t.charCodeAt(i++))>255||(n=t.charCodeAt(i++))>255)throw new TypeError("invalid character found");e=a<<16|l<<8|n,s+=at[e>>18&63]+at[e>>12&63]+at[e>>6&63]+at[e&63]}return r?s.slice(0,r-3)+"===".substring(r):s},aa=typeof btoa=="function"?t=>btoa(t):je?t=>Buffer.from(t,"binary").toString("base64"):al,qt=je?t=>Buffer.from(t).toString("base64"):t=>{let a=[];for(let l=0,n=t.length;l<n;l+=4096)a.push(ne.apply(null,t.subarray(l,l+4096)));return aa(a.join(""))},wt=(t,e=!1)=>e?el(qt(t)):qt(t),Tn=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?ne(192|e>>>6)+ne(128|e&63):ne(224|e>>>12&15)+ne(128|e>>>6&63)+ne(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return ne(240|e>>>18&7)+ne(128|e>>>12&63)+ne(128|e>>>6&63)+ne(128|e&63)}},Sn=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ll=t=>t.replace(Sn,Tn),wa=je?t=>Buffer.from(t,"utf8").toString("base64"):va?t=>qt(va.encode(t)):t=>aa(ll(t)),Ze=(t,e=!1)=>e?el(wa(t)):wa(t),Va=t=>Ze(t,!0),bn=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,kn=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),a=e-65536;return ne((a>>>10)+55296)+ne((a&1023)+56320);case 3:return ne((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return ne((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},nl=t=>t.replace(bn,kn),sl=t=>{if(t=t.replace(/\s+/g,""),!In.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,a,l,n=[];for(let s=0;s<t.length;)e=mt[t.charAt(s++)]<<18|mt[t.charAt(s++)]<<12|(a=mt[t.charAt(s++)])<<6|(l=mt[t.charAt(s++)]),a===64?n.push(ne(e>>16&255)):l===64?n.push(ne(e>>16&255,e>>8&255)):n.push(ne(e>>16&255,e>>8&255,e&255));return n.join("")},la=typeof atob=="function"?t=>atob(tl(t)):je?t=>Buffer.from(t,"base64").toString("binary"):sl,rl=je?t=>ga(Buffer.from(t,"base64")):t=>ga(la(t).split("").map(e=>e.charCodeAt(0))),ol=t=>rl(il(t)),On=je?t=>Buffer.from(t,"base64").toString("utf8"):ya?t=>ya.decode(rl(t)):t=>nl(la(t)),il=t=>tl(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),Gt=t=>On(il(t)),Dn=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},ul=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),dl=function(){const t=(e,a)=>Object.defineProperty(String.prototype,e,ul(a));t("fromBase64",function(){return Gt(this)}),t("toBase64",function(e){return Ze(this,e)}),t("toBase64URI",function(){return Ze(this,!0)}),t("toBase64URL",function(){return Ze(this,!0)}),t("toUint8Array",function(){return ol(this)})},cl=function(){const t=(e,a)=>Object.defineProperty(Uint8Array.prototype,e,ul(a));t("toBase64",function(e){return wt(this,e)}),t("toBase64URI",function(){return wt(this,!0)}),t("toBase64URL",function(){return wt(this,!0)})},Nn=()=>{dl(),cl()},En={version:Ka,VERSION:Vn,atob:la,atobPolyfill:sl,btoa:aa,btoaPolyfill:al,fromBase64:Gt,toBase64:Ze,encode:Ze,encodeURI:Va,encodeURL:Va,utob:ll,btou:nl,decode:Gt,isValid:Dn,fromUint8Array:wt,toUint8Array:ol,extendString:dl,extendUint8Array:cl,extendBuiltins:Nn},_t={NORMAL:"normal",AO_DAI:"ao_dai"},te={ESCORT:"plan_escort",SHUTTLE:"plan_shuttle",CHARTER:"plan_charter",MASSAGE:"plan_dragon_massage",TUTOR:"plan_tutor",QUOTE:"plan_custom_quote"},Ie={INITIAL:"initial",COMPLETED:"completed",FAILED:"failed",EXPIRED:"expired",REFUND:"refund"},Pt={VOIN_PAYMENT:"vcoin_payment",ECPAY_PAYMENT:"payment"},X={PENDING:"pending",PROCESSED:"processed"},et={PlanEscort:"plan_escort",PlanShuttle:"plan_shuttle",PlanCharter:"plan_charter",PlanMassage:"plan_dragon_massage",PlanTutor:"plan_tutor"};class Fe extends Error{}class Mn extends Fe{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Cn extends Fe{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class An extends Fe{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class He extends Fe{}class ml extends Fe{constructor(e){super(`Invalid unit ${e}`)}}class re extends Fe{}class De extends Fe{constructor(){super("Zone is an abstract class")}}const M="numeric",we="short",ce="long",bt={year:M,month:M,day:M},fl={year:M,month:we,day:M},$n={year:M,month:we,day:M,weekday:we},pl={year:M,month:ce,day:M},hl={year:M,month:ce,day:M,weekday:ce},yl={hour:M,minute:M},vl={hour:M,minute:M,second:M},gl={hour:M,minute:M,second:M,timeZoneName:we},wl={hour:M,minute:M,second:M,timeZoneName:ce},Vl={hour:M,minute:M,hourCycle:"h23"},xl={hour:M,minute:M,second:M,hourCycle:"h23"},Il={hour:M,minute:M,second:M,hourCycle:"h23",timeZoneName:we},Tl={hour:M,minute:M,second:M,hourCycle:"h23",timeZoneName:ce},Sl={year:M,month:M,day:M,hour:M,minute:M},bl={year:M,month:M,day:M,hour:M,minute:M,second:M},kl={year:M,month:we,day:M,hour:M,minute:M},Ol={year:M,month:we,day:M,hour:M,minute:M,second:M},Un={year:M,month:we,day:M,weekday:we,hour:M,minute:M},Dl={year:M,month:ce,day:M,hour:M,minute:M,timeZoneName:we},Nl={year:M,month:ce,day:M,hour:M,minute:M,second:M,timeZoneName:we},El={year:M,month:ce,day:M,weekday:ce,hour:M,minute:M,timeZoneName:ce},Ml={year:M,month:ce,day:M,weekday:ce,hour:M,minute:M,second:M,timeZoneName:ce};class it{get type(){throw new De}get name(){throw new De}get ianaName(){return this.name}get isUniversal(){throw new De}offsetName(e,a){throw new De}formatOffset(e,a){throw new De}offset(e){throw new De}equals(e){throw new De}get isValid(){throw new De}}let Ft=null;class Et extends it{static get instance(){return Ft===null&&(Ft=new Et),Ft}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:a,locale:l}){return Rl(e,a,l)}formatOffset(e,a){return st(this.offset(e),a)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Vt={};function _n(t){return Vt[t]||(Vt[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Vt[t]}const Pn={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Fn(t,e){const a=t.format(e).replace(/\u200E/g,""),l=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(a),[,n,s,r,i,m,p,c]=l;return[r,n,s,i,m,p,c]}function Ln(t,e){const a=t.formatToParts(e),l=[];for(let n=0;n<a.length;n++){const{type:s,value:r}=a[n],i=Pn[s];s==="era"?l[i]=r:W(i)||(l[i]=parseInt(r,10))}return l}let ft={};class Se extends it{static create(e){return ft[e]||(ft[e]=new Se(e)),ft[e]}static resetCache(){ft={},Vt={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Se.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:a,locale:l}){return Rl(e,a,l,this.name)}formatOffset(e,a){return st(this.offset(e),a)}offset(e){const a=new Date(e);if(isNaN(a))return NaN;const l=_n(this.name);let[n,s,r,i,m,p,c]=l.formatToParts?Ln(l,a):Fn(l,a);i==="BC"&&(n=-Math.abs(n)+1);const y=Ct({year:n,month:s,day:r,hour:m===24?0:m,minute:p,second:c,millisecond:0});let u=+a;const O=u%1e3;return u-=O>=0?O:1e3+O,(y-u)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let xa={};function Rn(t,e={}){const a=JSON.stringify([t,e]);let l=xa[a];return l||(l=new Intl.ListFormat(t,e),xa[a]=l),l}let Yt={};function jt(t,e={}){const a=JSON.stringify([t,e]);let l=Yt[a];return l||(l=new Intl.DateTimeFormat(t,e),Yt[a]=l),l}let Jt={};function Wn(t,e={}){const a=JSON.stringify([t,e]);let l=Jt[a];return l||(l=new Intl.NumberFormat(t,e),Jt[a]=l),l}let Qt={};function zn(t,e={}){const{base:a,...l}=e,n=JSON.stringify([t,l]);let s=Qt[n];return s||(s=new Intl.RelativeTimeFormat(t,e),Qt[n]=s),s}let lt=null;function Hn(){return lt||(lt=new Intl.DateTimeFormat().resolvedOptions().locale,lt)}let Ia={};function Zn(t){let e=Ia[t];if(!e){const a=new Intl.Locale(t);e="getWeekInfo"in a?a.getWeekInfo():a.weekInfo,Ia[t]=e}return e}function Bn(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const a=t.indexOf("-u-");if(a===-1)return[t];{let l,n;try{l=jt(t).resolvedOptions(),n=t}catch{const m=t.substring(0,a);l=jt(m).resolvedOptions(),n=m}const{numberingSystem:s,calendar:r}=l;return[n,s,r]}}function qn(t,e,a){return(a||e)&&(t.includes("-u-")||(t+="-u"),a&&(t+=`-ca-${a}`),e&&(t+=`-nu-${e}`)),t}function Gn(t){const e=[];for(let a=1;a<=12;a++){const l=$.utc(2009,a,1);e.push(t(l))}return e}function Yn(t){const e=[];for(let a=1;a<=7;a++){const l=$.utc(2016,11,13+a);e.push(t(l))}return e}function pt(t,e,a,l){const n=t.listingMode();return n==="error"?null:n==="en"?a(e):l(e)}function jn(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class Jn{constructor(e,a,l){this.padTo=l.padTo||0,this.floor=l.floor||!1;const{padTo:n,floor:s,...r}=l;if(!a||Object.keys(r).length>0){const i={useGrouping:!1,...l};l.padTo>0&&(i.minimumIntegerDigits=l.padTo),this.inf=Wn(e,i)}}format(e){if(this.inf){const a=this.floor?Math.floor(e):e;return this.inf.format(a)}else{const a=this.floor?Math.floor(e):ia(e,3);return K(a,this.padTo)}}}class Qn{constructor(e,a,l){this.opts=l,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const r=-1*(e.offset/60),i=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;e.offset!==0&&Se.create(i).valid?(n=i,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=jt(a,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(a=>{if(a.type==="timeZoneName"){const l=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...a,value:l}}else return a}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Xn{constructor(e,a,l){this.opts={style:"long",...l},!a&&Fl()&&(this.rtf=zn(e,l))}format(e,a){return this.rtf?this.rtf.format(e,a):xs(a,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,a){return this.rtf?this.rtf.formatToParts(e,a):[]}}const Kn={firstDay:1,minimalDays:4,weekend:[6,7]};class B{static fromOpts(e){return B.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,a,l,n,s=!1){const r=e||Q.defaultLocale,i=r||(s?"en-US":Hn()),m=a||Q.defaultNumberingSystem,p=l||Q.defaultOutputCalendar,c=Xt(n)||Q.defaultWeekSettings;return new B(i,m,p,c,r)}static resetCache(){lt=null,Yt={},Jt={},Qt={}}static fromObject({locale:e,numberingSystem:a,outputCalendar:l,weekSettings:n}={}){return B.create(e,a,l,n)}constructor(e,a,l,n,s){const[r,i,m]=Bn(e);this.locale=r,this.numberingSystem=a||i||null,this.outputCalendar=l||m||null,this.weekSettings=n,this.intl=qn(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=jn(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),a=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&a?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:B.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Xt(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,a=!1){return pt(this,e,Hl,()=>{const l=a?{month:e,day:"numeric"}:{month:e},n=a?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=Gn(s=>this.extract(s,l,"month"))),this.monthsCache[n][e]})}weekdays(e,a=!1){return pt(this,e,ql,()=>{const l=a?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=a?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=Yn(s=>this.extract(s,l,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return pt(this,void 0,()=>Gl,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$.utc(2016,11,13,9),$.utc(2016,11,13,19)].map(a=>this.extract(a,e,"dayperiod"))}return this.meridiemCache})}eras(e){return pt(this,e,Yl,()=>{const a={era:e};return this.eraCache[e]||(this.eraCache[e]=[$.utc(-40,1,1),$.utc(2017,1,1)].map(l=>this.extract(l,a,"era"))),this.eraCache[e]})}extract(e,a,l){const n=this.dtFormatter(e,a),s=n.formatToParts(),r=s.find(i=>i.type.toLowerCase()===l);return r?r.value:null}numberFormatter(e={}){return new Jn(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,a={}){return new Qn(e,this.intl,a)}relFormatter(e={}){return new Xn(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Rn(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Ll()?Zn(this.locale):Kn}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Lt=null;class ie extends it{static get utcInstance(){return Lt===null&&(Lt=new ie(0)),Lt}static instance(e){return e===0?ie.utcInstance:new ie(e)}static parseSpecifier(e){if(e){const a=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(a)return new ie(At(a[1],a[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${st(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${st(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,a){return st(this.fixed,a)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class es extends it{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Me(t,e){if(W(t)||t===null)return e;if(t instanceof it)return t;if(rs(t)){const a=t.toLowerCase();return a==="default"?e:a==="local"||a==="system"?Et.instance:a==="utc"||a==="gmt"?ie.utcInstance:ie.parseSpecifier(a)||Se.create(t)}else return Ce(t)?ie.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new es(t)}const na={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Ta={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ts=na.hanidec.replace(/[\[|\]]/g,"").split("");function as(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let a=0;a<t.length;a++){const l=t.charCodeAt(a);if(t[a].search(na.hanidec)!==-1)e+=ts.indexOf(t[a]);else for(const n in Ta){const[s,r]=Ta[n];l>=s&&l<=r&&(e+=l-s)}}return parseInt(e,10)}else return e}let ze={};function ls(){ze={}}function he({numberingSystem:t},e=""){const a=t||"latn";return ze[a]||(ze[a]={}),ze[a][e]||(ze[a][e]=new RegExp(`${na[a]}${e}`)),ze[a][e]}let Sa=()=>Date.now(),ba="system",ka=null,Oa=null,Da=null,Na=60,Ea,Ma=null;class Q{static get now(){return Sa}static set now(e){Sa=e}static set defaultZone(e){ba=e}static get defaultZone(){return Me(ba,Et.instance)}static get defaultLocale(){return ka}static set defaultLocale(e){ka=e}static get defaultNumberingSystem(){return Oa}static set defaultNumberingSystem(e){Oa=e}static get defaultOutputCalendar(){return Da}static set defaultOutputCalendar(e){Da=e}static get defaultWeekSettings(){return Ma}static set defaultWeekSettings(e){Ma=Xt(e)}static get twoDigitCutoffYear(){return Na}static set twoDigitCutoffYear(e){Na=e%100}static get throwOnInvalid(){return Ea}static set throwOnInvalid(e){Ea=e}static resetCaches(){B.resetCache(),Se.resetCache(),$.resetCache(),ls()}}class ge{constructor(e,a){this.reason=e,this.explanation=a}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Cl=[0,31,59,90,120,151,181,212,243,273,304,334],Al=[0,31,60,91,121,152,182,213,244,274,305,335];function fe(t,e){return new ge("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function sa(t,e,a){const l=new Date(Date.UTC(t,e-1,a));t<100&&t>=0&&l.setUTCFullYear(l.getUTCFullYear()-1900);const n=l.getUTCDay();return n===0?7:n}function $l(t,e,a){return a+(ut(t)?Al:Cl)[e-1]}function Ul(t,e){const a=ut(t)?Al:Cl,l=a.findIndex(s=>s<e),n=e-a[l];return{month:l+1,day:n}}function ra(t,e){return(t-e+7)%7+1}function kt(t,e=4,a=1){const{year:l,month:n,day:s}=t,r=$l(l,n,s),i=ra(sa(l,n,s),a);let m=Math.floor((r-i+14-e)/7),p;return m<1?(p=l-1,m=rt(p,e,a)):m>rt(l,e,a)?(p=l+1,m=1):p=l,{weekYear:p,weekNumber:m,weekday:i,...$t(t)}}function Ca(t,e=4,a=1){const{weekYear:l,weekNumber:n,weekday:s}=t,r=ra(sa(l,1,e),a),i=Be(l);let m=n*7+s-r-7+e,p;m<1?(p=l-1,m+=Be(p)):m>i?(p=l+1,m-=Be(l)):p=l;const{month:c,day:h}=Ul(p,m);return{year:p,month:c,day:h,...$t(t)}}function Rt(t){const{year:e,month:a,day:l}=t,n=$l(e,a,l);return{year:e,ordinal:n,...$t(t)}}function Aa(t){const{year:e,ordinal:a}=t,{month:l,day:n}=Ul(e,a);return{year:e,month:l,day:n,...$t(t)}}function $a(t,e){if(!W(t.localWeekday)||!W(t.localWeekNumber)||!W(t.localWeekYear)){if(!W(t.weekday)||!W(t.weekNumber)||!W(t.weekYear))throw new He("Cannot mix locale-based week fields with ISO-based week fields");return W(t.localWeekday)||(t.weekday=t.localWeekday),W(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),W(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function ns(t,e=4,a=1){const l=Mt(t.weekYear),n=pe(t.weekNumber,1,rt(t.weekYear,e,a)),s=pe(t.weekday,1,7);return l?n?s?!1:fe("weekday",t.weekday):fe("week",t.weekNumber):fe("weekYear",t.weekYear)}function ss(t){const e=Mt(t.year),a=pe(t.ordinal,1,Be(t.year));return e?a?!1:fe("ordinal",t.ordinal):fe("year",t.year)}function _l(t){const e=Mt(t.year),a=pe(t.month,1,12),l=pe(t.day,1,Ot(t.year,t.month));return e?a?l?!1:fe("day",t.day):fe("month",t.month):fe("year",t.year)}function Pl(t){const{hour:e,minute:a,second:l,millisecond:n}=t,s=pe(e,0,23)||e===24&&a===0&&l===0&&n===0,r=pe(a,0,59),i=pe(l,0,59),m=pe(n,0,999);return s?r?i?m?!1:fe("millisecond",n):fe("second",l):fe("minute",a):fe("hour",e)}function W(t){return typeof t>"u"}function Ce(t){return typeof t=="number"}function Mt(t){return typeof t=="number"&&t%1===0}function rs(t){return typeof t=="string"}function os(t){return Object.prototype.toString.call(t)==="[object Date]"}function Fl(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Ll(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function is(t){return Array.isArray(t)?t:[t]}function Ua(t,e,a){if(t.length!==0)return t.reduce((l,n)=>{const s=[e(n),n];return l&&a(l[0],s[0])===l[0]?l:s},null)[1]}function us(t,e){return e.reduce((a,l)=>(a[l]=t[l],a),{})}function Ye(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xt(t){if(t==null)return null;if(typeof t!="object")throw new re("Week settings must be an object");if(!pe(t.firstDay,1,7)||!pe(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!pe(e,1,7)))throw new re("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function pe(t,e,a){return Mt(t)&&t>=e&&t<=a}function ds(t,e){return t-e*Math.floor(t/e)}function K(t,e=2){const a=t<0;let l;return a?l="-"+(""+-t).padStart(e,"0"):l=(""+t).padStart(e,"0"),l}function Ee(t){if(!(W(t)||t===null||t===""))return parseInt(t,10)}function $e(t){if(!(W(t)||t===null||t===""))return parseFloat(t)}function oa(t){if(!(W(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function ia(t,e,a=!1){const l=10**e;return(a?Math.trunc:Math.round)(t*l)/l}function ut(t){return t%4===0&&(t%100!==0||t%400===0)}function Be(t){return ut(t)?366:365}function Ot(t,e){const a=ds(e-1,12)+1,l=t+(e-a)/12;return a===2?ut(l)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][a-1]}function Ct(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function _a(t,e,a){return-ra(sa(t,1,e),a)+e-1}function rt(t,e=4,a=1){const l=_a(t,e,a),n=_a(t+1,e,a);return(Be(t)-l+n)/7}function Kt(t){return t>99?t:t>Q.twoDigitCutoffYear?1900+t:2e3+t}function Rl(t,e,a,l=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};l&&(s.timeZone=l);const r={timeZoneName:e,...s},i=new Intl.DateTimeFormat(a,r).formatToParts(n).find(m=>m.type.toLowerCase()==="timezonename");return i?i.value:null}function At(t,e){let a=parseInt(t,10);Number.isNaN(a)&&(a=0);const l=parseInt(e,10)||0,n=a<0||Object.is(a,-0)?-l:l;return a*60+n}function Wl(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new re(`Invalid unit value ${t}`);return e}function Dt(t,e){const a={};for(const l in t)if(Ye(t,l)){const n=t[l];if(n==null)continue;a[e(l)]=Wl(n)}return a}function st(t,e){const a=Math.trunc(Math.abs(t/60)),l=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${K(a,2)}:${K(l,2)}`;case"narrow":return`${n}${a}${l>0?`:${l}`:""}`;case"techie":return`${n}${K(a,2)}${K(l,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function $t(t){return us(t,["hour","minute","second","millisecond"])}const cs=["January","February","March","April","May","June","July","August","September","October","November","December"],zl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ms=["J","F","M","A","M","J","J","A","S","O","N","D"];function Hl(t){switch(t){case"narrow":return[...ms];case"short":return[...zl];case"long":return[...cs];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Zl=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Bl=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],fs=["M","T","W","T","F","S","S"];function ql(t){switch(t){case"narrow":return[...fs];case"short":return[...Bl];case"long":return[...Zl];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Gl=["AM","PM"],ps=["Before Christ","Anno Domini"],hs=["BC","AD"],ys=["B","A"];function Yl(t){switch(t){case"narrow":return[...ys];case"short":return[...hs];case"long":return[...ps];default:return null}}function vs(t){return Gl[t.hour<12?0:1]}function gs(t,e){return ql(e)[t.weekday-1]}function ws(t,e){return Hl(e)[t.month-1]}function Vs(t,e){return Yl(e)[t.year<0?0:1]}function xs(t,e,a="always",l=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(a==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${n[t][0]}`;case-1:return h?"yesterday":`last ${n[t][0]}`;case 0:return h?"today":`this ${n[t][0]}`}}const r=Object.is(e,-0)||e<0,i=Math.abs(e),m=i===1,p=n[t],c=l?m?p[1]:p[2]||p[1]:m?n[t][0]:t;return r?`${i} ${c} ago`:`in ${i} ${c}`}function Pa(t,e){let a="";for(const l of t)l.literal?a+=l.val:a+=e(l.val);return a}const Is={D:bt,DD:fl,DDD:pl,DDDD:hl,t:yl,tt:vl,ttt:gl,tttt:wl,T:Vl,TT:xl,TTT:Il,TTTT:Tl,f:Sl,ff:kl,fff:Dl,ffff:El,F:bl,FF:Ol,FFF:Nl,FFFF:Ml};class oe{static create(e,a={}){return new oe(e,a)}static parseFormat(e){let a=null,l="",n=!1;const s=[];for(let r=0;r<e.length;r++){const i=e.charAt(r);i==="'"?(l.length>0&&s.push({literal:n||/^\s+$/.test(l),val:l}),a=null,l="",n=!n):n||i===a?l+=i:(l.length>0&&s.push({literal:/^\s+$/.test(l),val:l}),l=i,a=i)}return l.length>0&&s.push({literal:n||/^\s+$/.test(l),val:l}),s}static macroTokenToFormatOpts(e){return Is[e]}constructor(e,a){this.opts=a,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,a){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...a}).format()}dtFormatter(e,a={}){return this.loc.dtFormatter(e,{...this.opts,...a})}formatDateTime(e,a){return this.dtFormatter(e,a).format()}formatDateTimeParts(e,a){return this.dtFormatter(e,a).formatToParts()}formatInterval(e,a){return this.dtFormatter(e.start,a).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,a){return this.dtFormatter(e,a).resolvedOptions()}num(e,a=0){if(this.opts.forceSimple)return K(e,a);const l={...this.opts};return a>0&&(l.padTo=a),this.loc.numberFormatter(l).format(e)}formatDateTimeFromString(e,a){const l=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(u,O)=>this.loc.extract(e,u,O),r=u=>e.isOffsetFixed&&e.offset===0&&u.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,u.format):"",i=()=>l?vs(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(u,O)=>l?ws(e,u):s(O?{month:u}:{month:u,day:"numeric"},"month"),p=(u,O)=>l?gs(e,u):s(O?{weekday:u}:{weekday:u,month:"long",day:"numeric"},"weekday"),c=u=>{const O=oe.macroTokenToFormatOpts(u);return O?this.formatWithSystemDefault(e,O):u},h=u=>l?Vs(e,u):s({era:u},"era"),y=u=>{switch(u){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return i();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return p("short",!0);case"cccc":return p("long",!0);case"ccccc":return p("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return p("short",!1);case"EEEE":return p("long",!1);case"EEEEE":return p("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(u)}};return Pa(oe.parseFormat(a),y)}formatDurationFromString(e,a){const l=m=>{switch(m[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=m=>p=>{const c=l(p);return c?this.num(m.get(c),p.length):p},s=oe.parseFormat(a),r=s.reduce((m,{literal:p,val:c})=>p?m:m.concat(c),[]),i=e.shiftTo(...r.map(l).filter(m=>m));return Pa(s,n(i))}}const jl=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Je(...t){const e=t.reduce((a,l)=>a+l.source,"");return RegExp(`^${e}$`)}function Qe(...t){return e=>t.reduce(([a,l,n],s)=>{const[r,i,m]=s(e,n);return[{...a,...r},i||l,m]},[{},null,1]).slice(0,2)}function Xe(t,...e){if(t==null)return[null,null];for(const[a,l]of e){const n=a.exec(t);if(n)return l(n)}return[null,null]}function Jl(...t){return(e,a)=>{const l={};let n;for(n=0;n<t.length;n++)l[t[n]]=Ee(e[a+n]);return[l,null,a+n]}}const Ql=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ts=`(?:${Ql.source}?(?:\\[(${jl.source})\\])?)?`,ua=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Xl=RegExp(`${ua.source}${Ts}`),da=RegExp(`(?:T${Xl.source})?`),Ss=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,bs=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ks=/(\d{4})-?(\d{3})/,Os=Jl("weekYear","weekNumber","weekDay"),Ds=Jl("year","ordinal"),Ns=/(\d{4})-(\d\d)-(\d\d)/,Kl=RegExp(`${ua.source} ?(?:${Ql.source}|(${jl.source}))?`),Es=RegExp(`(?: ${Kl.source})?`);function qe(t,e,a){const l=t[e];return W(l)?a:Ee(l)}function Ms(t,e){return[{year:qe(t,e),month:qe(t,e+1,1),day:qe(t,e+2,1)},null,e+3]}function Ke(t,e){return[{hours:qe(t,e,0),minutes:qe(t,e+1,0),seconds:qe(t,e+2,0),milliseconds:oa(t[e+3])},null,e+4]}function dt(t,e){const a=!t[e]&&!t[e+1],l=At(t[e+1],t[e+2]),n=a?null:ie.instance(l);return[{},n,e+3]}function ct(t,e){const a=t[e]?Se.create(t[e]):null;return[{},a,e+1]}const Cs=RegExp(`^T?${ua.source}$`),As=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function $s(t){const[e,a,l,n,s,r,i,m,p]=t,c=e[0]==="-",h=m&&m[0]==="-",y=(u,O=!1)=>u!==void 0&&(O||u&&c)?-u:u;return[{years:y($e(a)),months:y($e(l)),weeks:y($e(n)),days:y($e(s)),hours:y($e(r)),minutes:y($e(i)),seconds:y($e(m),m==="-0"),milliseconds:y(oa(p),h)}]}const Us={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ca(t,e,a,l,n,s,r){const i={year:e.length===2?Kt(Ee(e)):Ee(e),month:zl.indexOf(a)+1,day:Ee(l),hour:Ee(n),minute:Ee(s)};return r&&(i.second=Ee(r)),t&&(i.weekday=t.length>3?Zl.indexOf(t)+1:Bl.indexOf(t)+1),i}const _s=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Ps(t){const[,e,a,l,n,s,r,i,m,p,c,h]=t,y=ca(e,n,l,a,s,r,i);let u;return m?u=Us[m]:p?u=0:u=At(c,h),[y,new ie(u)]}function Fs(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Ls=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Rs=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ws=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Fa(t){const[,e,a,l,n,s,r,i]=t;return[ca(e,n,l,a,s,r,i),ie.utcInstance]}function zs(t){const[,e,a,l,n,s,r,i]=t;return[ca(e,i,a,l,n,s,r),ie.utcInstance]}const Hs=Je(Ss,da),Zs=Je(bs,da),Bs=Je(ks,da),qs=Je(Xl),en=Qe(Ms,Ke,dt,ct),Gs=Qe(Os,Ke,dt,ct),Ys=Qe(Ds,Ke,dt,ct),js=Qe(Ke,dt,ct);function Js(t){return Xe(t,[Hs,en],[Zs,Gs],[Bs,Ys],[qs,js])}function Qs(t){return Xe(Fs(t),[_s,Ps])}function Xs(t){return Xe(t,[Ls,Fa],[Rs,Fa],[Ws,zs])}function Ks(t){return Xe(t,[As,$s])}const er=Qe(Ke);function tr(t){return Xe(t,[Cs,er])}const ar=Je(Ns,Es),lr=Je(Kl),nr=Qe(Ke,dt,ct);function sr(t){return Xe(t,[ar,en],[lr,nr])}const La="Invalid Duration",tn={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},rr={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...tn},me=146097/400,Le=146097/4800,or={years:{quarters:4,months:12,weeks:me/7,days:me,hours:me*24,minutes:me*24*60,seconds:me*24*60*60,milliseconds:me*24*60*60*1e3},quarters:{months:3,weeks:me/28,days:me/4,hours:me*24/4,minutes:me*24*60/4,seconds:me*24*60*60/4,milliseconds:me*24*60*60*1e3/4},months:{weeks:Le/7,days:Le,hours:Le*24,minutes:Le*24*60,seconds:Le*24*60*60,milliseconds:Le*24*60*60*1e3},...tn},_e=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ir=_e.slice(0).reverse();function Ne(t,e,a=!1){const l={values:a?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new H(l)}function an(t,e){let a=e.milliseconds??0;for(const l of ir.slice(1))e[l]&&(a+=e[l]*t[l].milliseconds);return a}function Ra(t,e){const a=an(t,e)<0?-1:1;_e.reduceRight((l,n)=>{if(W(e[n]))return l;if(l){const s=e[l]*a,r=t[n][l],i=Math.floor(s/r);e[n]+=i*a,e[l]-=i*r*a}return n},null),_e.reduce((l,n)=>{if(W(e[n]))return l;if(l){const s=e[l]%1;e[l]-=s,e[n]+=s*t[l][n]}return n},null)}function ur(t){const e={};for(const[a,l]of Object.entries(t))l!==0&&(e[a]=l);return e}class H{constructor(e){const a=e.conversionAccuracy==="longterm"||!1;let l=a?or:rr;e.matrix&&(l=e.matrix),this.values=e.values,this.loc=e.loc||B.create(),this.conversionAccuracy=a?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=l,this.isLuxonDuration=!0}static fromMillis(e,a){return H.fromObject({milliseconds:e},a)}static fromObject(e,a={}){if(e==null||typeof e!="object")throw new re(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new H({values:Dt(e,H.normalizeUnit),loc:B.fromObject(a),conversionAccuracy:a.conversionAccuracy,matrix:a.matrix})}static fromDurationLike(e){if(Ce(e))return H.fromMillis(e);if(H.isDuration(e))return e;if(typeof e=="object")return H.fromObject(e);throw new re(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,a){const[l]=Ks(e);return l?H.fromObject(l,a):H.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,a){const[l]=tr(e);return l?H.fromObject(l,a):H.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,a=null){if(!e)throw new re("need to specify a reason the Duration is invalid");const l=e instanceof ge?e:new ge(e,a);if(Q.throwOnInvalid)throw new An(l);return new H({invalid:l})}static normalizeUnit(e){const a={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!a)throw new ml(e);return a}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,a={}){const l={...a,floor:a.round!==!1&&a.floor!==!1};return this.isValid?oe.create(this.loc,l).formatDurationFromString(this,e):La}toHuman(e={}){if(!this.isValid)return La;const a=_e.map(l=>{const n=this.values[l];return W(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:l.slice(0,-1)}).format(n)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(a)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=ia(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const a=this.toMillis();return a<0||a>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},$.fromMillis(a,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?an(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const a=H.fromDurationLike(e),l={};for(const n of _e)(Ye(a.values,n)||Ye(this.values,n))&&(l[n]=a.get(n)+this.get(n));return Ne(this,{values:l},!0)}minus(e){if(!this.isValid)return this;const a=H.fromDurationLike(e);return this.plus(a.negate())}mapUnits(e){if(!this.isValid)return this;const a={};for(const l of Object.keys(this.values))a[l]=Wl(e(this.values[l],l));return Ne(this,{values:a},!0)}get(e){return this[H.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const a={...this.values,...Dt(e,H.normalizeUnit)};return Ne(this,{values:a})}reconfigure({locale:e,numberingSystem:a,conversionAccuracy:l,matrix:n}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:a}),matrix:n,conversionAccuracy:l};return Ne(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Ra(this.matrix,e),Ne(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=ur(this.normalize().shiftToAll().toObject());return Ne(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(r=>H.normalizeUnit(r));const a={},l={},n=this.toObject();let s;for(const r of _e)if(e.indexOf(r)>=0){s=r;let i=0;for(const p in l)i+=this.matrix[p][r]*l[p],l[p]=0;Ce(n[r])&&(i+=n[r]);const m=Math.trunc(i);a[r]=m,l[r]=(i*1e3-m*1e3)/1e3}else Ce(n[r])&&(l[r]=n[r]);for(const r in l)l[r]!==0&&(a[s]+=r===s?l[r]:l[r]/this.matrix[s][r]);return Ra(this.matrix,a),Ne(this,{values:a},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const a of Object.keys(this.values))e[a]=this.values[a]===0?0:-this.values[a];return Ne(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function a(l,n){return l===void 0||l===0?n===void 0||n===0:l===n}for(const l of _e)if(!a(this.values[l],e.values[l]))return!1;return!0}}const Re="Invalid Interval";function dr(t,e){return!t||!t.isValid?J.invalid("missing or invalid start"):!e||!e.isValid?J.invalid("missing or invalid end"):e<t?J.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class J{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,a=null){if(!e)throw new re("need to specify a reason the Interval is invalid");const l=e instanceof ge?e:new ge(e,a);if(Q.throwOnInvalid)throw new Cn(l);return new J({invalid:l})}static fromDateTimes(e,a){const l=tt(e),n=tt(a),s=dr(l,n);return s??new J({start:l,end:n})}static after(e,a){const l=H.fromDurationLike(a),n=tt(e);return J.fromDateTimes(n,n.plus(l))}static before(e,a){const l=H.fromDurationLike(a),n=tt(e);return J.fromDateTimes(n.minus(l),n)}static fromISO(e,a){const[l,n]=(e||"").split("/",2);if(l&&n){let s,r;try{s=$.fromISO(l,a),r=s.isValid}catch{r=!1}let i,m;try{i=$.fromISO(n,a),m=i.isValid}catch{m=!1}if(r&&m)return J.fromDateTimes(s,i);if(r){const p=H.fromISO(n,a);if(p.isValid)return J.after(s,p)}else if(m){const p=H.fromISO(l,a);if(p.isValid)return J.before(i,p)}}return J.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",a){if(!this.isValid)return NaN;const l=this.start.startOf(e,a);let n;return a!=null&&a.useLocaleWeeks?n=this.end.reconfigure({locale:l.locale}):n=this.end,n=n.startOf(e,a),Math.floor(n.diff(l,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:a}={}){return this.isValid?J.fromDateTimes(e||this.s,a||this.e):this}splitAt(...e){if(!this.isValid)return[];const a=e.map(tt).filter(r=>this.contains(r)).sort((r,i)=>r.toMillis()-i.toMillis()),l=[];let{s:n}=this,s=0;for(;n<this.e;){const r=a[s]||this.e,i=+r>+this.e?this.e:r;l.push(J.fromDateTimes(n,i)),n=i,s+=1}return l}splitBy(e){const a=H.fromDurationLike(e);if(!this.isValid||!a.isValid||a.as("milliseconds")===0)return[];let{s:l}=this,n=1,s;const r=[];for(;l<this.e;){const i=this.start.plus(a.mapUnits(m=>m*n));s=+i>+this.e?this.e:i,r.push(J.fromDateTimes(l,s)),l=s,n+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const a=this.s>e.s?this.s:e.s,l=this.e<e.e?this.e:e.e;return a>=l?null:J.fromDateTimes(a,l)}union(e){if(!this.isValid)return this;const a=this.s<e.s?this.s:e.s,l=this.e>e.e?this.e:e.e;return J.fromDateTimes(a,l)}static merge(e){const[a,l]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],r)=>s?s.overlaps(r)||s.abutsStart(r)?[n,s.union(r)]:[n.concat([s]),r]:[n,r],[[],null]);return l&&a.push(l),a}static xor(e){let a=null,l=0;const n=[],s=e.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),r=Array.prototype.concat(...s),i=r.sort((m,p)=>m.time-p.time);for(const m of i)l+=m.type==="s"?1:-1,l===1?a=m.time:(a&&+a!=+m.time&&n.push(J.fromDateTimes(a,m.time)),a=null);return J.merge(n)}difference(...e){return J.xor([this].concat(e)).map(a=>this.intersection(a)).filter(a=>a&&!a.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Re}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=bt,a={}){return this.isValid?oe.create(this.s.loc.clone(a),e).formatInterval(this):Re}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Re}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Re}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Re}toFormat(e,{separator:a=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${a}${this.e.toFormat(e)}`:Re}toDuration(e,a){return this.isValid?this.e.diff(this.s,e,a):H.invalid(this.invalidReason)}mapEndpoints(e){return J.fromDateTimes(e(this.s),e(this.e))}}class ht{static hasDST(e=Q.defaultZone){const a=$.now().setZone(e).set({month:12});return!e.isUniversal&&a.offset!==a.set({month:6}).offset}static isValidIANAZone(e){return Se.isValidZone(e)}static normalizeZone(e){return Me(e,Q.defaultZone)}static getStartOfWeek({locale:e=null,locObj:a=null}={}){return(a||B.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:a=null}={}){return(a||B.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:a=null}={}){return(a||B.create(e)).getWeekendDays().slice()}static months(e="long",{locale:a=null,numberingSystem:l=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||B.create(a,l,s)).months(e)}static monthsFormat(e="long",{locale:a=null,numberingSystem:l=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||B.create(a,l,s)).months(e,!0)}static weekdays(e="long",{locale:a=null,numberingSystem:l=null,locObj:n=null}={}){return(n||B.create(a,l,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:a=null,numberingSystem:l=null,locObj:n=null}={}){return(n||B.create(a,l,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return B.create(e).meridiems()}static eras(e="short",{locale:a=null}={}){return B.create(a,null,"gregory").eras(e)}static features(){return{relative:Fl(),localeWeek:Ll()}}}function Wa(t,e){const a=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),l=a(e)-a(t);return Math.floor(H.fromMillis(l).as("days"))}function cr(t,e,a){const l=[["years",(m,p)=>p.year-m.year],["quarters",(m,p)=>p.quarter-m.quarter+(p.year-m.year)*4],["months",(m,p)=>p.month-m.month+(p.year-m.year)*12],["weeks",(m,p)=>{const c=Wa(m,p);return(c-c%7)/7}],["days",Wa]],n={},s=t;let r,i;for(const[m,p]of l)a.indexOf(m)>=0&&(r=m,n[m]=p(t,e),i=s.plus(n),i>e?(n[m]--,t=s.plus(n),t>e&&(i=t,n[m]--,t=s.plus(n))):t=i);return[t,n,i,r]}function mr(t,e,a,l){let[n,s,r,i]=cr(t,e,a);const m=e-n,p=a.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);p.length===0&&(r<e&&(r=n.plus({[i]:1})),r!==n&&(s[i]=(s[i]||0)+m/(r-n)));const c=H.fromObject(s,l);return p.length>0?H.fromMillis(m,l).shiftTo(...p).plus(c):c}const fr="missing Intl.DateTimeFormat.formatToParts support";function Z(t,e=a=>a){return{regex:t,deser:([a])=>e(as(a))}}const pr=String.fromCharCode(160),ln=`[ ${pr}]`,nn=new RegExp(ln,"g");function hr(t){return t.replace(/\./g,"\\.?").replace(nn,ln)}function za(t){return t.replace(/\./g,"").replace(nn," ").toLowerCase()}function ye(t,e){return t===null?null:{regex:RegExp(t.map(hr).join("|")),deser:([a])=>t.findIndex(l=>za(a)===za(l))+e}}function Ha(t,e){return{regex:t,deser:([,a,l])=>At(a,l),groups:e}}function yt(t){return{regex:t,deser:([e])=>e}}function yr(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function vr(t,e){const a=he(e),l=he(e,"{2}"),n=he(e,"{3}"),s=he(e,"{4}"),r=he(e,"{6}"),i=he(e,"{1,2}"),m=he(e,"{1,3}"),p=he(e,"{1,6}"),c=he(e,"{1,9}"),h=he(e,"{2,4}"),y=he(e,"{4,6}"),u=D=>({regex:RegExp(yr(D.val)),deser:([N])=>N,literal:!0}),g=(D=>{if(t.literal)return u(D);switch(D.val){case"G":return ye(e.eras("short"),0);case"GG":return ye(e.eras("long"),0);case"y":return Z(p);case"yy":return Z(h,Kt);case"yyyy":return Z(s);case"yyyyy":return Z(y);case"yyyyyy":return Z(r);case"M":return Z(i);case"MM":return Z(l);case"MMM":return ye(e.months("short",!0),1);case"MMMM":return ye(e.months("long",!0),1);case"L":return Z(i);case"LL":return Z(l);case"LLL":return ye(e.months("short",!1),1);case"LLLL":return ye(e.months("long",!1),1);case"d":return Z(i);case"dd":return Z(l);case"o":return Z(m);case"ooo":return Z(n);case"HH":return Z(l);case"H":return Z(i);case"hh":return Z(l);case"h":return Z(i);case"mm":return Z(l);case"m":return Z(i);case"q":return Z(i);case"qq":return Z(l);case"s":return Z(i);case"ss":return Z(l);case"S":return Z(m);case"SSS":return Z(n);case"u":return yt(c);case"uu":return yt(i);case"uuu":return Z(a);case"a":return ye(e.meridiems(),0);case"kkkk":return Z(s);case"kk":return Z(h,Kt);case"W":return Z(i);case"WW":return Z(l);case"E":case"c":return Z(a);case"EEE":return ye(e.weekdays("short",!1),1);case"EEEE":return ye(e.weekdays("long",!1),1);case"ccc":return ye(e.weekdays("short",!0),1);case"cccc":return ye(e.weekdays("long",!0),1);case"Z":case"ZZ":return Ha(new RegExp(`([+-]${i.source})(?::(${l.source}))?`),2);case"ZZZ":return Ha(new RegExp(`([+-]${i.source})(${l.source})?`),2);case"z":return yt(/[a-z_+-/]{1,256}?/i);case" ":return yt(/[^\S\n\r]/);default:return u(D)}})(t)||{invalidReason:fr};return g.token=t,g}const gr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function wr(t,e,a){const{type:l,value:n}=t;if(l==="literal"){const m=/^\s+$/.test(n);return{literal:!m,val:m?" ":n}}const s=e[l];let r=l;l==="hour"&&(e.hour12!=null?r=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?r="hour12":r="hour24":r=a.hour12?"hour12":"hour24");let i=gr[r];if(typeof i=="object"&&(i=i[s]),i)return{literal:!1,val:i}}function Vr(t){return[`^${t.map(a=>a.regex).reduce((a,l)=>`${a}(${l.source})`,"")}$`,t]}function xr(t,e,a){const l=t.match(e);if(l){const n={};let s=1;for(const r in a)if(Ye(a,r)){const i=a[r],m=i.groups?i.groups+1:1;!i.literal&&i.token&&(n[i.token.val[0]]=i.deser(l.slice(s,s+m))),s+=m}return[l,n]}else return[l,{}]}function Ir(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let a=null,l;return W(t.z)||(a=Se.create(t.z)),W(t.Z)||(a||(a=new ie(t.Z)),l=t.Z),W(t.q)||(t.M=(t.q-1)*3+1),W(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),W(t.u)||(t.S=oa(t.u)),[Object.keys(t).reduce((s,r)=>{const i=e(r);return i&&(s[i]=t[r]),s},{}),a,l]}let Wt=null;function Tr(){return Wt||(Wt=$.fromMillis(1555555555555)),Wt}function Sr(t,e){if(t.literal)return t;const a=oe.macroTokenToFormatOpts(t.val),l=un(a,e);return l==null||l.includes(void 0)?t:l}function sn(t,e){return Array.prototype.concat(...t.map(a=>Sr(a,e)))}class rn{constructor(e,a){if(this.locale=e,this.format=a,this.tokens=sn(oe.parseFormat(a),e),this.units=this.tokens.map(l=>vr(l,e)),this.disqualifyingUnit=this.units.find(l=>l.invalidReason),!this.disqualifyingUnit){const[l,n]=Vr(this.units);this.regex=RegExp(l,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[a,l]=xr(e,this.regex,this.handlers),[n,s,r]=l?Ir(l):[null,null,void 0];if(Ye(l,"a")&&Ye(l,"H"))throw new He("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:a,matches:l,result:n,zone:s,specificOffset:r}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function on(t,e,a){return new rn(t,a).explainFromTokens(e)}function br(t,e,a){const{result:l,zone:n,specificOffset:s,invalidReason:r}=on(t,e,a);return[l,n,s,r]}function un(t,e){if(!t)return null;const l=oe.create(e,t).dtFormatter(Tr()),n=l.formatToParts(),s=l.resolvedOptions();return n.map(r=>wr(r,t,s))}const zt="Invalid DateTime",Za=864e13;function nt(t){return new ge("unsupported zone",`the zone "${t.name}" is not supported`)}function Ht(t){return t.weekData===null&&(t.weekData=kt(t.c)),t.weekData}function Zt(t){return t.localWeekData===null&&(t.localWeekData=kt(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Ue(t,e){const a={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new $({...a,...e,old:a})}function dn(t,e,a){let l=t-e*60*1e3;const n=a.offset(l);if(e===n)return[l,e];l-=(n-e)*60*1e3;const s=a.offset(l);return n===s?[l,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function vt(t,e){t+=e*60*1e3;const a=new Date(t);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function xt(t,e,a){return dn(Ct(t),e,a)}function Ba(t,e){const a=t.o,l=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:l,month:n,day:Math.min(t.c.day,Ot(l,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},r=H.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),i=Ct(s);let[m,p]=dn(i,a,t.zone);return r!==0&&(m+=r,p=t.zone.offset(m)),{ts:m,o:p}}function We(t,e,a,l,n,s){const{setZone:r,zone:i}=a;if(t&&Object.keys(t).length!==0||e){const m=e||i,p=$.fromObject(t,{...a,zone:m,specificOffset:s});return r?p:p.setZone(i)}else return $.invalid(new ge("unparsable",`the input "${n}" can't be parsed as ${l}`))}function gt(t,e,a=!0){return t.isValid?oe.create(B.create("en-US"),{allowZ:a,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Bt(t,e){const a=t.c.year>9999||t.c.year<0;let l="";return a&&t.c.year>=0&&(l+="+"),l+=K(t.c.year,a?6:4),e?(l+="-",l+=K(t.c.month),l+="-",l+=K(t.c.day)):(l+=K(t.c.month),l+=K(t.c.day)),l}function qa(t,e,a,l,n,s){let r=K(t.c.hour);return e?(r+=":",r+=K(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!a)&&(r+=":")):r+=K(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!a)&&(r+=K(t.c.second),(t.c.millisecond!==0||!l)&&(r+=".",r+=K(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?r+="Z":t.o<0?(r+="-",r+=K(Math.trunc(-t.o/60)),r+=":",r+=K(Math.trunc(-t.o%60))):(r+="+",r+=K(Math.trunc(t.o/60)),r+=":",r+=K(Math.trunc(t.o%60)))),s&&(r+="["+t.zone.ianaName+"]"),r}const cn={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},kr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Or={ordinal:1,hour:0,minute:0,second:0,millisecond:0},mn=["year","month","day","hour","minute","second","millisecond"],Dr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Nr=["year","ordinal","hour","minute","second","millisecond"];function Er(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new ml(t);return e}function Ga(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Er(t)}}function Mr(t){return Tt[t]||(It===void 0&&(It=Q.now()),Tt[t]=t.offset(It)),Tt[t]}function Ya(t,e){const a=Me(e.zone,Q.defaultZone);if(!a.isValid)return $.invalid(nt(a));const l=B.fromObject(e);let n,s;if(W(t.year))n=Q.now();else{for(const m of mn)W(t[m])&&(t[m]=cn[m]);const r=_l(t)||Pl(t);if(r)return $.invalid(r);const i=Mr(a);[n,s]=xt(t,i,a)}return new $({ts:n,zone:a,loc:l,o:s})}function ja(t,e,a){const l=W(a.round)?!0:a.round,n=(r,i)=>(r=ia(r,l||a.calendary?0:2,!0),e.loc.clone(a).relFormatter(a).format(r,i)),s=r=>a.calendary?e.hasSame(t,r)?0:e.startOf(r).diff(t.startOf(r),r).get(r):e.diff(t,r).get(r);if(a.unit)return n(s(a.unit),a.unit);for(const r of a.units){const i=s(r);if(Math.abs(i)>=1)return n(i,r)}return n(t>e?-0:0,a.units[a.units.length-1])}function Ja(t){let e={},a;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],a=Array.from(t).slice(0,t.length-1)):a=Array.from(t),[e,a]}let It,Tt={};class ${constructor(e){const a=e.zone||Q.defaultZone;let l=e.invalid||(Number.isNaN(e.ts)?new ge("invalid input"):null)||(a.isValid?null:nt(a));this.ts=W(e.ts)?Q.now():e.ts;let n=null,s=null;if(!l)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(a))[n,s]=[e.old.c,e.old.o];else{const i=Ce(e.o)&&!e.old?e.o:a.offset(this.ts);n=vt(this.ts,i),l=Number.isNaN(n.year)?new ge("invalid input"):null,n=l?null:n,s=l?null:i}this._zone=a,this.loc=e.loc||B.create(),this.invalid=l,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new $({})}static local(){const[e,a]=Ja(arguments),[l,n,s,r,i,m,p]=a;return Ya({year:l,month:n,day:s,hour:r,minute:i,second:m,millisecond:p},e)}static utc(){const[e,a]=Ja(arguments),[l,n,s,r,i,m,p]=a;return e.zone=ie.utcInstance,Ya({year:l,month:n,day:s,hour:r,minute:i,second:m,millisecond:p},e)}static fromJSDate(e,a={}){const l=os(e)?e.valueOf():NaN;if(Number.isNaN(l))return $.invalid("invalid input");const n=Me(a.zone,Q.defaultZone);return n.isValid?new $({ts:l,zone:n,loc:B.fromObject(a)}):$.invalid(nt(n))}static fromMillis(e,a={}){if(Ce(e))return e<-Za||e>Za?$.invalid("Timestamp out of range"):new $({ts:e,zone:Me(a.zone,Q.defaultZone),loc:B.fromObject(a)});throw new re(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,a={}){if(Ce(e))return new $({ts:e*1e3,zone:Me(a.zone,Q.defaultZone),loc:B.fromObject(a)});throw new re("fromSeconds requires a numerical input")}static fromObject(e,a={}){e=e||{};const l=Me(a.zone,Q.defaultZone);if(!l.isValid)return $.invalid(nt(l));const n=B.fromObject(a),s=Dt(e,Ga),{minDaysInFirstWeek:r,startOfWeek:i}=$a(s,n),m=Q.now(),p=W(a.specificOffset)?l.offset(m):a.specificOffset,c=!W(s.ordinal),h=!W(s.year),y=!W(s.month)||!W(s.day),u=h||y,O=s.weekYear||s.weekNumber;if((u||c)&&O)throw new He("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&c)throw new He("Can't mix ordinal dates with month/day");const g=O||s.weekday&&!u;let D,N,V=vt(m,p);g?(D=Dr,N=kr,V=kt(V,r,i)):c?(D=Nr,N=Or,V=Rt(V)):(D=mn,N=cn);let I=!1;for(const P of D){const k=s[P];W(k)?I?s[P]=N[P]:s[P]=V[P]:I=!0}const F=g?ns(s,r,i):c?ss(s):_l(s),E=F||Pl(s);if(E)return $.invalid(E);const w=g?Ca(s,r,i):c?Aa(s):s,[A,f]=xt(w,p,l),z=new $({ts:A,zone:l,o:f,loc:n});return s.weekday&&u&&e.weekday!==z.weekday?$.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${z.toISO()}`):z.isValid?z:$.invalid(z.invalid)}static fromISO(e,a={}){const[l,n]=Js(e);return We(l,n,a,"ISO 8601",e)}static fromRFC2822(e,a={}){const[l,n]=Qs(e);return We(l,n,a,"RFC 2822",e)}static fromHTTP(e,a={}){const[l,n]=Xs(e);return We(l,n,a,"HTTP",a)}static fromFormat(e,a,l={}){if(W(e)||W(a))throw new re("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=l,r=B.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[i,m,p,c]=br(r,e,a);return c?$.invalid(c):We(i,m,l,`format ${a}`,e,p)}static fromString(e,a,l={}){return $.fromFormat(e,a,l)}static fromSQL(e,a={}){const[l,n]=sr(e);return We(l,n,a,"SQL",e)}static invalid(e,a=null){if(!e)throw new re("need to specify a reason the DateTime is invalid");const l=e instanceof ge?e:new ge(e,a);if(Q.throwOnInvalid)throw new Mn(l);return new $({invalid:l})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,a={}){const l=un(e,B.fromObject(a));return l?l.map(n=>n?n.val:null).join(""):null}static expandFormat(e,a={}){return sn(oe.parseFormat(e),B.fromObject(a)).map(n=>n.val).join("")}static resetCache(){It=void 0,Tt={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ht(this).weekYear:NaN}get weekNumber(){return this.isValid?Ht(this).weekNumber:NaN}get weekday(){return this.isValid?Ht(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Zt(this).weekday:NaN}get localWeekNumber(){return this.isValid?Zt(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Zt(this).weekYear:NaN}get ordinal(){return this.isValid?Rt(this.c).ordinal:NaN}get monthShort(){return this.isValid?ht.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ht.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ht.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ht.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,a=6e4,l=Ct(this.c),n=this.zone.offset(l-e),s=this.zone.offset(l+e),r=this.zone.offset(l-n*a),i=this.zone.offset(l-s*a);if(r===i)return[this];const m=l-r*a,p=l-i*a,c=vt(m,r),h=vt(p,i);return c.hour===h.hour&&c.minute===h.minute&&c.second===h.second&&c.millisecond===h.millisecond?[Ue(this,{ts:m}),Ue(this,{ts:p})]:[this]}get isInLeapYear(){return ut(this.year)}get daysInMonth(){return Ot(this.year,this.month)}get daysInYear(){return this.isValid?Be(this.year):NaN}get weeksInWeekYear(){return this.isValid?rt(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?rt(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:a,numberingSystem:l,calendar:n}=oe.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:a,numberingSystem:l,outputCalendar:n}}toUTC(e=0,a={}){return this.setZone(ie.instance(e),a)}toLocal(){return this.setZone(Q.defaultZone)}setZone(e,{keepLocalTime:a=!1,keepCalendarTime:l=!1}={}){if(e=Me(e,Q.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(a||l){const s=e.offset(this.ts),r=this.toObject();[n]=xt(r,s,e)}return Ue(this,{ts:n,zone:e})}else return $.invalid(nt(e))}reconfigure({locale:e,numberingSystem:a,outputCalendar:l}={}){const n=this.loc.clone({locale:e,numberingSystem:a,outputCalendar:l});return Ue(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const a=Dt(e,Ga),{minDaysInFirstWeek:l,startOfWeek:n}=$a(a,this.loc),s=!W(a.weekYear)||!W(a.weekNumber)||!W(a.weekday),r=!W(a.ordinal),i=!W(a.year),m=!W(a.month)||!W(a.day),p=i||m,c=a.weekYear||a.weekNumber;if((p||r)&&c)throw new He("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&r)throw new He("Can't mix ordinal dates with month/day");let h;s?h=Ca({...kt(this.c,l,n),...a},l,n):W(a.ordinal)?(h={...this.toObject(),...a},W(a.day)&&(h.day=Math.min(Ot(h.year,h.month),h.day))):h=Aa({...Rt(this.c),...a});const[y,u]=xt(h,this.o,this.zone);return Ue(this,{ts:y,o:u})}plus(e){if(!this.isValid)return this;const a=H.fromDurationLike(e);return Ue(this,Ba(this,a))}minus(e){if(!this.isValid)return this;const a=H.fromDurationLike(e).negate();return Ue(this,Ba(this,a))}startOf(e,{useLocaleWeeks:a=!1}={}){if(!this.isValid)return this;const l={},n=H.normalizeUnit(e);switch(n){case"years":l.month=1;case"quarters":case"months":l.day=1;case"weeks":case"days":l.hour=0;case"hours":l.minute=0;case"minutes":l.second=0;case"seconds":l.millisecond=0;break}if(n==="weeks")if(a){const s=this.loc.getStartOfWeek(),{weekday:r}=this;r<s&&(l.weekNumber=this.weekNumber-1),l.weekday=s}else l.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);l.month=(s-1)*3+1}return this.set(l)}endOf(e,a){return this.isValid?this.plus({[e]:1}).startOf(e,a).minus(1):this}toFormat(e,a={}){return this.isValid?oe.create(this.loc.redefaultToEN(a)).formatDateTimeFromString(this,e):zt}toLocaleString(e=bt,a={}){return this.isValid?oe.create(this.loc.clone(a),e).formatDateTime(this):zt}toLocaleParts(e={}){return this.isValid?oe.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:a=!1,suppressMilliseconds:l=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const r=e==="extended";let i=Bt(this,r);return i+="T",i+=qa(this,r,a,l,n,s),i}toISODate({format:e="extended"}={}){return this.isValid?Bt(this,e==="extended"):null}toISOWeekDate(){return gt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:a=!1,includeOffset:l=!0,includePrefix:n=!1,extendedZone:s=!1,format:r="extended"}={}){return this.isValid?(n?"T":"")+qa(this,r==="extended",a,e,l,s):null}toRFC2822(){return gt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return gt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Bt(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:a=!1,includeOffsetSpace:l=!0}={}){let n="HH:mm:ss.SSS";return(a||e)&&(l&&(n+=" "),a?n+="z":e&&(n+="ZZ")),gt(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():zt}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const a={...this.c};return e.includeConfig&&(a.outputCalendar=this.outputCalendar,a.numberingSystem=this.loc.numberingSystem,a.locale=this.loc.locale),a}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,a="milliseconds",l={}){if(!this.isValid||!e.isValid)return H.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...l},s=is(a).map(H.normalizeUnit),r=e.valueOf()>this.valueOf(),i=r?this:e,m=r?e:this,p=mr(i,m,s,n);return r?p.negate():p}diffNow(e="milliseconds",a={}){return this.diff($.now(),e,a)}until(e){return this.isValid?J.fromDateTimes(this,e):this}hasSame(e,a,l){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(a,l)<=n&&n<=s.endOf(a,l)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const a=e.base||$.fromObject({},{zone:this.zone}),l=e.padding?this<a?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),ja(a,this.plus(l),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?ja(e.base||$.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every($.isDateTime))throw new re("min requires all arguments be DateTimes");return Ua(e,a=>a.valueOf(),Math.min)}static max(...e){if(!e.every($.isDateTime))throw new re("max requires all arguments be DateTimes");return Ua(e,a=>a.valueOf(),Math.max)}static fromFormatExplain(e,a,l={}){const{locale:n=null,numberingSystem:s=null}=l,r=B.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return on(r,e,a)}static fromStringExplain(e,a,l={}){return $.fromFormatExplain(e,a,l)}static buildFormatParser(e,a={}){const{locale:l=null,numberingSystem:n=null}=a,s=B.fromOpts({locale:l,numberingSystem:n,defaultToEN:!0});return new rn(s,e)}static fromFormatParser(e,a,l={}){if(W(e)||W(a))throw new re("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=l,r=B.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!r.equals(a.locale))throw new re(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${a.locale}`);const{result:i,zone:m,specificOffset:p,invalidReason:c}=a.explainFromTokens(e);return c?$.invalid(c):We(i,m,l,`format ${a.format}`,e,p)}static get DATE_SHORT(){return bt}static get DATE_MED(){return fl}static get DATE_MED_WITH_WEEKDAY(){return $n}static get DATE_FULL(){return pl}static get DATE_HUGE(){return hl}static get TIME_SIMPLE(){return yl}static get TIME_WITH_SECONDS(){return vl}static get TIME_WITH_SHORT_OFFSET(){return gl}static get TIME_WITH_LONG_OFFSET(){return wl}static get TIME_24_SIMPLE(){return Vl}static get TIME_24_WITH_SECONDS(){return xl}static get TIME_24_WITH_SHORT_OFFSET(){return Il}static get TIME_24_WITH_LONG_OFFSET(){return Tl}static get DATETIME_SHORT(){return Sl}static get DATETIME_SHORT_WITH_SECONDS(){return bl}static get DATETIME_MED(){return kl}static get DATETIME_MED_WITH_SECONDS(){return Ol}static get DATETIME_MED_WITH_WEEKDAY(){return Un}static get DATETIME_FULL(){return Dl}static get DATETIME_FULL_WITH_SECONDS(){return Nl}static get DATETIME_HUGE(){return El}static get DATETIME_HUGE_WITH_SECONDS(){return Ml}}function tt(t){if($.isDateTime(t))return t;if(t&&t.valueOf&&Ce(t.valueOf()))return $.fromJSDate(t);if(t&&typeof t=="object")return $.fromObject(t);throw new re(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Ve=()=>{const t=(r,i=void 0)=>i===void 0?$.fromMillis(r).toFormat("yyyy-MM-dd HH:mm"):$.fromMillis(r,{zone:i}).toFormat("yyyy-MM-dd HH:mm"),e=r=>t(r,"Asia/Ho_Chi_Minh"),a=(r,i=void 0)=>i===void 0?$.fromMillis(r).toFormat("yyyy-MM-dd"):$.fromMillis(r,{zone:i}).toFormat("yyyy-MM-dd"),l=r=>a(r,"Asia/Ho_Chi_Minh"),n=(r,i=void 0)=>i===void 0?$.fromMillis(r).toFormat("HH:mm:ss"):$.fromMillis(r,{zone:i}).toFormat("HH:mm:ss");return{formatDateTime:t,formatDateTimeV:e,formatDate:a,formatDateV:l,formatTime:n,formatTimeV:r=>n(r,"Asia/Ho_Chi_Minh")}},Qa=Nt(),{formatDate:Cr}=Ve(),Ar=()=>G({page:1,perPage:10,total:0}),$r=()=>G({sortBy:"createdAt",sortingOrder:null}),Ur=()=>G({isActive:!0,search:""}),_r={[te.ESCORT]:"奧黛導遊",[te.SHUTTLE]:"機場接送",[te.CHARTER]:"包車旅遊",[te.MASSAGE]:"龍筋按摩",[te.TUTOR]:"越語家教",[te.QUOTE]:"自訂訂單"},be=t=>{const e=G(!1),a=G([]),{filters:l=Ur(),sorting:n=$r(),pagination:s=Ar()}=t||{},r=async()=>{e.value=!0;const y={...q(l),sortBy:n.value.sortBy,sortOrder:n.value.sortingOrder,offset:(s.value.page-1)*s.value.perPage,limit:s.value.perPage,...l.value.isActive&&{excludeStatus:"initial"},...!l.value.isActive&&{status:"initial"}},{data:u}=await de.getOrders(y);a.value=u.data;const O={page:s.value.page,perPage:10,total:u.total};i(()=>{s.value=O}),e.value=!1},{ignoreUpdates:i}=ea([s,n],r,{deep:!0});return ta(l,()=>{s.value.page=1,r()},{deep:!0}),r(),{categorys:_r,isLoading:e,filters:l,sorting:n,pagination:s,orders:a,fetch:r,getServiceDate:y=>Cr(Number(y.orderPlanEscort.startTime)),getServiceDuring:y=>{const u=$.fromMillis(Number(y.orderPlanEscort.startTime),{zone:"Asia/Ho_Chi_Minh"}),O=u.plus({hours:Number(y.orderPlanEscort.serviceHours)});return`${u.toFormat("HH:mm")} - ${O.toFormat("HH:mm")}`},getGuideExpect:y=>{var u;return(u=y.orderPlanEscort.guideExpectIds)==null?void 0:u.split(",").map(O=>{var g;return(g=Qa.guides.find(D=>D.id===Number(O)))==null?void 0:g.name}).join(", ")},getAttractions:y=>{var u;return(u=y.orderPlanEscort.attractionIds)==null?void 0:u.split(",").map(O=>{var g;return(g=Qa.attractions.find(D=>D.id===Number(O)))==null?void 0:g.name}).join(", ")},async add(y){console.log("add order",y)},async update(y){console.log("update order",y)},async remove(y){console.log("remove order",y)}}},Pr=t=>(vn("data-v-a5f33008"),t=t(),gn(),t),Fr={class:"flex items-center gap-2 max-w-[230px] ellipsis"},Lr={class:"max-w-[120px] ellipsis"},Rr={class:"ellipsis max-w-[230px]"},Wr={class:"ellipsis max-w-[230px]"},zr={class:"ellipsis max-w-[230px]"},Hr={class:"ellipsis max-w-[230px]"},Zr={class:"ellipsis max-w-[230px]"},Br={class:"ellipsis max-w-[230px]"},qr={class:"max-w-[180px] ellipsis"},Gr={class:"ellipsis max-w-[230px]"},Yr=Pr(()=>v("div",{class:"ellipsis max-w-[230px]"},"服務人員",-1)),jr={class:"ellipsis max-w-[230px]"},Jr={class:"ellipsis max-w-[230px]"},Qr={class:"flex gap-2 justify-end"},Xr={class:"flex flex-col-reverse md:flex-row gap-2 justify-between items-center py-2"},Kr={key:0,class:"flex"},eo=Ae({__name:"OrdersTable",props:{orders:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0},sortBy:{type:String,required:!0},sortingOrder:{type:String,required:!0}},emits:["edit-order","delete-order","update:sortBy","update:sortingOrder"],setup(t,{emit:e}){const{categorys:a}=be(),{formatDateTime:l,formatDateTimeV:n}=Ve(),{getServiceDate:s,getServiceDuring:r}=be(),i=pn([{label:"訂單編號",key:"id",sortable:!0},{label:"訂單狀態",key:"status",sortable:!0},{label:"付款狀態",key:"payment",sortable:!1},{label:"操作狀態",key:"manualOperationStatus",sortable:!1},{label:"下訂時間",key:"createdAt",sortable:!0},{label:"訂購人",key:"username",sortable:!0},{label:"訂購項目",key:"type",sortable:!0},{label:"訂購方案",key:"planName",sortable:!0},{label:"行程時段",key:"startTime",sortable:!0},{label:"已支付訂金",key:"deposit",sortable:!0},{label:"尾款(VND)",key:"finalPayment",sortable:!0},{label:" ",key:"actions",align:"right"}]),m={1:"東方小巴黎",2:"華燈夜生活",3:"西貢河船宴",4:"韓式桑拿趣"},p={1:"機場-市區",2:"市區-機場"},c=t,h=e,y=yn(c,"orders"),u=fa(c,"sortBy",h),O=fa(c,"sortingOrder",h),g={initial:"secondary",payment:"warning",payment_fail:"warning",completed:"success",cancel:"warning",cancel_completed:"secondary"},D={initial:"草稿",payment:"未付款",payment_fail:"付款失敗",completed:"已完成",cancel:"訂單取消",cancel_completed:"已取消"},N={[X.PENDING]:"待處理",[X.PROCESSED]:"已處理"},V={[X.PENDING]:"warning",[X.PROCESSED]:"success"},I=ee(()=>Math.ceil(c.pagination.total/c.pagination.perPage)),{confirm:F}=hn(),E=async d=>{await F({title:"Delete user",message:`Are you sure you want to delete ${d.id}?`,okText:"Delete",cancelText:"Cancel",size:"small",maxWidth:"380px"})&&h("delete-order",d)},w=d=>{const T=d.payment||[];if(T.length===0)return 0;const C=T.find(S=>S.type===Pt.ECPAY_PAYMENT);return C?C.amount:0},A=d=>d<1e3?d.toString():`${Math.floor(d/1e3)}K`,f=d=>{switch(d.type){case et.PlanShuttle:return A(d.orderPlanShuttleSnapshot.totalAmount-d.orderPlanShuttleSnapshot.prePaymentAmount);case et.PlanCharter:return A(d.orderPlanCharterSnapshot.totalAmount-d.orderPlanCharterSnapshot.prePaymentAmount);case et.PlanEscort:return A(d.orderPlanEscortSnapshot.totalAmount-d.orderPlanEscortSnapshot.prePaymentAmount);case et.PlanMassage:return A(d.orderPlanDragonMassageSnapshot.totalAmount-d.orderPlanDragonMassageSnapshot.prePaymentAmount);case et.PlanTutor:return A(d.orderPlanTutorSnapshot.totalAmount-d.orderPlanTutorSnapshot.prePaymentAmount);default:return"N/A"}},z={[Pt.ECPAY_PAYMENT]:"綠界付款",[Pt.VOIN_PAYMENT]:"VCoin"},P={[Ie.INITIAL]:"未付款",[Ie.COMPLETED]:"付款成功",[Ie.FAILED]:"付款失敗",[Ie.EXPIRED]:"付款逾期",[Ie.REFUND]:"退款"},k={[Ie.INITIAL]:"warning",[Ie.COMPLETED]:"success",[Ie.FAILED]:"danger",[Ie.EXPIRED]:"secondary",[Ie.REFUND]:"warning"},b=d=>{const T=z[d.type],C=P[d.status];return`${T} - ${C}`},U=ee(()=>y.value.map(d=>{if(d.type===te.ESCORT)return{...d,planName:m[d.orderPlanEscort.planId],startTime:`${s(d)}
${r(d)}`,orderPlanEscort:{...d.orderPlanEscort}};if(d.type===te.SHUTTLE)return{...d,planName:p[d.orderPlanShuttle.planId],startTime:n(Number(d.orderPlanShuttle.time)),orderPlanEscort:{...d.orderPlanShuttle}};if(d.type===te.CHARTER)return{...d,planName:"包車旅遊",startTime:n(Number(d.orderPlanCharter.time)),orderPlanEscort:{...d.orderPlanCharter}};if(d.type===te.MASSAGE){let T=n(Number(d.orderPlanDragonMassage.time));return d.orderPlanDragonMassage.confirmedTime&&(T=n(Number(d.orderPlanDragonMassage.confirmedTime))),{...d,planName:"龍筋按摩",startTime:T,orderPlanEscort:{...d.orderPlanDragonMassage}}}if(d.type===te.TUTOR){const T=n(Number(d.orderPlanTutor.startTime));return{...d,planName:"越語家教",startTime:T,orderPlanEscort:{...d.orderPlanTutor}}}if(d.type===te.QUOTE)return{...d,planName:"自訂訂單",startTime:"N/A",orderPlanEscort:{...d.orderPlanCustomQuote}}}));return(d,T)=>{const C=_("VaBadge"),S=_("VaButton"),xe=_("VaDataTable"),ke=_("VaSelect"),Oe=_("VaPagination");return Y(),ve(St,null,[o(xe,{"sort-by":q(u),"onUpdate:sortBy":T[0]||(T[0]=R=>pa(u)?u.value=R:null),"sorting-order":q(O),"onUpdate:sortingOrder":T[1]||(T[1]=R=>pa(O)?O.value=R:null),columns:q(i),items:U.value,loading:d.$props.loading},{"cell(id)":x(({rowData:R})=>[v("div",Fr,le(R.id),1)]),"cell(username)":x(({rowData:R})=>{var ae;return[v("div",Lr,le((ae=R.userInfo)==null?void 0:ae.firstName),1)]}),"cell(status)":x(({rowData:R})=>[v("div",Rr,[o(C,{text:D[R.status],color:g[R.status]},null,8,["text","color"])])]),"cell(payment)":x(({rowData:R})=>[v("div",Wr,[(Y(!0),ve(St,null,Xa(R.payment,ae=>(Y(),ue(C,{key:ae.id,text:b(ae),color:k[ae.status]},null,8,["text","color"]))),128))])]),"cell(manualOperationStatus)":x(({rowData:R})=>[v("div",zr,[o(C,{text:N[R.manualOperationStatus],color:V[R.manualOperationStatus]},null,8,["text","color"])])]),"cell(createdAt)":x(({rowData:R})=>[v("div",Hr,le(q(l)(Number(R.createdAt))),1)]),"cell(type)":x(({rowData:R})=>[v("div",Zr,le(q(a)[R.type]),1)]),"cell(planName)":x(({rowData:R})=>[v("div",Br,le(R.planName),1)]),"cell(startTime)":x(({rowData:R})=>[v("div",qr,le(R.startTime),1)]),"cell(numGuides)":x(({rowData:R})=>{var ae;return[v("div",Gr,le((ae=R.orderPlanEscort)==null?void 0:ae.numGuides),1)]}),"cell(attendant)":x(({})=>[Yr]),"cell(deposit)":x(({rowData:R})=>[v("div",jr,le(w(R)),1)]),"cell(finalPayment)":x(({rowData:R})=>[v("div",Jr,le(f(R)),1)]),"cell(role)":x(({rowData:R})=>[o(C,{text:R.status,color:g[R.status]},null,8,["text","color"])]),"cell(actions)":x(({rowData:R})=>[v("div",Qr,[o(S,{preset:"primary",size:"small",icon:"mso-edit","aria-label":"Edit user",onClick:ae=>d.$emit("edit-order",R)},null,8,["onClick"]),o(S,{preset:"primary",size:"small",icon:"mso-delete",color:"danger","aria-label":"Delete user",onClick:ae=>E(R)},null,8,["onClick"])])]),_:1},8,["sort-by","sorting-order","columns","items","loading"]),v("div",Xr,[v("div",null,[v("b",null,"共"+le(d.$props.pagination.total)+" 筆資料",1),se(" 每頁筆數 "),o(ke,{modelValue:d.$props.pagination.perPage,"onUpdate:modelValue":T[2]||(T[2]=R=>d.$props.pagination.perPage=R),class:"!w-20",options:[10]},null,8,["modelValue"])]),I.value>1?(Y(),ve("div",Kr,[o(S,{preset:"secondary",icon:"va-arrow-left","aria-label":"Previous page",disabled:d.$props.pagination.page===1,onClick:T[3]||(T[3]=R=>d.$props.pagination.page--)},null,8,["disabled"]),o(S,{class:"mr-2",preset:"secondary",icon:"va-arrow-right","aria-label":"Next page",disabled:d.$props.pagination.page===I.value,onClick:T[4]||(T[4]=R=>d.$props.pagination.page++)},null,8,["disabled"]),o(Oe,{modelValue:d.$props.pagination.page,"onUpdate:modelValue":T[5]||(T[5]=R=>d.$props.pagination.page=R),"buttons-preset":"secondary",pages:I.value,"visible-pages":5,"boundary-links":!1,"direction-links":!1},null,8,["modelValue","pages"])])):Ge("",!0)])],64)}}});const to=wn(eo,[["__scopeId","data-v-a5f33008"]]),ao={class:"self-stretch flex-col justify-start items-start gap-4 flex"},lo=v("span",{class:"px-2"},"訂單資訊",-1),no={class:"flex gap-4 flex-col sm:flex-row w-full"},so={class:"flex gap-4 flex-col sm:flex-row w-full"},ro={class:"flex gap-4 flex-col sm:flex-row w-full"},oo={class:"flex gap-4 flex-col sm:flex-row w-full"},io={class:"flex gap-4 flex-col sm:flex-row w-full"},uo={class:"flex gap-4 flex-col sm:flex-row w-full"},co=v("span",{class:"px-2"},"聯絡資訊",-1),mo={class:"flex gap-4 flex-col sm:flex-row w-full"},fo={class:"flex gap-4 flex-col sm:flex-row w-full"},po={class:"flex gap-4 flex-col sm:flex-row w-full"},ho={class:"flex gap-4 flex-col sm:flex-row w-full"},yo=v("span",{class:"px-2"},"訂單狀態",-1),vo=v("span",{class:"px-2"},"結帳資訊",-1),go={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},wo=Ae({__name:"OrderDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const a=Nt(),{notify:l}=Pe(),{formatDate:n}=Ve(),{categorys:s,getServiceDate:r,getServiceDuring:i,getGuideExpect:m,getAttractions:p}=be(),c={1:"東方小巴黎",2:"華燈夜生活",3:"西貢河船宴",4:"韓式桑拿趣"},h={[_t.NORMAL]:"時裝",[_t.AO_DAI]:"奧黛"},y={[Ut.SCOOTER]:"機車",[Ut.DO_DO_CAR]:"嘟嘟車",[Ut.TAXI]:"TAXI"},u=[{text:"待處理",value:X.PENDING},{text:"已處理",value:X.PROCESSED}],O=t,g={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceDuring:"",numTourists:0,numGuides:0,guideExpect:"",guideDress:"",attractions:"",meetAddress:"",note:"",manualOperationStatus:X.PENDING,vehicle:"",needHoldHands:""},D=ee(()=>{if(!O.order)return g;const A=n(Number(O.order.orderPlanEscort.createdAt));return{id:O.order.id,manualOperationStatus:O.order.manualOperationStatus,createdAt:A,category:s[O.order.type],plan:c[O.order.orderPlanEscort.planId],serviceDate:r(O.order),serviceDuring:i(O.order),numTourists:O.order.orderPlanEscort.numTourists,numGuides:O.order.orderPlanEscort.numGuides,guideExpect:m(O.order),guideDress:h[O.order.orderPlanEscort.guideDress||_t.NORMAL],attractions:p(O.order),meetAddress:O.order.orderPlanEscort.meetAddress,note:O.order.orderPlanEscort.note,vehicle:y[O.order.orderPlanEscort.vehicle],needHoldHands:O.order.orderPlanEscort.needHoldHands?"是":"否"}}),N=ee(()=>{var k,b,U,d,T,C;const A=(k=O.order.userInfo.socialMedia.find(S=>S.type==="line"))==null?void 0:k.accountId,f=(b=O.order.userInfo.socialMedia.find(S=>S.type==="wechat"))==null?void 0:b.accountId,z=(U=O.order.userInfo.socialMedia.find(S=>S.type==="telegram"))==null?void 0:U.accountId,P=(d=O.order.userInfo.socialMedia.find(S=>S.type==="zalo"))==null?void 0:d.accountId;return{firstName:O.order.userInfo.firstName,email:O.order.userInfo.email,phone:(T=O.order.userInfo.phone)==null?void 0:T.phoneNumber,phoneCode:(C=O.order.userInfo.phone)==null?void 0:C.code,lineId:A,wechatId:f,telegramId:z,zaloId:P}}),V=G([]),I=e,F=async()=>{var A;if(V.value.length>0&&((A=O.order.orderPlanEscort.guideAssignedIds)==null?void 0:A.join(""))!==V.value.join("")){const f={orderId:O.order.id,guideIds:V.value};await de.assignGuidesToOrder(f)}if(D.value.meetAddress!==O.order.orderPlanEscort.meetAddress){const f={orderId:O.order.id,planParams:{meetAddress:D.value.meetAddress}};await de.updateEscortOrder(f)}de.updateManualOperationStatus({orderId:O.order.id,manualOperationStatus:D.value.manualOperationStatus}),I("save")},E=ee(()=>a.guides.filter(A=>A.isActive).map(A=>({text:A.name,value:A.id})));ot(()=>{V.value=O.order.orderPlanEscort.guideAssignedIds||[]});const w=async A=>{if(A)try{await navigator.clipboard.writeText(A),l({message:`已複製到剪貼簿: ${A}`,duration:3e3})}catch(f){alert(`Failed to copy text: ${f}`)}};return(A,f)=>{const z=_("VaDivider"),P=_("VaInput"),k=_("VaSelect"),b=_("VaTextarea"),U=_("VaIcon"),d=_("VaButton"),T=_("VaForm");return Y(),ue(T,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:C})=>[v("div",ao,[o(z,{class:"w-full",orientation:"left"},{default:x(()=>[lo]),_:1}),v("div",no,[o(P,{modelValue:D.value.id,"onUpdate:modelValue":f[0]||(f[0]=S=>D.value.id=S),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:D.value.createdAt,"onUpdate:modelValue":f[1]||(f[1]=S=>D.value.createdAt=S),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",so,[o(P,{modelValue:D.value.category,"onUpdate:modelValue":f[2]||(f[2]=S=>D.value.category=S),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:D.value.plan,"onUpdate:modelValue":f[3]||(f[3]=S=>D.value.plan=S),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",ro,[o(P,{modelValue:D.value.serviceDate,"onUpdate:modelValue":f[4]||(f[4]=S=>D.value.serviceDate=S),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:D.value.serviceDuring,"onUpdate:modelValue":f[5]||(f[5]=S=>D.value.serviceDuring=S),label:"行程時段",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",oo,[o(P,{modelValue:D.value.numTourists,"onUpdate:modelValue":f[6]||(f[6]=S=>D.value.numTourists=S),label:"遊客人數",class:"w-full sm:w-1/2",name:"numTourists",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:D.value.numGuides,"onUpdate:modelValue":f[7]||(f[7]=S=>D.value.numGuides=S),label:"導遊人數",class:"w-full sm:w-1/2",name:"numGuides",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",io,[o(P,{modelValue:D.value.guideExpect,"onUpdate:modelValue":f[8]||(f[8]=S=>D.value.guideExpect=S),label:"導遊偏好",class:"w-full sm:w-1/2",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:D.value.guideDress,"onUpdate:modelValue":f[9]||(f[9]=S=>D.value.guideDress=S),label:"導遊穿著",class:"w-full sm:w-1/2",name:"guideDress",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",uo,[o(P,{modelValue:D.value.vehicle,"onUpdate:modelValue":f[10]||(f[10]=S=>D.value.vehicle=S),label:"交通工具",class:"w-full sm:w-1/2",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:D.value.needHoldHands,"onUpdate:modelValue":f[11]||(f[11]=S=>D.value.needHoldHands=S),label:"是否牽手",class:"w-full sm:w-1/2",name:"guideDress",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(k,{modelValue:V.value,"onUpdate:modelValue":f[12]||(f[12]=S=>V.value=S),label:"導遊指派",class:"w-full",options:E.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",multiple:""},null,8,["modelValue","options"]),o(P,{modelValue:D.value.attractions,"onUpdate:modelValue":f[13]||(f[13]=S=>D.value.attractions=S),label:"景點偏好",class:"w-full",name:"attractions",readonly:"",preset:"solid"},null,8,["modelValue"]),o(b,{modelValue:D.value.meetAddress,"onUpdate:modelValue":f[14]||(f[14]=S=>D.value.meetAddress=S),label:"會合地址",class:"w-full",name:"meetAddress"},null,8,["modelValue"]),o(b,{modelValue:D.value.note,"onUpdate:modelValue":f[15]||(f[15]=S=>D.value.note=S),label:"訂單備註",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(z,{class:"w-full",orientation:"left"},{default:x(()=>[co]),_:1}),v("div",mo,[o(P,{modelValue:N.value.firstName,"onUpdate:modelValue":f[16]||(f[16]=S=>N.value.firstName=S),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.email,"onUpdate:modelValue":f[18]||(f[18]=S=>N.value.email=S),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:f[17]||(f[17]=()=>w(N.value.email))})]),_:1},8,["modelValue"])]),v("div",fo,[o(P,{modelValue:N.value.phoneCode,"onUpdate:modelValue":f[19]||(f[19]=S=>N.value.phoneCode=S),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.phone,"onUpdate:modelValue":f[21]||(f[21]=S=>N.value.phone=S),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:f[20]||(f[20]=()=>w(N.value.phone))})]),_:1},8,["modelValue"])]),v("div",po,[o(P,{modelValue:N.value.lineId,"onUpdate:modelValue":f[23]||(f[23]=S=>N.value.lineId=S),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[N.value.lineId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:f[22]||(f[22]=()=>w(N.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(P,{modelValue:N.value.wechatId,"onUpdate:modelValue":f[25]||(f[25]=S=>N.value.wechatId=S),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[N.value.wechatId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:f[24]||(f[24]=()=>w(N.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),v("div",ho,[o(P,{modelValue:N.value.telegramId,"onUpdate:modelValue":f[27]||(f[27]=S=>N.value.telegramId=S),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[N.value.telegramId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:f[26]||(f[26]=()=>w(N.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(P,{modelValue:N.value.zaloId,"onUpdate:modelValue":f[29]||(f[29]=S=>N.value.zaloId=S),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[N.value.zaloId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:f[28]||(f[28]=()=>w(N.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(z,{class:"w-full",orientation:"left"},{default:x(()=>[yo]),_:1}),o(k,{modelValue:D.value.manualOperationStatus,"onUpdate:modelValue":f[30]||(f[30]=S=>D.value.manualOperationStatus=S),label:"操作狀態",class:"w-full",options:u,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(z,{class:"w-full",orientation:"left"},{default:x(()=>[vo]),_:1}),v("div",go,[o(d,{preset:"secondary",color:"secondary",onClick:f[31]||(f[31]=S=>A.$emit("close"))},{default:x(()=>[se("取消")]),_:1}),o(d,{disabled:!C,onClick:F},{default:x(()=>[se(le(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),Vo=()=>({getStartTime:e=>$.fromMillis(Number(e.orderPlanShuttle.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm")}),xo={class:"self-stretch flex-col justify-start items-start gap-4 flex"},Io=v("span",{class:"px-2"},"訂單資訊",-1),To={class:"flex gap-4 flex-col sm:flex-row w-full"},So={class:"flex gap-4 flex-col sm:flex-row w-full"},bo={class:"flex gap-4 flex-col sm:flex-row w-full"},ko={class:"flex gap-4 flex-col sm:flex-row w-full"},Oo={class:"flex gap-4 flex-col sm:flex-row w-full"},Do={class:"flex gap-4 flex-col sm:flex-row w-full"},No={key:0,class:"flex gap-4 flex-col sm:flex-row w-full"},Eo={class:"flex gap-4 flex-col sm:flex-row w-full"},Mo=v("span",{class:"px-2"},"聯絡資訊",-1),Co={class:"flex gap-4 flex-col sm:flex-row w-full"},Ao={class:"flex gap-4 flex-col sm:flex-row w-full"},$o={class:"flex gap-4 flex-col sm:flex-row w-full"},Uo={class:"flex gap-4 flex-col sm:flex-row w-full"},_o=v("span",{class:"px-2"},"訂單狀態",-1),Po=v("span",{class:"px-2"},"結帳資訊",-1),Fo={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},Lo=Ae({__name:"OrderShuttleDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Pe(),{formatDate:l}=Ve(),{categorys:n}=be(),{getStartTime:s}=Vo(),r={1:"接機",2:"送機"},i={1:"經濟五座",2:"尊爵五座",3:"經濟七座",4:"商務七座",5:"尊爵七座",6:"商務九座",7:"多人巴士"},m={1:"1郡/3郡/富潤郡/新平郡",2:"7郡/守德市",3:"4郡/5郡/10郡/平盛郡",4:"其他郡（6郡/8郡/11郡/12郡/平新郡/舊邑郡/新富郡）"},p=[{text:"待處理",value:X.PENDING},{text:"已處理",value:X.PROCESSED}],c=t,h={id:-1,manualOperationStatus:X.PENDING,createdAt:"",category:"",planId:-1,plan:"",cardName:"",areaName:"",serviceDate:"",serviceDuring:"",buyFastPass:"",passengerNumber:0,passengerName:"",largeLuggageAmount:0,smallLuggageAmount:0,flightNumber:"",flightArrivalTime:"",flightType:"",customLocation:"",hotelName:"",note:""},y=ee(()=>{if(!c.order)return h;const V=l(Number(c.order.orderPlanShuttle.createdAt));return{id:c.order.id,manualOperationStatus:c.order.manualOperationStatus,createdAt:V,category:n[c.order.type],planId:c.order.orderPlanShuttle.planId,plan:r[c.order.orderPlanShuttle.planId],cardName:i[c.order.orderPlanShuttle.carId],areaName:m[c.order.orderPlanShuttle.areaId],serviceDate:l(Number(c.order.orderPlanShuttle.time)),serviceDuring:s(c.order),buyFastPass:c.order.orderPlanShuttle.buyFastPass?"是":"否",passengerNumber:c.order.orderPlanShuttle.passengerNumber,passengerName:c.order.orderPlanShuttle.passengerName,largeLuggageAmount:c.order.orderPlanShuttle.largeLuggageAmount,smallLuggageAmount:c.order.orderPlanShuttle.smallLuggageAmount,flightNumber:c.order.orderPlanShuttle.flightNumber,flightArrivalTime:c.order.orderPlanShuttle.flightArrivalTime,flightType:c.order.orderPlanShuttle.flightType==="international"?"國際線":"國內線",customLocation:c.order.orderPlanShuttle.customLocation,hotelName:c.order.orderPlanShuttle.hotelName,note:c.order.orderPlanShuttle.note}}),u=ee(()=>{var w,A,f,z,P,k;const V=(w=c.order.userInfo.socialMedia.find(b=>b.type==="line"))==null?void 0:w.accountId,I=(A=c.order.userInfo.socialMedia.find(b=>b.type==="wechat"))==null?void 0:A.accountId,F=(f=c.order.userInfo.socialMedia.find(b=>b.type==="telegram"))==null?void 0:f.accountId,E=(z=c.order.userInfo.socialMedia.find(b=>b.type==="zalo"))==null?void 0:z.accountId;return{firstName:c.order.userInfo.firstName,email:c.order.userInfo.email,phone:(P=c.order.userInfo.phone)==null?void 0:P.phoneNumber,phoneCode:(k=c.order.userInfo.phone)==null?void 0:k.code,lineId:V,wechatId:I,telegramId:F,zaloId:E}}),O=e,g=async()=>{de.updateManualOperationStatus({orderId:c.order.id,manualOperationStatus:y.value.manualOperationStatus}),O("save")},D=ee(()=>y.value.planId===1);ot(()=>{});const N=async V=>{if(V)try{await navigator.clipboard.writeText(V),a({message:`已複製到剪貼簿: ${V}`,duration:3e3})}catch(I){alert(`Failed to copy text: ${I}`)}};return(V,I)=>{const F=_("VaDivider"),E=_("VaInput"),w=_("VaTextarea"),A=_("VaIcon"),f=_("VaSelect"),z=_("VaButton"),P=_("VaForm");return Y(),ue(P,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:k})=>[v("div",xo,[o(F,{class:"w-full",orientation:"left"},{default:x(()=>[Io]),_:1}),v("div",To,[o(E,{modelValue:y.value.id,"onUpdate:modelValue":I[0]||(I[0]=b=>y.value.id=b),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.createdAt,"onUpdate:modelValue":I[1]||(I[1]=b=>y.value.createdAt=b),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",So,[o(E,{modelValue:y.value.category,"onUpdate:modelValue":I[2]||(I[2]=b=>y.value.category=b),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.plan,"onUpdate:modelValue":I[3]||(I[3]=b=>y.value.plan=b),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",bo,[o(E,{modelValue:y.value.cardName,"onUpdate:modelValue":I[4]||(I[4]=b=>y.value.cardName=b),label:"車款",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.areaName,"onUpdate:modelValue":I[5]||(I[5]=b=>y.value.areaName=b),label:"接送區域",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",ko,[o(E,{modelValue:y.value.serviceDate,"onUpdate:modelValue":I[6]||(I[6]=b=>y.value.serviceDate=b),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.serviceDuring,"onUpdate:modelValue":I[7]||(I[7]=b=>y.value.serviceDuring=b),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",Oo,[o(E,{modelValue:y.value.passengerNumber,"onUpdate:modelValue":I[8]||(I[8]=b=>y.value.passengerNumber=b),label:"乘客人數",class:"w-full sm:w-1/2",name:"passengerNumber",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.passengerName,"onUpdate:modelValue":I[9]||(I[9]=b=>y.value.passengerName=b),label:D.value?"舉牌大名":"乘客姓名",class:"w-full sm:w-1/2",name:"passengerName",readonly:"",preset:"solid"},null,8,["modelValue","label"])]),v("div",Do,[o(E,{modelValue:y.value.largeLuggageAmount,"onUpdate:modelValue":I[10]||(I[10]=b=>y.value.largeLuggageAmount=b),label:"大行李",class:"w-full sm:w-1/2",name:"largeLuggageAmount",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.smallLuggageAmount,"onUpdate:modelValue":I[11]||(I[11]=b=>y.value.smallLuggageAmount=b),label:"小行李",class:"w-full sm:w-1/2",name:"smallLuggageAmount",readonly:"",preset:"solid"},null,8,["modelValue"])]),D.value?(Y(),ve("div",No,[o(E,{modelValue:y.value.flightNumber,"onUpdate:modelValue":I[12]||(I[12]=b=>y.value.flightNumber=b),label:"航班編號",class:"w-full sm:w-1/2",name:"flightNumber",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.flightArrivalTime,"onUpdate:modelValue":I[13]||(I[13]=b=>y.value.flightArrivalTime=b),label:"航班抵達時間",class:"w-full sm:w-1/2",name:"flightArrivalTime",readonly:"",preset:"solid"},null,8,["modelValue"])])):Ge("",!0),v("div",Eo,[o(E,{modelValue:y.value.flightType,"onUpdate:modelValue":I[14]||(I[14]=b=>y.value.flightType=b),label:D.value?"航班類別":"下車地點",class:"w-full sm:w-1/2",name:"flightType",readonly:"",preset:"solid"},null,8,["modelValue","label"])]),o(w,{modelValue:y.value.customLocation,"onUpdate:modelValue":I[15]||(I[15]=b=>y.value.customLocation=b),label:D.value?"下車地點":"上車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue","label"]),o(w,{modelValue:y.value.hotelName,"onUpdate:modelValue":I[16]||(I[16]=b=>y.value.hotelName=b),label:"飯店名稱",class:"w-full",name:"hotelName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(w,{modelValue:y.value.note,"onUpdate:modelValue":I[17]||(I[17]=b=>y.value.note=b),label:"訂單備註",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{class:"w-full",orientation:"left"},{default:x(()=>[Mo]),_:1}),v("div",Co,[o(E,{modelValue:u.value.firstName,"onUpdate:modelValue":I[18]||(I[18]=b=>u.value.firstName=b),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:u.value.email,"onUpdate:modelValue":I[20]||(I[20]=b=>u.value.email=b),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(A,{name:"content_copy",color:"secondary",onClick:I[19]||(I[19]=()=>N(u.value.email))})]),_:1},8,["modelValue"])]),v("div",Ao,[o(E,{modelValue:u.value.phoneCode,"onUpdate:modelValue":I[21]||(I[21]=b=>u.value.phoneCode=b),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:u.value.phone,"onUpdate:modelValue":I[23]||(I[23]=b=>u.value.phone=b),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(A,{name:"content_copy",color:"secondary",onClick:I[22]||(I[22]=()=>N(u.value.phone))})]),_:1},8,["modelValue"])]),v("div",$o,[o(E,{modelValue:u.value.lineId,"onUpdate:modelValue":I[25]||(I[25]=b=>u.value.lineId=b),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[u.value.lineId?{name:"appendInner",fn:x(()=>[o(A,{name:"content_copy",color:"secondary",onClick:I[24]||(I[24]=()=>N(u.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(E,{modelValue:u.value.wechatId,"onUpdate:modelValue":I[27]||(I[27]=b=>u.value.wechatId=b),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[u.value.wechatId?{name:"appendInner",fn:x(()=>[o(A,{name:"content_copy",color:"secondary",onClick:I[26]||(I[26]=()=>N(u.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),v("div",Uo,[o(E,{modelValue:u.value.telegramId,"onUpdate:modelValue":I[29]||(I[29]=b=>u.value.telegramId=b),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[u.value.telegramId?{name:"appendInner",fn:x(()=>[o(A,{name:"content_copy",color:"secondary",onClick:I[28]||(I[28]=()=>N(u.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(E,{modelValue:u.value.zaloId,"onUpdate:modelValue":I[31]||(I[31]=b=>u.value.zaloId=b),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[u.value.zaloId?{name:"appendInner",fn:x(()=>[o(A,{name:"content_copy",color:"secondary",onClick:I[30]||(I[30]=()=>N(u.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(F,{class:"w-full",orientation:"left"},{default:x(()=>[_o]),_:1}),o(f,{modelValue:y.value.manualOperationStatus,"onUpdate:modelValue":I[32]||(I[32]=b=>y.value.manualOperationStatus=b),label:"操作狀態",class:"w-full",options:p,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(F,{class:"w-full",orientation:"left"},{default:x(()=>[Po]),_:1}),v("div",Fo,[o(z,{preset:"secondary",color:"secondary",onClick:I[33]||(I[33]=b=>V.$emit("close"))},{default:x(()=>[se("取消")]),_:1}),o(z,{disabled:!k,onClick:g},{default:x(()=>[se(le(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),Ro=()=>({getStartTime:e=>$.fromMillis(Number(e.orderPlanCharter.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm")}),Wo={class:"self-stretch flex-col justify-start items-start gap-4 flex"},zo=v("span",{class:"px-2"},"訂單資訊",-1),Ho={class:"flex gap-4 flex-col sm:flex-row w-full"},Zo={class:"flex gap-4 flex-col sm:flex-row w-full"},Bo={class:"flex gap-4 flex-col sm:flex-row w-full"},qo={class:"flex gap-4 flex-col sm:flex-row w-full"},Go={class:"flex gap-4 flex-col sm:flex-row w-full"},Yo=v("span",{class:"px-2"},"聯絡資訊",-1),jo={class:"flex gap-4 flex-col sm:flex-row w-full"},Jo={class:"flex gap-4 flex-col sm:flex-row w-full"},Qo={class:"flex gap-4 flex-col sm:flex-row w-full"},Xo={class:"flex gap-4 flex-col sm:flex-row w-full"},Ko=v("span",{class:"px-2"},"訂單狀態",-1),ei=v("span",{class:"px-2"},"結帳資訊",-1),ti={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},ai=Ae({__name:"OrderCharterDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Pe(),{formatDate:l}=Ve(),{categorys:n}=be(),{getStartTime:s}=Ro(),r={1:"包車旅遊"},i={1:"經濟五座",2:"尊爵五座",3:"經濟七座",4:"商務七座",5:"尊爵七座",6:"商務九座",7:"多人巴士"},m={1:"4hr/50km",2:"4hr/100km",3:"8hr/100km",4:"8hr/200km",5:"10hr/100km",6:"10hr/300km"},p=[{text:"待處理",value:X.PENDING},{text:"已處理",value:X.PROCESSED}],c=t,h={id:-1,manualOperationStatus:"pending",createdAt:"",category:"",plan:"",cardName:"",days:0,packageName:"",serviceDate:"",serviceDuring:"",passengerNumber:0,pickupLocation:"",dropOffLocation:"",travelPlanNote:""},y=ee(()=>{if(!c.order)return h;const N=l(Number(c.order.orderPlanCharter.createdAt));return{id:c.order.id,manualOperationStatus:c.order.manualOperationStatus,createdAt:N,category:n[c.order.type],plan:r[c.order.orderPlanCharter.planId],cardName:i[c.order.orderPlanCharter.carId],days:c.order.orderPlanCharter.days,packageName:m[c.order.orderPlanCharter.packageId],serviceDate:l(Number(c.order.orderPlanCharter.time)),serviceDuring:s(c.order),passengerNumber:c.order.orderPlanCharter.passengerNumber,pickupLocation:c.order.orderPlanCharter.pickupLocation,dropOffLocation:c.order.orderPlanCharter.dropOffLocation,travelPlanNote:c.order.orderPlanCharter.travelPlanNote}}),u=ee(()=>{var E,w,A,f,z,P;const N=(E=c.order.userInfo.socialMedia.find(k=>k.type==="line"))==null?void 0:E.accountId,V=(w=c.order.userInfo.socialMedia.find(k=>k.type==="wechat"))==null?void 0:w.accountId,I=(A=c.order.userInfo.socialMedia.find(k=>k.type==="telegram"))==null?void 0:A.accountId,F=(f=c.order.userInfo.socialMedia.find(k=>k.type==="zalo"))==null?void 0:f.accountId;return{firstName:c.order.userInfo.firstName,email:c.order.userInfo.email,phone:(z=c.order.userInfo.phone)==null?void 0:z.phoneNumber,phoneCode:(P=c.order.userInfo.phone)==null?void 0:P.code,lineId:N,wechatId:V,telegramId:I,zaloId:F}}),O=e,g=async()=>{de.updateManualOperationStatus({orderId:c.order.id,manualOperationStatus:y.value.manualOperationStatus}),O("save")},D=async N=>{if(N)try{await navigator.clipboard.writeText(N),a({message:`已複製到剪貼簿: ${N}`,duration:3e3})}catch(V){alert(`Failed to copy text: ${V}`)}};return(N,V)=>{const I=_("VaDivider"),F=_("VaInput"),E=_("VaTextarea"),w=_("VaIcon"),A=_("VaSelect"),f=_("VaButton"),z=_("VaForm");return Y(),ue(z,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:P})=>[v("div",Wo,[o(I,{class:"w-full",orientation:"left"},{default:x(()=>[zo]),_:1}),v("div",Ho,[o(F,{modelValue:y.value.id,"onUpdate:modelValue":V[0]||(V[0]=k=>y.value.id=k),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:y.value.createdAt,"onUpdate:modelValue":V[1]||(V[1]=k=>y.value.createdAt=k),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",Zo,[o(F,{modelValue:y.value.category,"onUpdate:modelValue":V[2]||(V[2]=k=>y.value.category=k),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:y.value.plan,"onUpdate:modelValue":V[3]||(V[3]=k=>y.value.plan=k),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",Bo,[o(F,{modelValue:y.value.cardName,"onUpdate:modelValue":V[4]||(V[4]=k=>y.value.cardName=k),label:"車款",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:y.value.packageName,"onUpdate:modelValue":V[5]||(V[5]=k=>y.value.packageName=k),label:"用車方案",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",qo,[o(F,{modelValue:y.value.serviceDate,"onUpdate:modelValue":V[6]||(V[6]=k=>y.value.serviceDate=k),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:y.value.serviceDuring,"onUpdate:modelValue":V[7]||(V[7]=k=>y.value.serviceDuring=k),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",Go,[o(F,{modelValue:y.value.days,"onUpdate:modelValue":V[8]||(V[8]=k=>y.value.days=k),label:"天數",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:y.value.passengerNumber,"onUpdate:modelValue":V[9]||(V[9]=k=>y.value.passengerNumber=k),label:"乘客人數",class:"w-full sm:w-1/2",name:"numTourists",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(E,{modelValue:y.value.pickupLocation,"onUpdate:modelValue":V[10]||(V[10]=k=>y.value.pickupLocation=k),label:"上車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.dropOffLocation,"onUpdate:modelValue":V[11]||(V[11]=k=>y.value.dropOffLocation=k),label:"下車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:y.value.travelPlanNote,"onUpdate:modelValue":V[12]||(V[12]=k=>y.value.travelPlanNote=k),label:"預計行程路線",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(I,{class:"w-full",orientation:"left"},{default:x(()=>[Yo]),_:1}),v("div",jo,[o(F,{modelValue:u.value.firstName,"onUpdate:modelValue":V[13]||(V[13]=k=>u.value.firstName=k),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:u.value.email,"onUpdate:modelValue":V[15]||(V[15]=k=>u.value.email=k),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(w,{name:"content_copy",color:"secondary",onClick:V[14]||(V[14]=()=>D(u.value.email))})]),_:1},8,["modelValue"])]),v("div",Jo,[o(F,{modelValue:u.value.phoneCode,"onUpdate:modelValue":V[16]||(V[16]=k=>u.value.phoneCode=k),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:u.value.phone,"onUpdate:modelValue":V[18]||(V[18]=k=>u.value.phone=k),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(w,{name:"content_copy",color:"secondary",onClick:V[17]||(V[17]=()=>D(u.value.phone))})]),_:1},8,["modelValue"])]),v("div",Qo,[o(F,{modelValue:u.value.lineId,"onUpdate:modelValue":V[20]||(V[20]=k=>u.value.lineId=k),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[u.value.lineId?{name:"appendInner",fn:x(()=>[o(w,{name:"content_copy",color:"secondary",onClick:V[19]||(V[19]=()=>D(u.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(F,{modelValue:u.value.wechatId,"onUpdate:modelValue":V[22]||(V[22]=k=>u.value.wechatId=k),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[u.value.wechatId?{name:"appendInner",fn:x(()=>[o(w,{name:"content_copy",color:"secondary",onClick:V[21]||(V[21]=()=>D(u.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),v("div",Xo,[o(F,{modelValue:u.value.telegramId,"onUpdate:modelValue":V[24]||(V[24]=k=>u.value.telegramId=k),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[u.value.telegramId?{name:"appendInner",fn:x(()=>[o(w,{name:"content_copy",color:"secondary",onClick:V[23]||(V[23]=()=>D(u.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(F,{modelValue:u.value.zaloId,"onUpdate:modelValue":V[26]||(V[26]=k=>u.value.zaloId=k),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[u.value.zaloId?{name:"appendInner",fn:x(()=>[o(w,{name:"content_copy",color:"secondary",onClick:V[25]||(V[25]=()=>D(u.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(I,{class:"w-full",orientation:"left"},{default:x(()=>[Ko]),_:1}),o(A,{modelValue:y.value.manualOperationStatus,"onUpdate:modelValue":V[27]||(V[27]=k=>y.value.manualOperationStatus=k),label:"操作狀態",class:"w-full",options:p,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(I,{class:"w-full",orientation:"left"},{default:x(()=>[ei]),_:1}),v("div",ti,[o(f,{preset:"secondary",color:"secondary",onClick:V[28]||(V[28]=k=>N.$emit("close"))},{default:x(()=>[se("取消")]),_:1}),o(f,{disabled:!P,onClick:g},{default:x(()=>[se(le(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),{formatDate:li}=Ve(),ni=()=>G({page:1,perPage:10,total:0}),si=()=>G({sortBy:"createdAt",sortingOrder:null}),ri=()=>G({isActive:!0,search:""}),oi=t=>{const e=G(!1),a=G([]),{filters:l=ri(),sorting:n=si(),pagination:s=ni()}=t||{},r=async()=>{e.value=!0;const h={...q(l),sortBy:n.value.sortBy,sortOrder:n.value.sortingOrder,offset:(s.value.page-1)*s.value.perPage,limit:s.value.perPage,...l.value.isActive&&{excludeStatus:"initial"},...!l.value.isActive&&{status:"initial"}},{data:y}=await de.getOrders(h);a.value=y.data;const u={page:s.value.page,perPage:10,total:y.total};i(()=>{s.value=u}),e.value=!1},{ignoreUpdates:i}=ea([s,n],r,{deep:!0});return ta(l,()=>{s.value.page=1,r()},{deep:!0}),r(),{isLoading:e,filters:l,sorting:n,pagination:s,orders:a,fetch:r,getServiceDate:h=>li(Number(h.orderPlanDragonMassage.time)),getStartTime:h=>$.fromMillis(Number(h.orderPlanDragonMassage.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),getStartTime2:h=>$.fromMillis(Number(h.orderPlanDragonMassage.secondTime),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),async add(h){console.log("add order",h)},async update(h){console.log("update order",h)},async remove(h){console.log("remove order",h)}}},ii={class:"self-stretch flex-col justify-start items-start gap-4 flex"},ui=v("span",{class:"px-2"},"訂單資訊",-1),di={class:"flex gap-4 flex-col sm:flex-row w-full"},ci={class:"flex gap-4 flex-col sm:flex-row w-full"},mi={class:"flex gap-4 flex-col sm:flex-row w-full"},fi={class:"flex gap-4 flex-col sm:flex-row w-full"},pi={class:"flex gap-4 flex-col sm:flex-row w-full"},hi={class:"flex gap-4 flex-col sm:flex-row w-full"},yi={key:0,class:"w-full"},vi=v("div",{class:"mb-2 text-sm font-medium text-gray-700"},"旅店圖片",-1),gi={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},wi=["onClick"],Vi=["src","alt"],xi=v("span",{class:"px-2"},"管理確認區",-1),Ii={class:"w-full"},Ti={key:0,class:"w-full mt-4"},Si={class:"flex gap-4 flex-col sm:flex-row w-full"},bi=v("div",{class:"text-sm text-gray-600 mt-1"},"* 時間將以越南時區保存",-1),ki=v("span",{class:"px-2"},"訂單狀態",-1),Oi=v("span",{class:"px-2"},"聯絡資訊",-1),Di={class:"flex gap-4 flex-col sm:flex-row w-full"},Ni={class:"flex gap-4 flex-col sm:flex-row w-full"},Ei={class:"flex gap-4 flex-col sm:flex-row w-full"},Mi={class:"flex gap-4 flex-col sm:flex-row w-full"},Ci=v("span",{class:"px-2"},"結帳資訊",-1),Ai={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},$i=Ae({__name:"OrderMassageDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Pe(),{formatDate:l,formatDateV:n}=Ve(),{categorys:s}=be(),{getStartTime:r,getStartTime2:i}=oi(),m=Nt(),p={1:"龍筋按摩"},c=[{text:"待處理",value:X.PENDING},{text:"已處理",value:X.PROCESSED}],h=t,y={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceStartTime:"",note:"",serviceDate2:"",serviceStartTime2:"",hotelAddress:"",needHotelBooking:"",manualOperationStatus:X.PENDING,hotelImageUrls:[],confirmedTherapistId:null,selectedTherapists:"",confirmedTime:""},u=ee(()=>{if(!h.order)return y;const U=l(Number(h.order.orderPlanDragonMassage.createdAt));return{id:h.order.id,manualOperationStatus:h.order.manualOperationStatus,createdAt:U,category:s[h.order.type],plan:p[h.order.orderPlanDragonMassage.planId],selectedTherapists:O(h.order.orderPlanDragonMassage.selectedTherapists||[]),serviceDate:n(Number(h.order.orderPlanDragonMassage.time)),serviceStartTime:r(h.order),serviceDate2:n(Number(h.order.orderPlanDragonMassage.secondTime)),serviceStartTime2:i(h.order),hotelAddress:h.order.orderPlanDragonMassage.hotelAddress,note:h.order.orderPlanDragonMassage.note,needHotelBooking:h.order.orderPlanDragonMassage.needHotelBooking?"是":"否",hotelImageUrls:h.order.orderPlanDragonMassage.hotelImageUrls||[],confirmedTherapistId:h.order.orderPlanDragonMassage.confirmedTherapistId||null,confirmedTime:h.order.orderPlanDragonMassage.confirmedTime||""}}),O=U=>U.map(d=>{const T=m.therapists.find(C=>C.id===d);return T?`${d}.${T.name}`:`未知導遊(${d})`}).join(", "),g=ee(()=>{var S,xe,ke,Oe,R,ae;const U=(S=h.order.userInfo.socialMedia.find(Te=>Te.type==="line"))==null?void 0:S.accountId,d=(xe=h.order.userInfo.socialMedia.find(Te=>Te.type==="wechat"))==null?void 0:xe.accountId,T=(ke=h.order.userInfo.socialMedia.find(Te=>Te.type==="telegram"))==null?void 0:ke.accountId,C=(Oe=h.order.userInfo.socialMedia.find(Te=>Te.type==="zalo"))==null?void 0:Oe.accountId;return{firstName:h.order.userInfo.firstName,email:h.order.userInfo.email,phone:(R=h.order.userInfo.phone)==null?void 0:R.phoneNumber,phoneCode:(ae=h.order.userInfo.phone)==null?void 0:ae.code,lineId:U,wechatId:d,telegramId:T,zaloId:C}}),D=e,N=async()=>{if(h.order.manualOperationStatus!==u.value.manualOperationStatus&&await de.updateManualOperationStatus({orderId:h.order.id,manualOperationStatus:u.value.manualOperationStatus}),h.order.orderPlanDragonMassage.confirmedTherapistId!==k.value||b.value!==h.order.orderPlanDragonMassage.confirmedTime){let U=b.value;if(b.value==="custom"&&w.value&&A.value){const d=$.fromJSDate(w.value).toFormat("yyyy-MM-dd"),T=$.fromJSDate(A.value).toFormat("HH:mm"),C=`${d} ${T}`;U=$.fromFormat(C,"yyyy-MM-dd HH:mm",{zone:"Asia/Ho_Chi_Minh"}).toMillis().toString()}await de.updateMassageOrder({orderId:h.order.id,planParams:{confirmedTherapistId:k.value,confirmedTime:U}})}D("save")};ot(()=>{k.value=u.value.confirmedTherapistId||null;const U=u.value.confirmedTime||"";if(U)if(U===h.order.orderPlanDragonMassage.time||U===h.order.orderPlanDragonMassage.secondTime)b.value=U;else{b.value="custom";const T=$.fromMillis(Number(U),{zone:"Asia/Ho_Chi_Minh"}),C=T.year,S=T.month-1,xe=T.day,ke=T.hour,Oe=T.minute;w.value=new Date(C,S,xe),A.value=new Date(2e3,0,1,ke,Oe)}});const V=async U=>{if(U)try{await navigator.clipboard.writeText(U),a({message:`已複製到剪貼簿: ${U}`,duration:3e3})}catch(d){alert(`Failed to copy text: ${d}`)}},I=U=>{window.open(U,"_blank")},F=U=>{const d=U.target;d&&(d.style.display="none")},E=ee(()=>{if(!h.order)return[];const U=[],{formatDateTimeV:d}=Ve();h.order.orderPlanDragonMassage.time&&U.push({text:`時間 1: ${d(Number(h.order.orderPlanDragonMassage.time))}`,value:h.order.orderPlanDragonMassage.time}),h.order.orderPlanDragonMassage.secondTime&&U.push({text:`時間 2: ${d(Number(h.order.orderPlanDragonMassage.secondTime))}`,value:h.order.orderPlanDragonMassage.secondTime});let T="自訂時間";if(b.value==="custom"&&w.value&&A.value){const C=$.fromJSDate(w.value).toFormat("yyyy-MM-dd"),S=$.fromJSDate(A.value).toFormat("HH:mm");T=`自訂時間: ${C} ${S}`}return U.push({text:T,value:"custom"}),U}),w=G(new Date),A=G(new Date),f=ee(()=>b.value==="custom"),z=()=>{},P=ee(()=>m.therapists.filter(U=>U.isActive).map(U=>({text:`${U.number}.${U.name}`,value:U.id}))),k=G(null),b=G("");return(U,d)=>{const T=_("VaDivider"),C=_("VaInput"),S=_("VaTextarea"),xe=_("VaSelect"),ke=_("VaDateInput"),Oe=_("VaTimeInput"),R=_("VaIcon"),ae=_("VaButton"),Te=_("VaForm");return Y(),ue(Te,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:fn})=>[v("div",ii,[o(T,{class:"w-full",orientation:"left"},{default:x(()=>[ui]),_:1}),v("div",di,[o(C,{modelValue:u.value.id,"onUpdate:modelValue":d[0]||(d[0]=L=>u.value.id=L),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(C,{modelValue:u.value.createdAt,"onUpdate:modelValue":d[1]||(d[1]=L=>u.value.createdAt=L),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",ci,[o(C,{modelValue:u.value.category,"onUpdate:modelValue":d[2]||(d[2]=L=>u.value.category=L),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(C,{modelValue:u.value.plan,"onUpdate:modelValue":d[3]||(d[3]=L=>u.value.plan=L),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",mi,[o(C,{modelValue:u.value.serviceDate,"onUpdate:modelValue":d[4]||(d[4]=L=>u.value.serviceDate=L),label:"預約日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(C,{modelValue:u.value.serviceStartTime,"onUpdate:modelValue":d[5]||(d[5]=L=>u.value.serviceStartTime=L),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",fi,[o(C,{modelValue:u.value.serviceDate2,"onUpdate:modelValue":d[6]||(d[6]=L=>u.value.serviceDate2=L),label:"預約日期2",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(C,{modelValue:u.value.serviceStartTime2,"onUpdate:modelValue":d[7]||(d[7]=L=>u.value.serviceStartTime2=L),label:"起始時間2",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",pi,[o(C,{modelValue:u.value.selectedTherapists,"onUpdate:modelValue":d[8]||(d[8]=L=>u.value.selectedTherapists=L),label:"技師偏好",class:"w-full",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",hi,[o(C,{modelValue:u.value.needHotelBooking,"onUpdate:modelValue":d[9]||(d[9]=L=>u.value.needHotelBooking=L),label:"代訂旅店",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(S,{modelValue:u.value.hotelAddress,"onUpdate:modelValue":d[10]||(d[10]=L=>u.value.hotelAddress=L),label:"旅店地址",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),u.value.hotelImageUrls&&u.value.hotelImageUrls.length>0?(Y(),ve("div",yi,[vi,v("div",gi,[(Y(!0),ve(St,null,Xa(u.value.hotelImageUrls,(L,ma)=>(Y(),ve("div",{key:ma,class:"relative aspect-square overflow-hidden rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:Eu=>I(L)},[v("img",{src:L,alt:`旅店圖片 ${ma+1}`,class:"w-full h-full object-cover",loading:"lazy",onError:F},null,40,Vi)],8,wi))),128))])])):Ge("",!0),o(S,{modelValue:u.value.note,"onUpdate:modelValue":d[11]||(d[11]=L=>u.value.note=L),label:"訂單備註",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(T,{class:"w-full",orientation:"left"},{default:x(()=>[xi]),_:1}),v("div",Ii,[o(xe,{modelValue:k.value,"onUpdate:modelValue":d[12]||(d[12]=L=>k.value=L),label:"龍筋老師指派",class:"w-full",options:P.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",placeholder:"未指派"},null,8,["modelValue","options"]),o(xe,{modelValue:b.value,"onUpdate:modelValue":d[13]||(d[13]=L=>b.value=L),label:"時間確認",class:"w-full mt-4",options:E.value,name:"confirmedTime","text-by":"text","track-by":"value","value-by":"value",placeholder:"請選擇確認時間",clearable:""},null,8,["modelValue","options"]),f.value?(Y(),ve("div",Ti,[v("div",Si,[o(ke,{modelValue:w.value,"onUpdate:modelValue":d[14]||(d[14]=L=>w.value=L),label:"自訂日期",class:"w-full sm:w-1/2",placeholder:"請選擇日期",clearable:"",onInput:z},null,8,["modelValue"]),o(Oe,{modelValue:A.value,"onUpdate:modelValue":d[15]||(d[15]=L=>A.value=L),label:"自訂時間",class:"w-full sm:w-1/2",placeholder:"請選擇時間",clearable:"",onInput:z},null,8,["modelValue"])]),bi])):Ge("",!0)]),o(T,{class:"w-full",orientation:"left"},{default:x(()=>[ki]),_:1}),o(xe,{modelValue:u.value.manualOperationStatus,"onUpdate:modelValue":d[16]||(d[16]=L=>u.value.manualOperationStatus=L),label:"操作狀態",class:"w-full",options:c,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(T,{class:"w-full",orientation:"left"},{default:x(()=>[Oi]),_:1}),v("div",Di,[o(C,{modelValue:g.value.firstName,"onUpdate:modelValue":d[17]||(d[17]=L=>g.value.firstName=L),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(C,{modelValue:g.value.email,"onUpdate:modelValue":d[19]||(d[19]=L=>g.value.email=L),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(R,{name:"content_copy",color:"secondary",onClick:d[18]||(d[18]=()=>V(g.value.email))})]),_:1},8,["modelValue"])]),v("div",Ni,[o(C,{modelValue:g.value.phoneCode,"onUpdate:modelValue":d[20]||(d[20]=L=>g.value.phoneCode=L),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(C,{modelValue:g.value.phone,"onUpdate:modelValue":d[22]||(d[22]=L=>g.value.phone=L),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(R,{name:"content_copy",color:"secondary",onClick:d[21]||(d[21]=()=>V(g.value.phone))})]),_:1},8,["modelValue"])]),v("div",Ei,[o(C,{modelValue:g.value.lineId,"onUpdate:modelValue":d[24]||(d[24]=L=>g.value.lineId=L),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[g.value.lineId?{name:"appendInner",fn:x(()=>[o(R,{name:"content_copy",color:"secondary",onClick:d[23]||(d[23]=()=>V(g.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(C,{modelValue:g.value.wechatId,"onUpdate:modelValue":d[26]||(d[26]=L=>g.value.wechatId=L),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[g.value.wechatId?{name:"appendInner",fn:x(()=>[o(R,{name:"content_copy",color:"secondary",onClick:d[25]||(d[25]=()=>V(g.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),v("div",Mi,[o(C,{modelValue:g.value.telegramId,"onUpdate:modelValue":d[28]||(d[28]=L=>g.value.telegramId=L),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[g.value.telegramId?{name:"appendInner",fn:x(()=>[o(R,{name:"content_copy",color:"secondary",onClick:d[27]||(d[27]=()=>V(g.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(C,{modelValue:g.value.zaloId,"onUpdate:modelValue":d[30]||(d[30]=L=>g.value.zaloId=L),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[g.value.zaloId?{name:"appendInner",fn:x(()=>[o(R,{name:"content_copy",color:"secondary",onClick:d[29]||(d[29]=()=>V(g.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(T,{class:"w-full",orientation:"left"},{default:x(()=>[Ci]),_:1}),v("div",Ai,[o(ae,{preset:"secondary",color:"secondary",onClick:d[31]||(d[31]=L=>U.$emit("close"))},{default:x(()=>[se("取消")]),_:1}),o(ae,{disabled:!fn,onClick:N},{default:x(()=>[se(le(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),{formatDate:Ui}=Ve(),_i=()=>G({page:1,perPage:10,total:0}),Pi=()=>G({sortBy:"createdAt",sortingOrder:null}),Fi=()=>G({isActive:!0,search:""}),Li=t=>{const e=G(!1),a=G([]),{filters:l=Fi(),sorting:n=Pi(),pagination:s=_i()}=t||{},r=async()=>{e.value=!0;const c={...q(l),sortBy:n.value.sortBy,sortOrder:n.value.sortingOrder,offset:(s.value.page-1)*s.value.perPage,limit:s.value.perPage,...l.value.isActive&&{excludeStatus:"initial"},...!l.value.isActive&&{status:"initial"}},{data:h}=await de.getOrders(c);a.value=h.data;const y={page:s.value.page,perPage:10,total:h.total};i(()=>{s.value=y}),e.value=!1},{ignoreUpdates:i}=ea([s,n],r,{deep:!0});return ta(l,()=>{s.value.page=1,r()},{deep:!0}),r(),{isLoading:e,filters:l,sorting:n,pagination:s,orders:a,fetch:r,getServiceDate:c=>Ui(Number(c.orderPlanTutor.startTime)),getStartTime:c=>$.fromMillis(Number(c.orderPlanTutor.startTime),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),async add(c){console.log("add order",c)},async update(c){console.log("update order",c)},async remove(c){console.log("remove order",c)},async teacherConfirm({orderId:c,teacherId:h}){de.post(`/plan/tutor/order/${c}/teacher/confirm`,{teacherId:h})}}},Ri={class:"self-stretch flex-col justify-start items-start gap-4 flex"},Wi=v("span",{class:"px-2"},"訂單資訊",-1),zi={class:"flex gap-4 flex-col sm:flex-row w-full"},Hi={class:"flex gap-4 flex-col sm:flex-row w-full"},Zi={class:"flex gap-4 flex-col sm:flex-row w-full"},Bi={class:"flex gap-4 flex-col sm:flex-row w-full"},qi=v("span",{class:"px-2"},"管理確認區",-1),Gi={class:"w-full"},Yi=v("span",{class:"px-2"},"訂單狀態",-1),ji=v("span",{class:"px-2"},"聯絡資訊",-1),Ji={class:"flex gap-4 flex-col sm:flex-row w-full"},Qi={class:"flex gap-4 flex-col sm:flex-row w-full"},Xi={class:"flex gap-4 flex-col sm:flex-row w-full"},Ki={class:"flex gap-4 flex-col sm:flex-row w-full"},eu=v("span",{class:"px-2"},"結帳資訊",-1),tu={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},au=Ae({__name:"OrderTutorDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Pe(),{formatDate:l,formatDateV:n}=Ve(),{categorys:s}=be(),{getStartTime:r,teacherConfirm:i}=Li(),m=Nt(),p={1:"越語家教"},c=[{text:"待處理",value:X.PENDING},{text:"已處理",value:X.PROCESSED}],h=t,y={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceStartTime:"",note:"",hotelAddress:"",needHotelBooking:"",manualOperationStatus:X.PENDING,hotelImageUrls:[],confirmedTeacherId:null,selectedTeachers:""},u=ee(()=>{if(!h.order)return y;const E=l(Number(h.order.orderPlanTutor.createdAt));return{id:h.order.id,manualOperationStatus:h.order.manualOperationStatus,createdAt:E,category:s[h.order.type],plan:p[h.order.orderPlanTutor.planId],selectedTeachers:O(h.order.orderPlanTutor.teachers||[]),serviceDate:n(Number(h.order.orderPlanTutor.startTime)),serviceStartTime:r(h.order),hotelAddress:h.order.orderPlanTutor.address,confirmedTeacherId:h.order.orderPlanTutor.confirmedTeacherId||null}}),O=E=>E.map(w=>`${w.number}`).join(", "),g=ee(()=>{var z,P,k,b,U,d;const E=(z=h.order.userInfo.socialMedia.find(T=>T.type==="line"))==null?void 0:z.accountId,w=(P=h.order.userInfo.socialMedia.find(T=>T.type==="wechat"))==null?void 0:P.accountId,A=(k=h.order.userInfo.socialMedia.find(T=>T.type==="telegram"))==null?void 0:k.accountId,f=(b=h.order.userInfo.socialMedia.find(T=>T.type==="zalo"))==null?void 0:b.accountId;return{firstName:h.order.userInfo.firstName,email:h.order.userInfo.email,phone:(U=h.order.userInfo.phone)==null?void 0:U.phoneNumber,phoneCode:(d=h.order.userInfo.phone)==null?void 0:d.code,lineId:E,wechatId:w,telegramId:A,zaloId:f}}),D=e,N=async()=>{if(h.order.manualOperationStatus!==u.value.manualOperationStatus&&await de.updateManualOperationStatus({orderId:h.order.id,manualOperationStatus:u.value.manualOperationStatus}),h.order.orderPlanTutor.confirmedTeacherId!==F.value){if(!F.value)return;await i({orderId:h.order.id,teacherId:F.value})}D("save")};ot(()=>{F.value=u.value.confirmedTeacherId||null});const V=async E=>{if(E)try{await navigator.clipboard.writeText(E),a({message:`已複製到剪貼簿: ${E}`,duration:3e3})}catch(w){alert(`Failed to copy text: ${w}`)}},I=ee(()=>m.teachers.filter(E=>E.isActive).map(E=>({text:`${E.number}`,value:E.id}))),F=G(null);return(E,w)=>{const A=_("VaDivider"),f=_("VaInput"),z=_("VaTextarea"),P=_("VaSelect"),k=_("VaIcon"),b=_("VaButton"),U=_("VaForm");return Y(),ue(U,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:d})=>[v("div",Ri,[o(A,{class:"w-full",orientation:"left"},{default:x(()=>[Wi]),_:1}),v("div",zi,[o(f,{modelValue:u.value.id,"onUpdate:modelValue":w[0]||(w[0]=T=>u.value.id=T),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(f,{modelValue:u.value.createdAt,"onUpdate:modelValue":w[1]||(w[1]=T=>u.value.createdAt=T),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",Hi,[o(f,{modelValue:u.value.category,"onUpdate:modelValue":w[2]||(w[2]=T=>u.value.category=T),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(f,{modelValue:u.value.plan,"onUpdate:modelValue":w[3]||(w[3]=T=>u.value.plan=T),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",Zi,[o(f,{modelValue:u.value.serviceDate,"onUpdate:modelValue":w[4]||(w[4]=T=>u.value.serviceDate=T),label:"預約日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(f,{modelValue:u.value.serviceStartTime,"onUpdate:modelValue":w[5]||(w[5]=T=>u.value.serviceStartTime=T),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",Bi,[o(f,{modelValue:u.value.selectedTeachers,"onUpdate:modelValue":w[6]||(w[6]=T=>u.value.selectedTeachers=T),label:"老師偏好",class:"w-full",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(z,{modelValue:u.value.hotelAddress,"onUpdate:modelValue":w[7]||(w[7]=T=>u.value.hotelAddress=T),label:"上課地址",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[qi]),_:1}),v("div",Gi,[o(P,{modelValue:F.value,"onUpdate:modelValue":w[8]||(w[8]=T=>F.value=T),label:"家教老師指派",class:"w-full",options:I.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",placeholder:"未指派"},null,8,["modelValue","options"])]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[Yi]),_:1}),o(P,{modelValue:u.value.manualOperationStatus,"onUpdate:modelValue":w[9]||(w[9]=T=>u.value.manualOperationStatus=T),label:"操作狀態",class:"w-full",options:c,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[ji]),_:1}),v("div",Ji,[o(f,{modelValue:g.value.firstName,"onUpdate:modelValue":w[10]||(w[10]=T=>g.value.firstName=T),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(f,{modelValue:g.value.email,"onUpdate:modelValue":w[12]||(w[12]=T=>g.value.email=T),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(k,{name:"content_copy",color:"secondary",onClick:w[11]||(w[11]=()=>V(g.value.email))})]),_:1},8,["modelValue"])]),v("div",Qi,[o(f,{modelValue:g.value.phoneCode,"onUpdate:modelValue":w[13]||(w[13]=T=>g.value.phoneCode=T),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(f,{modelValue:g.value.phone,"onUpdate:modelValue":w[15]||(w[15]=T=>g.value.phone=T),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(k,{name:"content_copy",color:"secondary",onClick:w[14]||(w[14]=()=>V(g.value.phone))})]),_:1},8,["modelValue"])]),v("div",Xi,[o(f,{modelValue:g.value.lineId,"onUpdate:modelValue":w[17]||(w[17]=T=>g.value.lineId=T),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[g.value.lineId?{name:"appendInner",fn:x(()=>[o(k,{name:"content_copy",color:"secondary",onClick:w[16]||(w[16]=()=>V(g.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(f,{modelValue:g.value.wechatId,"onUpdate:modelValue":w[19]||(w[19]=T=>g.value.wechatId=T),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[g.value.wechatId?{name:"appendInner",fn:x(()=>[o(k,{name:"content_copy",color:"secondary",onClick:w[18]||(w[18]=()=>V(g.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),v("div",Ki,[o(f,{modelValue:g.value.telegramId,"onUpdate:modelValue":w[21]||(w[21]=T=>g.value.telegramId=T),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[g.value.telegramId?{name:"appendInner",fn:x(()=>[o(k,{name:"content_copy",color:"secondary",onClick:w[20]||(w[20]=()=>V(g.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(f,{modelValue:g.value.zaloId,"onUpdate:modelValue":w[23]||(w[23]=T=>g.value.zaloId=T),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[g.value.zaloId?{name:"appendInner",fn:x(()=>[o(k,{name:"content_copy",color:"secondary",onClick:w[22]||(w[22]=()=>V(g.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[eu]),_:1}),v("div",tu,[o(b,{preset:"secondary",color:"secondary",onClick:w[24]||(w[24]=T=>E.$emit("close"))},{default:x(()=>[se("取消")]),_:1}),o(b,{disabled:!d,onClick:N},{default:x(()=>[se(le(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),lu={class:"self-stretch flex-col justify-start items-start gap-4 flex"},nu=v("span",{class:"px-2"},"訂單資訊",-1),su={class:"flex gap-4 flex-col sm:flex-row w-full"},ru={class:"flex gap-4 flex-col sm:flex-row w-full"},ou=v("span",{class:"px-2"},"管理確認區",-1),iu=v("span",{class:"px-2"},"訂單狀態",-1),uu=v("span",{class:"px-2"},"聯絡資訊",-1),du={class:"flex gap-4 flex-col sm:flex-row w-full"},cu={class:"flex gap-4 flex-col sm:flex-row w-full"},mu={class:"flex gap-4 flex-col sm:flex-row w-full"},fu={class:"flex gap-4 flex-col sm:flex-row w-full"},pu=v("span",{class:"px-2"},"結帳資訊",-1),hu={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},yu=Ae({__name:"OrderQuoteDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Pe(),{formatDate:l}=Ve(),{categorys:n}=be(),s={1:"自訂訂單"},r=[{text:"待處理",value:X.PENDING},{text:"已處理",value:X.PROCESSED}],i=t,m={id:-1,createdAt:"",category:"",plan:"",note:"",remark:"",needHotelBooking:"",manualOperationStatus:X.PENDING,hotelImageUrls:[]},p=ee(()=>{if(!i.order)return m;const O=l(Number(i.order.createdAt));return{id:i.order.id,manualOperationStatus:i.order.manualOperationStatus,createdAt:O,category:n[i.order.type],plan:s[i.order.orderPlanCustomQuote.planId],note:i.order.orderPlanCustomQuote.note,remark:i.order.orderPlanCustomQuote.remark}}),c=ee(()=>{var V,I,F,E,w,A,f,z,P,k,b,U,d,T;const O=(I=(V=i.order.userInfo)==null?void 0:V.socialMedia.find(C=>C.type==="line"))==null?void 0:I.accountId,g=(E=(F=i.order.userInfo)==null?void 0:F.socialMedia.find(C=>C.type==="wechat"))==null?void 0:E.accountId,D=(A=(w=i.order.userInfo)==null?void 0:w.socialMedia.find(C=>C.type==="telegram"))==null?void 0:A.accountId,N=(z=(f=i.order.userInfo)==null?void 0:f.socialMedia.find(C=>C.type==="zalo"))==null?void 0:z.accountId;return{firstName:(P=i.order.userInfo)==null?void 0:P.firstName,email:(k=i.order.userInfo)==null?void 0:k.email,phone:(U=(b=i.order.userInfo)==null?void 0:b.phone)==null?void 0:U.phoneNumber,phoneCode:(T=(d=i.order.userInfo)==null?void 0:d.phone)==null?void 0:T.code,lineId:O,wechatId:g,telegramId:D,zaloId:N}}),h=e,y=async()=>{i.order.manualOperationStatus!==p.value.manualOperationStatus&&await de.updateManualOperationStatus({orderId:i.order.id,manualOperationStatus:p.value.manualOperationStatus}),h("save")};ot(()=>{});const u=async O=>{if(O)try{await navigator.clipboard.writeText(O),a({message:`已複製到剪貼簿: ${O}`,duration:3e3})}catch(g){alert(`Failed to copy text: ${g}`)}};return(O,g)=>{const D=_("VaDivider"),N=_("VaInput"),V=_("VaTextarea"),I=_("VaSelect"),F=_("VaIcon"),E=_("VaButton"),w=_("VaForm");return Y(),ue(w,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:A})=>[v("div",lu,[o(D,{class:"w-full",orientation:"left"},{default:x(()=>[nu]),_:1}),v("div",su,[o(N,{modelValue:p.value.id,"onUpdate:modelValue":g[0]||(g[0]=f=>p.value.id=f),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(N,{modelValue:p.value.createdAt,"onUpdate:modelValue":g[1]||(g[1]=f=>p.value.createdAt=f),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),v("div",ru,[o(N,{modelValue:p.value.category,"onUpdate:modelValue":g[2]||(g[2]=f=>p.value.category=f),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(V,{modelValue:p.value.note,"onUpdate:modelValue":g[3]||(g[3]=f=>p.value.note=f),label:"訂單備註(用戶)",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(V,{modelValue:p.value.remark,"onUpdate:modelValue":g[4]||(g[4]=f=>p.value.remark=f),label:"訂單備註(管理)",class:"w-full",name:"remark",readonly:"",preset:"solid"},null,8,["modelValue"]),o(D,{class:"w-full",orientation:"left"},{default:x(()=>[ou]),_:1}),o(D,{class:"w-full",orientation:"left"},{default:x(()=>[iu]),_:1}),o(I,{modelValue:p.value.manualOperationStatus,"onUpdate:modelValue":g[5]||(g[5]=f=>p.value.manualOperationStatus=f),label:"操作狀態",class:"w-full",options:r,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(D,{class:"w-full",orientation:"left"},{default:x(()=>[uu]),_:1}),v("div",du,[o(N,{modelValue:c.value.firstName,"onUpdate:modelValue":g[6]||(g[6]=f=>c.value.firstName=f),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(N,{modelValue:c.value.email,"onUpdate:modelValue":g[8]||(g[8]=f=>c.value.email=f),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(F,{name:"content_copy",color:"secondary",onClick:g[7]||(g[7]=()=>u(c.value.email))})]),_:1},8,["modelValue"])]),v("div",cu,[o(N,{modelValue:c.value.phoneCode,"onUpdate:modelValue":g[9]||(g[9]=f=>c.value.phoneCode=f),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(N,{modelValue:c.value.phone,"onUpdate:modelValue":g[11]||(g[11]=f=>c.value.phone=f),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(F,{name:"content_copy",color:"secondary",onClick:g[10]||(g[10]=()=>u(c.value.phone))})]),_:1},8,["modelValue"])]),v("div",mu,[o(N,{modelValue:c.value.lineId,"onUpdate:modelValue":g[13]||(g[13]=f=>c.value.lineId=f),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[c.value.lineId?{name:"appendInner",fn:x(()=>[o(F,{name:"content_copy",color:"secondary",onClick:g[12]||(g[12]=()=>u(c.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(N,{modelValue:c.value.wechatId,"onUpdate:modelValue":g[15]||(g[15]=f=>c.value.wechatId=f),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[c.value.wechatId?{name:"appendInner",fn:x(()=>[o(F,{name:"content_copy",color:"secondary",onClick:g[14]||(g[14]=()=>u(c.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),v("div",fu,[o(N,{modelValue:c.value.telegramId,"onUpdate:modelValue":g[17]||(g[17]=f=>c.value.telegramId=f),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},j({_:2},[c.value.telegramId?{name:"appendInner",fn:x(()=>[o(F,{name:"content_copy",color:"secondary",onClick:g[16]||(g[16]=()=>u(c.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(N,{modelValue:c.value.zaloId,"onUpdate:modelValue":g[19]||(g[19]=f=>c.value.zaloId=f),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},j({_:2},[c.value.zaloId?{name:"appendInner",fn:x(()=>[o(F,{name:"content_copy",color:"secondary",onClick:g[18]||(g[18]=()=>u(c.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(D,{class:"w-full",orientation:"left"},{default:x(()=>[pu]),_:1}),v("div",hu,[o(E,{preset:"secondary",color:"secondary",onClick:g[20]||(g[20]=f=>O.$emit("close"))},{default:x(()=>[se("取消")]),_:1}),o(E,{disabled:!A,onClick:y},{default:x(()=>[se(le(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),vu=v("h1",{class:"page-title"},"訂單管理",-1),gu={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between"},wu={class:"flex flex-col md:flex-row gap-2 justify-start"},Vu={class:"va-h5"},xu={key:6},Iu=v("h1",{class:"va-h5"},"自訂訂單",-1),Tu={class:"self-stretch flex-col justify-start items-start gap-4 flex"},Su=v("span",{class:"px-2"},"訂單資訊",-1),bu={class:"flex gap-4 flex-col sm:flex-row w-full"},ku={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center mt-4"},Ou={key:0,class:"w-full mt-4"},Du=v("span",{class:"px-2"},"生成的 URL",-1),Nu={class:"flex gap-2 w-full"},_u=Ae({__name:"OrdersPage",setup(t){const e=G(!1),a=G(!1),{orders:l,isLoading:n,filters:s,sorting:r,pagination:i,...m}=be(),p=G(null),c=E=>{p.value=E,e.value=!0},h=()=>{a.value=!0},{init:y}=Pe(),u=G({amount:"",note:"",remark:""}),O=G(""),g=async()=>{try{const E={amount:Number(u.value.amount)||0,note:u.value.note,remark:u.value.remark},w=JSON.stringify(E),z=`https://dev.vnhappy7.com/order/quote?d=${En.encodeURI(w)}`;O.value=z,y({message:"URL 已生成",color:"success"})}catch{y({message:"生成 URL 失敗",color:"danger"})}},D=async()=>{try{await navigator.clipboard.writeText(O.value),y({message:"URL 已複製到剪貼簿",color:"success"})}catch{y({message:"複製失敗",color:"danger"})}},N=async()=>{m.fetch()},V=async E=>{await m.remove(E),y({message:`${E.id} has been deleted`,color:"success"})},I=G(),F=async E=>{E()};return(E,w)=>{const A=_("VaButtonToggle"),f=_("VaIcon"),z=_("VaInput"),P=_("VaButton"),k=_("VaCardContent"),b=_("VaCard"),U=_("VaDivider"),d=_("VaTextarea"),T=_("VaForm");return Y(),ve(St,null,[vu,o(b,null,{default:x(()=>[o(k,null,{default:x(()=>[v("div",gu,[v("div",wu,[o(A,{modelValue:q(s).isActive,"onUpdate:modelValue":w[0]||(w[0]=C=>q(s).isActive=C),color:"background-element","border-color":"background-element",options:[{label:"訂單",value:!0},{label:"草稿",value:!1}]},null,8,["modelValue"]),o(z,{modelValue:q(s).search,"onUpdate:modelValue":w[1]||(w[1]=C=>q(s).search=C),placeholder:"Search"},{prependInner:x(()=>[o(f,{name:"search",color:"secondary",size:"small"})]),_:1},8,["modelValue"])]),o(P,{onClick:h},{default:x(()=>[se("新增自訂訂單")]),_:1})]),o(to,{"sort-by":q(r).sortBy,"onUpdate:sortBy":w[2]||(w[2]=C=>q(r).sortBy=C),"sorting-order":q(r).sortingOrder,"onUpdate:sortingOrder":w[3]||(w[3]=C=>q(r).sortingOrder=C),orders:q(l),loading:q(n),pagination:q(i),onEditOrder:c,onDeleteUser:V},null,8,["sort-by","sorting-order","orders","loading","pagination"])]),_:1})]),_:1}),o(q(ha),{modelValue:e.value,"onUpdate:modelValue":w[4]||(w[4]=C=>e.value=C),size:"small","mobile-fullscreen":"","close-button":"","hide-default-actions":"","before-cancel":F},{default:x(({cancel:C,ok:S})=>[v("h1",Vu,"訂單編號 "+le(p.value.id),1),p.value.type===q(te).ESCORT?(Y(),ue(wo,{key:0,ref_key:"editFormRef",ref:I,order:p.value,"save-button-label":"儲存",onClose:C,onSave:()=>{N(),S()}},null,8,["order","onClose","onSave"])):Ge("",!0),p.value.type===q(te).MASSAGE?(Y(),ue($i,{key:1,ref_key:"editFormRef",ref:I,order:p.value,"save-button-label":"儲存",onClose:C,onSave:()=>{N(),S()}},null,8,["order","onClose","onSave"])):p.value.type===q(te).SHUTTLE?(Y(),ue(Lo,{key:2,ref_key:"editFormRef",ref:I,order:p.value,"save-button-label":"儲存",onClose:C,onSave:()=>{N(),S()}},null,8,["order","onClose","onSave"])):p.value.type===q(te).CHARTER?(Y(),ue(ai,{key:3,ref_key:"editFormRef",ref:I,order:p.value,"save-button-label":"儲存",onClose:C,onSave:()=>{N(),S()}},null,8,["order","onClose","onSave"])):p.value.type===q(te).TUTOR?(Y(),ue(au,{key:4,ref_key:"editFormRef",ref:I,order:p.value,"save-button-label":"儲存",onClose:C,onSave:()=>{N(),S()}},null,8,["order","onClose","onSave"])):p.value.type===q(te).QUOTE?(Y(),ue(yu,{key:5,ref_key:"editFormRef",ref:I,order:p.value,"save-button-label":"儲存",onClose:C,onSave:()=>{N(),S()}},null,8,["order","onClose","onSave"])):(Y(),ve("div",xu,"未知的訂單類型"))]),_:1},8,["modelValue"]),o(q(ha),{modelValue:a.value,"onUpdate:modelValue":w[10]||(w[10]=C=>a.value=C),size:"small","mobile-fullscreen":"","close-button":"","hide-default-actions":""},{default:x(()=>[Iu,o(T,{ref:"quote-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:C})=>[v("div",Tu,[o(U,{class:"w-full",orientation:"left"},{default:x(()=>[Su]),_:1}),v("div",bu,[o(z,{modelValue:u.value.amount,"onUpdate:modelValue":w[5]||(w[5]=S=>u.value.amount=S),label:"付款金額",class:"w-full",name:"amount",type:"number",placeholder:"請輸入金額"},null,8,["modelValue"])]),o(d,{modelValue:u.value.note,"onUpdate:modelValue":w[6]||(w[6]=S=>u.value.note=S),label:"訂單備註(用戶端)",class:"w-full",name:"note",placeholder:"請輸入用戶端訂單備註"},null,8,["modelValue"]),o(d,{modelValue:u.value.remark,"onUpdate:modelValue":w[7]||(w[7]=S=>u.value.remark=S),label:"筆記(管理員)",class:"w-full",name:"remark",placeholder:"請輸入管理員筆記"},null,8,["modelValue"]),v("div",ku,[o(P,{preset:"secondary",color:"secondary",onClick:w[8]||(w[8]=S=>a.value=!1)},{default:x(()=>[se("取消")]),_:1}),o(P,{disabled:!C,onClick:g},{default:x(()=>[se("產生 URL")]),_:2},1032,["disabled"])]),O.value?(Y(),ve("div",Ou,[o(U,{class:"w-full",orientation:"left"},{default:x(()=>[Du]),_:1}),v("div",Nu,[o(z,{modelValue:O.value,"onUpdate:modelValue":w[9]||(w[9]=S=>O.value=S),label:"完整 URL",class:"w-full",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{class:"flex-shrink-0 self-end",color:"primary",icon:"content_copy",onClick:D},{default:x(()=>[se(" 複製 ")]),_:1})])])):Ge("",!0)])]),_:1},512)]),_:1},8,["modelValue"])],64)}}});export{_u as default};
//# sourceMappingURL=OrdersPage-2ce89713.js.map
