import{d as C,a7 as B,a8 as F,X as S,a5 as A,f as t,a as N,g as R,w as n,b as r,i as l,h as s,u as i,R as g,Y as b}from"./index-9c786ac1.js";import{u as T}from"./useForm-a4aa60d7.js";import{u as U}from"./useToast-23fe4bf7.js";import{v as m}from"./utils-b2fc192b.js";const j=r("h1",{class:"font-semibold text-4xl mb-4"},"Log in",-1),q={class:"text-base mb-4 leading-5"},Y={class:"auth-layout__options flex flex-col sm:flex-row items-start sm:items-center justify-between"},D={class:"flex justify-center mt-4"},z=C({__name:"Login",setup(E){const{firebaseLogin:V}=B(),{validate:v}=T("form"),{push:x}=F(),{init:u}=U(),w=S(),e=A({email:"",password:"",keepLoggedIn:!1}),c=async()=>{if(v()){const{accessToken:d}=await V(e.email,e.password);b.setAuthToken(d);try{await b.login(),await w.doAfterLogin()}catch(o){console.error("Login failed:",o),u({message:"Login failed. Please try again.",color:"danger"});return}u({message:"You've successfully logged in",color:"success"}),x({name:"dashboard"})}};return(d,o)=>{const p=t("RouterLink"),f=t("VaInput"),y=t("VaIcon"),k=t("VaValue"),L=t("VaCheckbox"),h=t("VaButton"),I=t("VaForm");return N(),R(I,{ref:"form",onSubmit:g(c,["prevent"])},{default:n(()=>[j,r("p",q,[l(" New to Vuestic? "),s(p,{to:{name:"signup"},class:"font-semibold text-primary"},{default:n(()=>[l("Sign up")]),_:1})]),s(f,{modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=a=>e.email=a),rules:[i(m).required,i(m).email],class:"mb-4",label:"Email",type:"email"},null,8,["modelValue","rules"]),s(k,{"default-value":!1},{default:n(a=>[s(f,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=_=>e.password=_),rules:[i(m).required],type:a.value?"text":"password",class:"mb-4",label:"Password",onClickAppendInner:g(_=>a.value=!a.value,["stop"])},{appendInner:n(()=>[s(y,{name:a.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","rules","type","onClickAppendInner"])]),_:1}),r("div",Y,[s(L,{modelValue:e.keepLoggedIn,"onUpdate:modelValue":o[2]||(o[2]=a=>e.keepLoggedIn=a),class:"mb-2 sm:mb-0",label:"Keep me signed in on this device"},null,8,["modelValue"]),s(p,{to:{name:"recover-password"},class:"mt-2 sm:mt-0 sm:ml-1 font-semibold text-primary"},{default:n(()=>[l(" Forgot password? ")]),_:1})]),r("div",D,[s(h,{class:"w-full",onClick:c},{default:n(()=>[l(" Login")]),_:1})])]),_:1},8,["onSubmit"])}}});export{z as default};
//# sourceMappingURL=Login-cbcecdad.js.map
