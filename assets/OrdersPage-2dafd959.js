import{w as ea,d as ps}from"./index-59211e87.js";import{u as hs}from"./useModal-0291ffcd.js";import{u as fa}from"./index-e5f1ba3a.js";import{X as Dt,r as q,C as ta,u as G,Y as fe,d as Fe,Z as ys,e as K,f as L,a as J,c as xe,h as o,w as T,b as g,t as ae,F as St,x as Xa,$ as pa,i as le,H as Pe,g as ye,p as gs,m as vs,_ as ws,a0 as Ut,o as Nt,a1 as X,a2 as ha}from"./index-c5932720.js";import{u as Ye}from"./useToast-89765850.js";const Ka="3.7.8",Vs=Ka,je=typeof Buffer=="function",ya=typeof TextDecoder=="function"?new TextDecoder:void 0,ga=typeof TextEncoder=="function"?new TextEncoder:void 0,xs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",at=Array.prototype.slice.call(xs),ct=(t=>{let e={};return t.forEach((a,n)=>e[a]=n),e})(at),Ts=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,te=String.fromCharCode.bind(String),va=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),en=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),tn=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),an=t=>{let e,a,n,s,r="";const l=t.length%3;for(let i=0;i<t.length;){if((a=t.charCodeAt(i++))>255||(n=t.charCodeAt(i++))>255||(s=t.charCodeAt(i++))>255)throw new TypeError("invalid character found");e=a<<16|n<<8|s,r+=at[e>>18&63]+at[e>>12&63]+at[e>>6&63]+at[e&63]}return l?r.slice(0,l-3)+"===".substring(l):r},aa=typeof btoa=="function"?t=>btoa(t):je?t=>Buffer.from(t,"binary").toString("base64"):an,qt=je?t=>Buffer.from(t).toString("base64"):t=>{let a=[];for(let n=0,s=t.length;n<s;n+=4096)a.push(te.apply(null,t.subarray(n,n+4096)));return aa(a.join(""))},vt=(t,e=!1)=>e?en(qt(t)):qt(t),Ss=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?te(192|e>>>6)+te(128|e&63):te(224|e>>>12&15)+te(128|e>>>6&63)+te(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return te(240|e>>>18&7)+te(128|e>>>12&63)+te(128|e>>>6&63)+te(128|e&63)}},Is=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,nn=t=>t.replace(Is,Ss),wa=je?t=>Buffer.from(t,"utf8").toString("base64"):ga?t=>qt(ga.encode(t)):t=>aa(nn(t)),Ze=(t,e=!1)=>e?en(wa(t)):wa(t),Va=t=>Ze(t,!0),bs=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,ks=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),a=e-65536;return te((a>>>10)+55296)+te((a&1023)+56320);case 3:return te((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return te((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},sn=t=>t.replace(bs,ks),rn=t=>{if(t=t.replace(/\s+/g,""),!Ts.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,a,n,s=[];for(let r=0;r<t.length;)e=ct[t.charAt(r++)]<<18|ct[t.charAt(r++)]<<12|(a=ct[t.charAt(r++)])<<6|(n=ct[t.charAt(r++)]),a===64?s.push(te(e>>16&255)):n===64?s.push(te(e>>16&255,e>>8&255)):s.push(te(e>>16&255,e>>8&255,e&255));return s.join("")},na=typeof atob=="function"?t=>atob(tn(t)):je?t=>Buffer.from(t,"base64").toString("binary"):rn,ln=je?t=>va(Buffer.from(t,"base64")):t=>va(na(t).split("").map(e=>e.charCodeAt(0))),on=t=>ln(un(t)),Os=je?t=>Buffer.from(t,"base64").toString("utf8"):ya?t=>ya.decode(ln(t)):t=>sn(na(t)),un=t=>tn(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),Gt=t=>Os(un(t)),Ds=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},dn=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),cn=function(){const t=(e,a)=>Object.defineProperty(String.prototype,e,dn(a));t("fromBase64",function(){return Gt(this)}),t("toBase64",function(e){return Ze(this,e)}),t("toBase64URI",function(){return Ze(this,!0)}),t("toBase64URL",function(){return Ze(this,!0)}),t("toUint8Array",function(){return on(this)})},mn=function(){const t=(e,a)=>Object.defineProperty(Uint8Array.prototype,e,dn(a));t("toBase64",function(e){return vt(this,e)}),t("toBase64URI",function(){return vt(this,!0)}),t("toBase64URL",function(){return vt(this,!0)})},Ns=()=>{cn(),mn()},Es={version:Ka,VERSION:Vs,atob:na,atobPolyfill:rn,btoa:aa,btoaPolyfill:an,fromBase64:Gt,toBase64:Ze,encode:Ze,encodeURI:Va,encodeURL:Va,utob:nn,btou:sn,decode:Gt,isValid:Ds,fromUint8Array:vt,toUint8Array:on,extendString:cn,extendUint8Array:mn,extendBuiltins:Ns},Pt={NORMAL:"normal",AO_DAI:"ao_dai"},re={ESCORT:"plan_escort",SHUTTLE:"plan_shuttle",CHARTER:"plan_charter",MASSAGE:"plan_dragon_massage",TUTOR:"plan_tutor"},Ve={INITIAL:"initial",COMPLETED:"completed",FAILED:"failed",EXPIRED:"expired",REFUND:"refund"},Ft={VOIN_PAYMENT:"vcoin_payment",ECPAY_PAYMENT:"payment"},ee={PENDING:"pending",PROCESSED:"processed"},et={PlanEscort:"plan_escort",PlanShuttle:"plan_shuttle",PlanCharter:"plan_charter",PlanMassage:"plan_dragon_massage",PlanTutor:"plan_tutor"};class _e extends Error{}class Ms extends _e{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Cs extends _e{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class As extends _e{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ze extends _e{}class fn extends _e{constructor(e){super(`Invalid unit ${e}`)}}class ne extends _e{}class Oe extends _e{constructor(){super("Zone is an abstract class")}}const D="numeric",ve="short",ue="long",It={year:D,month:D,day:D},pn={year:D,month:ve,day:D},$s={year:D,month:ve,day:D,weekday:ve},hn={year:D,month:ue,day:D},yn={year:D,month:ue,day:D,weekday:ue},gn={hour:D,minute:D},vn={hour:D,minute:D,second:D},wn={hour:D,minute:D,second:D,timeZoneName:ve},Vn={hour:D,minute:D,second:D,timeZoneName:ue},xn={hour:D,minute:D,hourCycle:"h23"},Tn={hour:D,minute:D,second:D,hourCycle:"h23"},Sn={hour:D,minute:D,second:D,hourCycle:"h23",timeZoneName:ve},In={hour:D,minute:D,second:D,hourCycle:"h23",timeZoneName:ue},bn={year:D,month:D,day:D,hour:D,minute:D},kn={year:D,month:D,day:D,hour:D,minute:D,second:D},On={year:D,month:ve,day:D,hour:D,minute:D},Dn={year:D,month:ve,day:D,hour:D,minute:D,second:D},Us={year:D,month:ve,day:D,weekday:ve,hour:D,minute:D},Nn={year:D,month:ue,day:D,hour:D,minute:D,timeZoneName:ve},En={year:D,month:ue,day:D,hour:D,minute:D,second:D,timeZoneName:ve},Mn={year:D,month:ue,day:D,weekday:ue,hour:D,minute:D,timeZoneName:ue},Cn={year:D,month:ue,day:D,weekday:ue,hour:D,minute:D,second:D,timeZoneName:ue};class ot{get type(){throw new Oe}get name(){throw new Oe}get ianaName(){return this.name}get isUniversal(){throw new Oe}offsetName(e,a){throw new Oe}formatOffset(e,a){throw new Oe}offset(e){throw new Oe}equals(e){throw new Oe}get isValid(){throw new Oe}}let _t=null;class Et extends ot{static get instance(){return _t===null&&(_t=new Et),_t}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:a,locale:n}){return Wn(e,a,n)}formatOffset(e,a){return rt(this.offset(e),a)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let wt={};function Ps(t){return wt[t]||(wt[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),wt[t]}const Fs={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function _s(t,e){const a=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(a),[,s,r,l,i,c,h,m]=n;return[l,s,r,i,c,h,m]}function Ls(t,e){const a=t.formatToParts(e),n=[];for(let s=0;s<a.length;s++){const{type:r,value:l}=a[s],i=Fs[r];r==="era"?n[i]=l:R(i)||(n[i]=parseInt(l,10))}return n}let mt={};class Ie extends ot{static create(e){return mt[e]||(mt[e]=new Ie(e)),mt[e]}static resetCache(){mt={},wt={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ie.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:a,locale:n}){return Wn(e,a,n,this.name)}formatOffset(e,a){return rt(this.offset(e),a)}offset(e){const a=new Date(e);if(isNaN(a))return NaN;const n=Ps(this.name);let[s,r,l,i,c,h,m]=n.formatToParts?Ls(n,a):_s(n,a);i==="BC"&&(s=-Math.abs(s)+1);const p=Ct({year:s,month:r,day:l,hour:c===24?0:c,minute:h,second:m,millisecond:0});let u=+a;const O=u%1e3;return u-=O>=0?O:1e3+O,(p-u)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let xa={};function Rs(t,e={}){const a=JSON.stringify([t,e]);let n=xa[a];return n||(n=new Intl.ListFormat(t,e),xa[a]=n),n}let Yt={};function jt(t,e={}){const a=JSON.stringify([t,e]);let n=Yt[a];return n||(n=new Intl.DateTimeFormat(t,e),Yt[a]=n),n}let Jt={};function Ws(t,e={}){const a=JSON.stringify([t,e]);let n=Jt[a];return n||(n=new Intl.NumberFormat(t,e),Jt[a]=n),n}let Qt={};function Hs(t,e={}){const{base:a,...n}=e,s=JSON.stringify([t,n]);let r=Qt[s];return r||(r=new Intl.RelativeTimeFormat(t,e),Qt[s]=r),r}let nt=null;function zs(){return nt||(nt=new Intl.DateTimeFormat().resolvedOptions().locale,nt)}let Ta={};function Zs(t){let e=Ta[t];if(!e){const a=new Intl.Locale(t);e="getWeekInfo"in a?a.getWeekInfo():a.weekInfo,Ta[t]=e}return e}function Bs(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const a=t.indexOf("-u-");if(a===-1)return[t];{let n,s;try{n=jt(t).resolvedOptions(),s=t}catch{const c=t.substring(0,a);n=jt(c).resolvedOptions(),s=c}const{numberingSystem:r,calendar:l}=n;return[s,r,l]}}function qs(t,e,a){return(a||e)&&(t.includes("-u-")||(t+="-u"),a&&(t+=`-ca-${a}`),e&&(t+=`-nu-${e}`)),t}function Gs(t){const e=[];for(let a=1;a<=12;a++){const n=C.utc(2009,a,1);e.push(t(n))}return e}function Ys(t){const e=[];for(let a=1;a<=7;a++){const n=C.utc(2016,11,13+a);e.push(t(n))}return e}function ft(t,e,a,n){const s=t.listingMode();return s==="error"?null:s==="en"?a(e):n(e)}function js(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class Js{constructor(e,a,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:r,...l}=n;if(!a||Object.keys(l).length>0){const i={useGrouping:!1,...n};n.padTo>0&&(i.minimumIntegerDigits=n.padTo),this.inf=Ws(e,i)}}format(e){if(this.inf){const a=this.floor?Math.floor(e):e;return this.inf.format(a)}else{const a=this.floor?Math.floor(e):ia(e,3);return Q(a,this.padTo)}}}class Qs{constructor(e,a,n){this.opts=n,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const l=-1*(e.offset/60),i=l>=0?`Etc/GMT+${l}`:`Etc/GMT${l}`;e.offset!==0&&Ie.create(i).valid?(s=i,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const r={...this.opts};r.timeZone=r.timeZone||s,this.dtf=jt(a,r)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(a=>{if(a.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...a,value:n}}else return a}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Xs{constructor(e,a,n){this.opts={style:"long",...n},!a&&Ln()&&(this.rtf=Hs(e,n))}format(e,a){return this.rtf?this.rtf.format(e,a):xr(a,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,a){return this.rtf?this.rtf.formatToParts(e,a):[]}}const Ks={firstDay:1,minimalDays:4,weekend:[6,7]};class B{static fromOpts(e){return B.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,a,n,s,r=!1){const l=e||j.defaultLocale,i=l||(r?"en-US":zs()),c=a||j.defaultNumberingSystem,h=n||j.defaultOutputCalendar,m=Xt(s)||j.defaultWeekSettings;return new B(i,c,h,m,l)}static resetCache(){nt=null,Yt={},Jt={},Qt={}}static fromObject({locale:e,numberingSystem:a,outputCalendar:n,weekSettings:s}={}){return B.create(e,a,n,s)}constructor(e,a,n,s,r){const[l,i,c]=Bs(e);this.locale=l,this.numberingSystem=a||i||null,this.outputCalendar=n||c||null,this.weekSettings=s,this.intl=qs(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=js(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),a=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&a?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:B.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Xt(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,a=!1){return ft(this,e,Zn,()=>{const n=a?{month:e,day:"numeric"}:{month:e},s=a?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=Gs(r=>this.extract(r,n,"month"))),this.monthsCache[s][e]})}weekdays(e,a=!1){return ft(this,e,Gn,()=>{const n=a?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=a?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Ys(r=>this.extract(r,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return ft(this,void 0,()=>Yn,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[C.utc(2016,11,13,9),C.utc(2016,11,13,19)].map(a=>this.extract(a,e,"dayperiod"))}return this.meridiemCache})}eras(e){return ft(this,e,jn,()=>{const a={era:e};return this.eraCache[e]||(this.eraCache[e]=[C.utc(-40,1,1),C.utc(2017,1,1)].map(n=>this.extract(n,a,"era"))),this.eraCache[e]})}extract(e,a,n){const s=this.dtFormatter(e,a),r=s.formatToParts(),l=r.find(i=>i.type.toLowerCase()===n);return l?l.value:null}numberFormatter(e={}){return new Js(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,a={}){return new Qs(e,this.intl,a)}relFormatter(e={}){return new Xs(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Rs(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Rn()?Zs(this.locale):Ks}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Lt=null;class oe extends ot{static get utcInstance(){return Lt===null&&(Lt=new oe(0)),Lt}static instance(e){return e===0?oe.utcInstance:new oe(e)}static parseSpecifier(e){if(e){const a=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(a)return new oe(At(a[1],a[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${rt(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${rt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,a){return rt(this.fixed,a)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class er extends ot{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ee(t,e){if(R(t)||t===null)return e;if(t instanceof ot)return t;if(lr(t)){const a=t.toLowerCase();return a==="default"?e:a==="local"||a==="system"?Et.instance:a==="utc"||a==="gmt"?oe.utcInstance:oe.parseSpecifier(a)||Ie.create(t)}else return Me(t)?oe.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new er(t)}const sa={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Sa={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},tr=sa.hanidec.replace(/[\[|\]]/g,"").split("");function ar(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let a=0;a<t.length;a++){const n=t.charCodeAt(a);if(t[a].search(sa.hanidec)!==-1)e+=tr.indexOf(t[a]);else for(const s in Sa){const[r,l]=Sa[s];n>=r&&n<=l&&(e+=n-r)}}return parseInt(e,10)}else return e}let He={};function nr(){He={}}function pe({numberingSystem:t},e=""){const a=t||"latn";return He[a]||(He[a]={}),He[a][e]||(He[a][e]=new RegExp(`${sa[a]}${e}`)),He[a][e]}let Ia=()=>Date.now(),ba="system",ka=null,Oa=null,Da=null,Na=60,Ea,Ma=null;class j{static get now(){return Ia}static set now(e){Ia=e}static set defaultZone(e){ba=e}static get defaultZone(){return Ee(ba,Et.instance)}static get defaultLocale(){return ka}static set defaultLocale(e){ka=e}static get defaultNumberingSystem(){return Oa}static set defaultNumberingSystem(e){Oa=e}static get defaultOutputCalendar(){return Da}static set defaultOutputCalendar(e){Da=e}static get defaultWeekSettings(){return Ma}static set defaultWeekSettings(e){Ma=Xt(e)}static get twoDigitCutoffYear(){return Na}static set twoDigitCutoffYear(e){Na=e%100}static get throwOnInvalid(){return Ea}static set throwOnInvalid(e){Ea=e}static resetCaches(){B.resetCache(),Ie.resetCache(),C.resetCache(),nr()}}class ge{constructor(e,a){this.reason=e,this.explanation=a}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const An=[0,31,59,90,120,151,181,212,243,273,304,334],$n=[0,31,60,91,121,152,182,213,244,274,305,335];function ce(t,e){return new ge("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function ra(t,e,a){const n=new Date(Date.UTC(t,e-1,a));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const s=n.getUTCDay();return s===0?7:s}function Un(t,e,a){return a+(it(t)?$n:An)[e-1]}function Pn(t,e){const a=it(t)?$n:An,n=a.findIndex(r=>r<e),s=e-a[n];return{month:n+1,day:s}}function la(t,e){return(t-e+7)%7+1}function bt(t,e=4,a=1){const{year:n,month:s,day:r}=t,l=Un(n,s,r),i=la(ra(n,s,r),a);let c=Math.floor((l-i+14-e)/7),h;return c<1?(h=n-1,c=lt(h,e,a)):c>lt(n,e,a)?(h=n+1,c=1):h=n,{weekYear:h,weekNumber:c,weekday:i,...$t(t)}}function Ca(t,e=4,a=1){const{weekYear:n,weekNumber:s,weekday:r}=t,l=la(ra(n,1,e),a),i=Be(n);let c=s*7+r-l-7+e,h;c<1?(h=n-1,c+=Be(h)):c>i?(h=n+1,c-=Be(n)):h=n;const{month:m,day:f}=Pn(h,c);return{year:h,month:m,day:f,...$t(t)}}function Rt(t){const{year:e,month:a,day:n}=t,s=Un(e,a,n);return{year:e,ordinal:s,...$t(t)}}function Aa(t){const{year:e,ordinal:a}=t,{month:n,day:s}=Pn(e,a);return{year:e,month:n,day:s,...$t(t)}}function $a(t,e){if(!R(t.localWeekday)||!R(t.localWeekNumber)||!R(t.localWeekYear)){if(!R(t.weekday)||!R(t.weekNumber)||!R(t.weekYear))throw new ze("Cannot mix locale-based week fields with ISO-based week fields");return R(t.localWeekday)||(t.weekday=t.localWeekday),R(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),R(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function sr(t,e=4,a=1){const n=Mt(t.weekYear),s=me(t.weekNumber,1,lt(t.weekYear,e,a)),r=me(t.weekday,1,7);return n?s?r?!1:ce("weekday",t.weekday):ce("week",t.weekNumber):ce("weekYear",t.weekYear)}function rr(t){const e=Mt(t.year),a=me(t.ordinal,1,Be(t.year));return e?a?!1:ce("ordinal",t.ordinal):ce("year",t.year)}function Fn(t){const e=Mt(t.year),a=me(t.month,1,12),n=me(t.day,1,kt(t.year,t.month));return e?a?n?!1:ce("day",t.day):ce("month",t.month):ce("year",t.year)}function _n(t){const{hour:e,minute:a,second:n,millisecond:s}=t,r=me(e,0,23)||e===24&&a===0&&n===0&&s===0,l=me(a,0,59),i=me(n,0,59),c=me(s,0,999);return r?l?i?c?!1:ce("millisecond",s):ce("second",n):ce("minute",a):ce("hour",e)}function R(t){return typeof t>"u"}function Me(t){return typeof t=="number"}function Mt(t){return typeof t=="number"&&t%1===0}function lr(t){return typeof t=="string"}function or(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ln(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Rn(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function ir(t){return Array.isArray(t)?t:[t]}function Ua(t,e,a){if(t.length!==0)return t.reduce((n,s)=>{const r=[e(s),s];return n&&a(n[0],r[0])===n[0]?n:r},null)[1]}function ur(t,e){return e.reduce((a,n)=>(a[n]=t[n],a),{})}function Ge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xt(t){if(t==null)return null;if(typeof t!="object")throw new ne("Week settings must be an object");if(!me(t.firstDay,1,7)||!me(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!me(e,1,7)))throw new ne("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function me(t,e,a){return Mt(t)&&t>=e&&t<=a}function dr(t,e){return t-e*Math.floor(t/e)}function Q(t,e=2){const a=t<0;let n;return a?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Ne(t){if(!(R(t)||t===null||t===""))return parseInt(t,10)}function Ae(t){if(!(R(t)||t===null||t===""))return parseFloat(t)}function oa(t){if(!(R(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function ia(t,e,a=!1){const n=10**e;return(a?Math.trunc:Math.round)(t*n)/n}function it(t){return t%4===0&&(t%100!==0||t%400===0)}function Be(t){return it(t)?366:365}function kt(t,e){const a=dr(e-1,12)+1,n=t+(e-a)/12;return a===2?it(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][a-1]}function Ct(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Pa(t,e,a){return-la(ra(t,1,e),a)+e-1}function lt(t,e=4,a=1){const n=Pa(t,e,a),s=Pa(t+1,e,a);return(Be(t)-n+s)/7}function Kt(t){return t>99?t:t>j.twoDigitCutoffYear?1900+t:2e3+t}function Wn(t,e,a,n=null){const s=new Date(t),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(r.timeZone=n);const l={timeZoneName:e,...r},i=new Intl.DateTimeFormat(a,l).formatToParts(s).find(c=>c.type.toLowerCase()==="timezonename");return i?i.value:null}function At(t,e){let a=parseInt(t,10);Number.isNaN(a)&&(a=0);const n=parseInt(e,10)||0,s=a<0||Object.is(a,-0)?-n:n;return a*60+s}function Hn(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ne(`Invalid unit value ${t}`);return e}function Ot(t,e){const a={};for(const n in t)if(Ge(t,n)){const s=t[n];if(s==null)continue;a[e(n)]=Hn(s)}return a}function rt(t,e){const a=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${Q(a,2)}:${Q(n,2)}`;case"narrow":return`${s}${a}${n>0?`:${n}`:""}`;case"techie":return`${s}${Q(a,2)}${Q(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function $t(t){return ur(t,["hour","minute","second","millisecond"])}const cr=["January","February","March","April","May","June","July","August","September","October","November","December"],zn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mr=["J","F","M","A","M","J","J","A","S","O","N","D"];function Zn(t){switch(t){case"narrow":return[...mr];case"short":return[...zn];case"long":return[...cr];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Bn=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],qn=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],fr=["M","T","W","T","F","S","S"];function Gn(t){switch(t){case"narrow":return[...fr];case"short":return[...qn];case"long":return[...Bn];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Yn=["AM","PM"],pr=["Before Christ","Anno Domini"],hr=["BC","AD"],yr=["B","A"];function jn(t){switch(t){case"narrow":return[...yr];case"short":return[...hr];case"long":return[...pr];default:return null}}function gr(t){return Yn[t.hour<12?0:1]}function vr(t,e){return Gn(e)[t.weekday-1]}function wr(t,e){return Zn(e)[t.month-1]}function Vr(t,e){return jn(e)[t.year<0?0:1]}function xr(t,e,a="always",n=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(t)===-1;if(a==="auto"&&r){const f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${s[t][0]}`;case-1:return f?"yesterday":`last ${s[t][0]}`;case 0:return f?"today":`this ${s[t][0]}`}}const l=Object.is(e,-0)||e<0,i=Math.abs(e),c=i===1,h=s[t],m=n?c?h[1]:h[2]||h[1]:c?s[t][0]:t;return l?`${i} ${m} ago`:`in ${i} ${m}`}function Fa(t,e){let a="";for(const n of t)n.literal?a+=n.val:a+=e(n.val);return a}const Tr={D:It,DD:pn,DDD:hn,DDDD:yn,t:gn,tt:vn,ttt:wn,tttt:Vn,T:xn,TT:Tn,TTT:Sn,TTTT:In,f:bn,ff:On,fff:Nn,ffff:Mn,F:kn,FF:Dn,FFF:En,FFFF:Cn};class se{static create(e,a={}){return new se(e,a)}static parseFormat(e){let a=null,n="",s=!1;const r=[];for(let l=0;l<e.length;l++){const i=e.charAt(l);i==="'"?(n.length>0&&r.push({literal:s||/^\s+$/.test(n),val:n}),a=null,n="",s=!s):s||i===a?n+=i:(n.length>0&&r.push({literal:/^\s+$/.test(n),val:n}),n=i,a=i)}return n.length>0&&r.push({literal:s||/^\s+$/.test(n),val:n}),r}static macroTokenToFormatOpts(e){return Tr[e]}constructor(e,a){this.opts=a,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,a){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...a}).format()}dtFormatter(e,a={}){return this.loc.dtFormatter(e,{...this.opts,...a})}formatDateTime(e,a){return this.dtFormatter(e,a).format()}formatDateTimeParts(e,a){return this.dtFormatter(e,a).formatToParts()}formatInterval(e,a){return this.dtFormatter(e.start,a).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,a){return this.dtFormatter(e,a).resolvedOptions()}num(e,a=0){if(this.opts.forceSimple)return Q(e,a);const n={...this.opts};return a>0&&(n.padTo=a),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,a){const n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(u,O)=>this.loc.extract(e,u,O),l=u=>e.isOffsetFixed&&e.offset===0&&u.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,u.format):"",i=()=>n?gr(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(u,O)=>n?wr(e,u):r(O?{month:u}:{month:u,day:"numeric"},"month"),h=(u,O)=>n?vr(e,u):r(O?{weekday:u}:{weekday:u,month:"long",day:"numeric"},"weekday"),m=u=>{const O=se.macroTokenToFormatOpts(u);return O?this.formatWithSystemDefault(e,O):u},f=u=>n?Vr(e,u):r({era:u},"era"),p=u=>{switch(u){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return l({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return l({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return l({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return i();case"d":return s?r({day:"numeric"},"day"):this.num(e.day);case"dd":return s?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return s?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return s?r({month:"numeric"},"month"):this.num(e.month);case"MM":return s?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return s?r({year:"numeric"},"year"):this.num(e.year);case"yy":return s?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(u)}};return Fa(se.parseFormat(a),p)}formatDurationFromString(e,a){const n=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=c=>h=>{const m=n(h);return m?this.num(c.get(m),h.length):h},r=se.parseFormat(a),l=r.reduce((c,{literal:h,val:m})=>h?c:c.concat(m),[]),i=e.shiftTo(...l.map(n).filter(c=>c));return Fa(r,s(i))}}const Jn=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Je(...t){const e=t.reduce((a,n)=>a+n.source,"");return RegExp(`^${e}$`)}function Qe(...t){return e=>t.reduce(([a,n,s],r)=>{const[l,i,c]=r(e,s);return[{...a,...l},i||n,c]},[{},null,1]).slice(0,2)}function Xe(t,...e){if(t==null)return[null,null];for(const[a,n]of e){const s=a.exec(t);if(s)return n(s)}return[null,null]}function Qn(...t){return(e,a)=>{const n={};let s;for(s=0;s<t.length;s++)n[t[s]]=Ne(e[a+s]);return[n,null,a+s]}}const Xn=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Sr=`(?:${Xn.source}?(?:\\[(${Jn.source})\\])?)?`,ua=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Kn=RegExp(`${ua.source}${Sr}`),da=RegExp(`(?:T${Kn.source})?`),Ir=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,br=/(\d{4})-?W(\d\d)(?:-?(\d))?/,kr=/(\d{4})-?(\d{3})/,Or=Qn("weekYear","weekNumber","weekDay"),Dr=Qn("year","ordinal"),Nr=/(\d{4})-(\d\d)-(\d\d)/,es=RegExp(`${ua.source} ?(?:${Xn.source}|(${Jn.source}))?`),Er=RegExp(`(?: ${es.source})?`);function qe(t,e,a){const n=t[e];return R(n)?a:Ne(n)}function Mr(t,e){return[{year:qe(t,e),month:qe(t,e+1,1),day:qe(t,e+2,1)},null,e+3]}function Ke(t,e){return[{hours:qe(t,e,0),minutes:qe(t,e+1,0),seconds:qe(t,e+2,0),milliseconds:oa(t[e+3])},null,e+4]}function ut(t,e){const a=!t[e]&&!t[e+1],n=At(t[e+1],t[e+2]),s=a?null:oe.instance(n);return[{},s,e+3]}function dt(t,e){const a=t[e]?Ie.create(t[e]):null;return[{},a,e+1]}const Cr=RegExp(`^T?${ua.source}$`),Ar=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function $r(t){const[e,a,n,s,r,l,i,c,h]=t,m=e[0]==="-",f=c&&c[0]==="-",p=(u,O=!1)=>u!==void 0&&(O||u&&m)?-u:u;return[{years:p(Ae(a)),months:p(Ae(n)),weeks:p(Ae(s)),days:p(Ae(r)),hours:p(Ae(l)),minutes:p(Ae(i)),seconds:p(Ae(c),c==="-0"),milliseconds:p(oa(h),f)}]}const Ur={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ca(t,e,a,n,s,r,l){const i={year:e.length===2?Kt(Ne(e)):Ne(e),month:zn.indexOf(a)+1,day:Ne(n),hour:Ne(s),minute:Ne(r)};return l&&(i.second=Ne(l)),t&&(i.weekday=t.length>3?Bn.indexOf(t)+1:qn.indexOf(t)+1),i}const Pr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Fr(t){const[,e,a,n,s,r,l,i,c,h,m,f]=t,p=ca(e,s,n,a,r,l,i);let u;return c?u=Ur[c]:h?u=0:u=At(m,f),[p,new oe(u)]}function _r(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Lr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Rr=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Wr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function _a(t){const[,e,a,n,s,r,l,i]=t;return[ca(e,s,n,a,r,l,i),oe.utcInstance]}function Hr(t){const[,e,a,n,s,r,l,i]=t;return[ca(e,i,a,n,s,r,l),oe.utcInstance]}const zr=Je(Ir,da),Zr=Je(br,da),Br=Je(kr,da),qr=Je(Kn),ts=Qe(Mr,Ke,ut,dt),Gr=Qe(Or,Ke,ut,dt),Yr=Qe(Dr,Ke,ut,dt),jr=Qe(Ke,ut,dt);function Jr(t){return Xe(t,[zr,ts],[Zr,Gr],[Br,Yr],[qr,jr])}function Qr(t){return Xe(_r(t),[Pr,Fr])}function Xr(t){return Xe(t,[Lr,_a],[Rr,_a],[Wr,Hr])}function Kr(t){return Xe(t,[Ar,$r])}const el=Qe(Ke);function tl(t){return Xe(t,[Cr,el])}const al=Je(Nr,Er),nl=Je(es),sl=Qe(Ke,ut,dt);function rl(t){return Xe(t,[al,ts],[nl,sl])}const La="Invalid Duration",as={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},ll={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...as},de=146097/400,Le=146097/4800,ol={years:{quarters:4,months:12,weeks:de/7,days:de,hours:de*24,minutes:de*24*60,seconds:de*24*60*60,milliseconds:de*24*60*60*1e3},quarters:{months:3,weeks:de/28,days:de/4,hours:de*24/4,minutes:de*24*60/4,seconds:de*24*60*60/4,milliseconds:de*24*60*60*1e3/4},months:{weeks:Le/7,days:Le,hours:Le*24,minutes:Le*24*60,seconds:Le*24*60*60,milliseconds:Le*24*60*60*1e3},...as},Ue=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],il=Ue.slice(0).reverse();function De(t,e,a=!1){const n={values:a?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new z(n)}function ns(t,e){let a=e.milliseconds??0;for(const n of il.slice(1))e[n]&&(a+=e[n]*t[n].milliseconds);return a}function Ra(t,e){const a=ns(t,e)<0?-1:1;Ue.reduceRight((n,s)=>{if(R(e[s]))return n;if(n){const r=e[n]*a,l=t[s][n],i=Math.floor(r/l);e[s]+=i*a,e[n]-=i*l*a}return s},null),Ue.reduce((n,s)=>{if(R(e[s]))return n;if(n){const r=e[n]%1;e[n]-=r,e[s]+=r*t[n][s]}return s},null)}function ul(t){const e={};for(const[a,n]of Object.entries(t))n!==0&&(e[a]=n);return e}class z{constructor(e){const a=e.conversionAccuracy==="longterm"||!1;let n=a?ol:ll;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||B.create(),this.conversionAccuracy=a?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,a){return z.fromObject({milliseconds:e},a)}static fromObject(e,a={}){if(e==null||typeof e!="object")throw new ne(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new z({values:Ot(e,z.normalizeUnit),loc:B.fromObject(a),conversionAccuracy:a.conversionAccuracy,matrix:a.matrix})}static fromDurationLike(e){if(Me(e))return z.fromMillis(e);if(z.isDuration(e))return e;if(typeof e=="object")return z.fromObject(e);throw new ne(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,a){const[n]=Kr(e);return n?z.fromObject(n,a):z.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,a){const[n]=tl(e);return n?z.fromObject(n,a):z.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,a=null){if(!e)throw new ne("need to specify a reason the Duration is invalid");const n=e instanceof ge?e:new ge(e,a);if(j.throwOnInvalid)throw new As(n);return new z({invalid:n})}static normalizeUnit(e){const a={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!a)throw new fn(e);return a}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,a={}){const n={...a,floor:a.round!==!1&&a.floor!==!1};return this.isValid?se.create(this.loc,n).formatDurationFromString(this,e):La}toHuman(e={}){if(!this.isValid)return La;const a=Ue.map(n=>{const s=this.values[n];return R(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(a)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=ia(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const a=this.toMillis();return a<0||a>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},C.fromMillis(a,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ns(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const a=z.fromDurationLike(e),n={};for(const s of Ue)(Ge(a.values,s)||Ge(this.values,s))&&(n[s]=a.get(s)+this.get(s));return De(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const a=z.fromDurationLike(e);return this.plus(a.negate())}mapUnits(e){if(!this.isValid)return this;const a={};for(const n of Object.keys(this.values))a[n]=Hn(e(this.values[n],n));return De(this,{values:a},!0)}get(e){return this[z.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const a={...this.values,...Ot(e,z.normalizeUnit)};return De(this,{values:a})}reconfigure({locale:e,numberingSystem:a,conversionAccuracy:n,matrix:s}={}){const l={loc:this.loc.clone({locale:e,numberingSystem:a}),matrix:s,conversionAccuracy:n};return De(this,l)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Ra(this.matrix,e),De(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=ul(this.normalize().shiftToAll().toObject());return De(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(l=>z.normalizeUnit(l));const a={},n={},s=this.toObject();let r;for(const l of Ue)if(e.indexOf(l)>=0){r=l;let i=0;for(const h in n)i+=this.matrix[h][l]*n[h],n[h]=0;Me(s[l])&&(i+=s[l]);const c=Math.trunc(i);a[l]=c,n[l]=(i*1e3-c*1e3)/1e3}else Me(s[l])&&(n[l]=s[l]);for(const l in n)n[l]!==0&&(a[r]+=l===r?n[l]:n[l]/this.matrix[r][l]);return Ra(this.matrix,a),De(this,{values:a},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const a of Object.keys(this.values))e[a]=this.values[a]===0?0:-this.values[a];return De(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function a(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(const n of Ue)if(!a(this.values[n],e.values[n]))return!1;return!0}}const Re="Invalid Interval";function dl(t,e){return!t||!t.isValid?Y.invalid("missing or invalid start"):!e||!e.isValid?Y.invalid("missing or invalid end"):e<t?Y.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Y{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,a=null){if(!e)throw new ne("need to specify a reason the Interval is invalid");const n=e instanceof ge?e:new ge(e,a);if(j.throwOnInvalid)throw new Cs(n);return new Y({invalid:n})}static fromDateTimes(e,a){const n=tt(e),s=tt(a),r=dl(n,s);return r??new Y({start:n,end:s})}static after(e,a){const n=z.fromDurationLike(a),s=tt(e);return Y.fromDateTimes(s,s.plus(n))}static before(e,a){const n=z.fromDurationLike(a),s=tt(e);return Y.fromDateTimes(s.minus(n),s)}static fromISO(e,a){const[n,s]=(e||"").split("/",2);if(n&&s){let r,l;try{r=C.fromISO(n,a),l=r.isValid}catch{l=!1}let i,c;try{i=C.fromISO(s,a),c=i.isValid}catch{c=!1}if(l&&c)return Y.fromDateTimes(r,i);if(l){const h=z.fromISO(s,a);if(h.isValid)return Y.after(r,h)}else if(c){const h=z.fromISO(n,a);if(h.isValid)return Y.before(i,h)}}return Y.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",a){if(!this.isValid)return NaN;const n=this.start.startOf(e,a);let s;return a!=null&&a.useLocaleWeeks?s=this.end.reconfigure({locale:n.locale}):s=this.end,s=s.startOf(e,a),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:a}={}){return this.isValid?Y.fromDateTimes(e||this.s,a||this.e):this}splitAt(...e){if(!this.isValid)return[];const a=e.map(tt).filter(l=>this.contains(l)).sort((l,i)=>l.toMillis()-i.toMillis()),n=[];let{s}=this,r=0;for(;s<this.e;){const l=a[r]||this.e,i=+l>+this.e?this.e:l;n.push(Y.fromDateTimes(s,i)),s=i,r+=1}return n}splitBy(e){const a=z.fromDurationLike(e);if(!this.isValid||!a.isValid||a.as("milliseconds")===0)return[];let{s:n}=this,s=1,r;const l=[];for(;n<this.e;){const i=this.start.plus(a.mapUnits(c=>c*s));r=+i>+this.e?this.e:i,l.push(Y.fromDateTimes(n,r)),n=r,s+=1}return l}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const a=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return a>=n?null:Y.fromDateTimes(a,n)}union(e){if(!this.isValid)return this;const a=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Y.fromDateTimes(a,n)}static merge(e){const[a,n]=e.sort((s,r)=>s.s-r.s).reduce(([s,r],l)=>r?r.overlaps(l)||r.abutsStart(l)?[s,r.union(l)]:[s.concat([r]),l]:[s,l],[[],null]);return n&&a.push(n),a}static xor(e){let a=null,n=0;const s=[],r=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),l=Array.prototype.concat(...r),i=l.sort((c,h)=>c.time-h.time);for(const c of i)n+=c.type==="s"?1:-1,n===1?a=c.time:(a&&+a!=+c.time&&s.push(Y.fromDateTimes(a,c.time)),a=null);return Y.merge(s)}difference(...e){return Y.xor([this].concat(e)).map(a=>this.intersection(a)).filter(a=>a&&!a.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Re}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=It,a={}){return this.isValid?se.create(this.s.loc.clone(a),e).formatInterval(this):Re}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Re}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Re}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Re}toFormat(e,{separator:a=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${a}${this.e.toFormat(e)}`:Re}toDuration(e,a){return this.isValid?this.e.diff(this.s,e,a):z.invalid(this.invalidReason)}mapEndpoints(e){return Y.fromDateTimes(e(this.s),e(this.e))}}class pt{static hasDST(e=j.defaultZone){const a=C.now().setZone(e).set({month:12});return!e.isUniversal&&a.offset!==a.set({month:6}).offset}static isValidIANAZone(e){return Ie.isValidZone(e)}static normalizeZone(e){return Ee(e,j.defaultZone)}static getStartOfWeek({locale:e=null,locObj:a=null}={}){return(a||B.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:a=null}={}){return(a||B.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:a=null}={}){return(a||B.create(e)).getWeekendDays().slice()}static months(e="long",{locale:a=null,numberingSystem:n=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||B.create(a,n,r)).months(e)}static monthsFormat(e="long",{locale:a=null,numberingSystem:n=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||B.create(a,n,r)).months(e,!0)}static weekdays(e="long",{locale:a=null,numberingSystem:n=null,locObj:s=null}={}){return(s||B.create(a,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:a=null,numberingSystem:n=null,locObj:s=null}={}){return(s||B.create(a,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return B.create(e).meridiems()}static eras(e="short",{locale:a=null}={}){return B.create(a,null,"gregory").eras(e)}static features(){return{relative:Ln(),localeWeek:Rn()}}}function Wa(t,e){const a=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=a(e)-a(t);return Math.floor(z.fromMillis(n).as("days"))}function cl(t,e,a){const n=[["years",(c,h)=>h.year-c.year],["quarters",(c,h)=>h.quarter-c.quarter+(h.year-c.year)*4],["months",(c,h)=>h.month-c.month+(h.year-c.year)*12],["weeks",(c,h)=>{const m=Wa(c,h);return(m-m%7)/7}],["days",Wa]],s={},r=t;let l,i;for(const[c,h]of n)a.indexOf(c)>=0&&(l=c,s[c]=h(t,e),i=r.plus(s),i>e?(s[c]--,t=r.plus(s),t>e&&(i=t,s[c]--,t=r.plus(s))):t=i);return[t,s,i,l]}function ml(t,e,a,n){let[s,r,l,i]=cl(t,e,a);const c=e-s,h=a.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);h.length===0&&(l<e&&(l=s.plus({[i]:1})),l!==s&&(r[i]=(r[i]||0)+c/(l-s)));const m=z.fromObject(r,n);return h.length>0?z.fromMillis(c,n).shiftTo(...h).plus(m):m}const fl="missing Intl.DateTimeFormat.formatToParts support";function Z(t,e=a=>a){return{regex:t,deser:([a])=>e(ar(a))}}const pl=String.fromCharCode(160),ss=`[ ${pl}]`,rs=new RegExp(ss,"g");function hl(t){return t.replace(/\./g,"\\.?").replace(rs,ss)}function Ha(t){return t.replace(/\./g,"").replace(rs," ").toLowerCase()}function he(t,e){return t===null?null:{regex:RegExp(t.map(hl).join("|")),deser:([a])=>t.findIndex(n=>Ha(a)===Ha(n))+e}}function za(t,e){return{regex:t,deser:([,a,n])=>At(a,n),groups:e}}function ht(t){return{regex:t,deser:([e])=>e}}function yl(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function gl(t,e){const a=pe(e),n=pe(e,"{2}"),s=pe(e,"{3}"),r=pe(e,"{4}"),l=pe(e,"{6}"),i=pe(e,"{1,2}"),c=pe(e,"{1,3}"),h=pe(e,"{1,6}"),m=pe(e,"{1,9}"),f=pe(e,"{2,4}"),p=pe(e,"{4,6}"),u=N=>({regex:RegExp(yl(N.val)),deser:([A])=>A,literal:!0}),k=(N=>{if(t.literal)return u(N);switch(N.val){case"G":return he(e.eras("short"),0);case"GG":return he(e.eras("long"),0);case"y":return Z(h);case"yy":return Z(f,Kt);case"yyyy":return Z(r);case"yyyyy":return Z(p);case"yyyyyy":return Z(l);case"M":return Z(i);case"MM":return Z(n);case"MMM":return he(e.months("short",!0),1);case"MMMM":return he(e.months("long",!0),1);case"L":return Z(i);case"LL":return Z(n);case"LLL":return he(e.months("short",!1),1);case"LLLL":return he(e.months("long",!1),1);case"d":return Z(i);case"dd":return Z(n);case"o":return Z(c);case"ooo":return Z(s);case"HH":return Z(n);case"H":return Z(i);case"hh":return Z(n);case"h":return Z(i);case"mm":return Z(n);case"m":return Z(i);case"q":return Z(i);case"qq":return Z(n);case"s":return Z(i);case"ss":return Z(n);case"S":return Z(c);case"SSS":return Z(s);case"u":return ht(m);case"uu":return ht(i);case"uuu":return Z(a);case"a":return he(e.meridiems(),0);case"kkkk":return Z(r);case"kk":return Z(f,Kt);case"W":return Z(i);case"WW":return Z(n);case"E":case"c":return Z(a);case"EEE":return he(e.weekdays("short",!1),1);case"EEEE":return he(e.weekdays("long",!1),1);case"ccc":return he(e.weekdays("short",!0),1);case"cccc":return he(e.weekdays("long",!0),1);case"Z":case"ZZ":return za(new RegExp(`([+-]${i.source})(?::(${n.source}))?`),2);case"ZZZ":return za(new RegExp(`([+-]${i.source})(${n.source})?`),2);case"z":return ht(/[a-z_+-/]{1,256}?/i);case" ":return ht(/[^\S\n\r]/);default:return u(N)}})(t)||{invalidReason:fl};return k.token=t,k}const vl={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function wl(t,e,a){const{type:n,value:s}=t;if(n==="literal"){const c=/^\s+$/.test(s);return{literal:!c,val:c?" ":s}}const r=e[n];let l=n;n==="hour"&&(e.hour12!=null?l=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?l="hour12":l="hour24":l=a.hour12?"hour12":"hour24");let i=vl[l];if(typeof i=="object"&&(i=i[r]),i)return{literal:!1,val:i}}function Vl(t){return[`^${t.map(a=>a.regex).reduce((a,n)=>`${a}(${n.source})`,"")}$`,t]}function xl(t,e,a){const n=t.match(e);if(n){const s={};let r=1;for(const l in a)if(Ge(a,l)){const i=a[l],c=i.groups?i.groups+1:1;!i.literal&&i.token&&(s[i.token.val[0]]=i.deser(n.slice(r,r+c))),r+=c}return[n,s]}else return[n,{}]}function Tl(t){const e=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let a=null,n;return R(t.z)||(a=Ie.create(t.z)),R(t.Z)||(a||(a=new oe(t.Z)),n=t.Z),R(t.q)||(t.M=(t.q-1)*3+1),R(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),R(t.u)||(t.S=oa(t.u)),[Object.keys(t).reduce((r,l)=>{const i=e(l);return i&&(r[i]=t[l]),r},{}),a,n]}let Wt=null;function Sl(){return Wt||(Wt=C.fromMillis(1555555555555)),Wt}function Il(t,e){if(t.literal)return t;const a=se.macroTokenToFormatOpts(t.val),n=us(a,e);return n==null||n.includes(void 0)?t:n}function ls(t,e){return Array.prototype.concat(...t.map(a=>Il(a,e)))}class os{constructor(e,a){if(this.locale=e,this.format=a,this.tokens=ls(se.parseFormat(a),e),this.units=this.tokens.map(n=>gl(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,s]=Vl(this.units);this.regex=RegExp(n,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[a,n]=xl(e,this.regex,this.handlers),[s,r,l]=n?Tl(n):[null,null,void 0];if(Ge(n,"a")&&Ge(n,"H"))throw new ze("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:a,matches:n,result:s,zone:r,specificOffset:l}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function is(t,e,a){return new os(t,a).explainFromTokens(e)}function bl(t,e,a){const{result:n,zone:s,specificOffset:r,invalidReason:l}=is(t,e,a);return[n,s,r,l]}function us(t,e){if(!t)return null;const n=se.create(e,t).dtFormatter(Sl()),s=n.formatToParts(),r=n.resolvedOptions();return s.map(l=>wl(l,t,r))}const Ht="Invalid DateTime",Za=864e13;function st(t){return new ge("unsupported zone",`the zone "${t.name}" is not supported`)}function zt(t){return t.weekData===null&&(t.weekData=bt(t.c)),t.weekData}function Zt(t){return t.localWeekData===null&&(t.localWeekData=bt(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function $e(t,e){const a={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new C({...a,...e,old:a})}function ds(t,e,a){let n=t-e*60*1e3;const s=a.offset(n);if(e===s)return[n,e];n-=(s-e)*60*1e3;const r=a.offset(n);return s===r?[n,s]:[t-Math.min(s,r)*60*1e3,Math.max(s,r)]}function yt(t,e){t+=e*60*1e3;const a=new Date(t);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Vt(t,e,a){return ds(Ct(t),e,a)}function Ba(t,e){const a=t.o,n=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,r={...t.c,year:n,month:s,day:Math.min(t.c.day,kt(n,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},l=z.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),i=Ct(r);let[c,h]=ds(i,a,t.zone);return l!==0&&(c+=l,h=t.zone.offset(c)),{ts:c,o:h}}function We(t,e,a,n,s,r){const{setZone:l,zone:i}=a;if(t&&Object.keys(t).length!==0||e){const c=e||i,h=C.fromObject(t,{...a,zone:c,specificOffset:r});return l?h:h.setZone(i)}else return C.invalid(new ge("unparsable",`the input "${s}" can't be parsed as ${n}`))}function gt(t,e,a=!0){return t.isValid?se.create(B.create("en-US"),{allowZ:a,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Bt(t,e){const a=t.c.year>9999||t.c.year<0;let n="";return a&&t.c.year>=0&&(n+="+"),n+=Q(t.c.year,a?6:4),e?(n+="-",n+=Q(t.c.month),n+="-",n+=Q(t.c.day)):(n+=Q(t.c.month),n+=Q(t.c.day)),n}function qa(t,e,a,n,s,r){let l=Q(t.c.hour);return e?(l+=":",l+=Q(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!a)&&(l+=":")):l+=Q(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!a)&&(l+=Q(t.c.second),(t.c.millisecond!==0||!n)&&(l+=".",l+=Q(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!r?l+="Z":t.o<0?(l+="-",l+=Q(Math.trunc(-t.o/60)),l+=":",l+=Q(Math.trunc(-t.o%60))):(l+="+",l+=Q(Math.trunc(t.o/60)),l+=":",l+=Q(Math.trunc(t.o%60)))),r&&(l+="["+t.zone.ianaName+"]"),l}const cs={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},kl={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ol={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ms=["year","month","day","hour","minute","second","millisecond"],Dl=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Nl=["year","ordinal","hour","minute","second","millisecond"];function El(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new fn(t);return e}function Ga(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return El(t)}}function Ml(t){return Tt[t]||(xt===void 0&&(xt=j.now()),Tt[t]=t.offset(xt)),Tt[t]}function Ya(t,e){const a=Ee(e.zone,j.defaultZone);if(!a.isValid)return C.invalid(st(a));const n=B.fromObject(e);let s,r;if(R(t.year))s=j.now();else{for(const c of ms)R(t[c])&&(t[c]=cs[c]);const l=Fn(t)||_n(t);if(l)return C.invalid(l);const i=Ml(a);[s,r]=Vt(t,i,a)}return new C({ts:s,zone:a,loc:n,o:r})}function ja(t,e,a){const n=R(a.round)?!0:a.round,s=(l,i)=>(l=ia(l,n||a.calendary?0:2,!0),e.loc.clone(a).relFormatter(a).format(l,i)),r=l=>a.calendary?e.hasSame(t,l)?0:e.startOf(l).diff(t.startOf(l),l).get(l):e.diff(t,l).get(l);if(a.unit)return s(r(a.unit),a.unit);for(const l of a.units){const i=r(l);if(Math.abs(i)>=1)return s(i,l)}return s(t>e?-0:0,a.units[a.units.length-1])}function Ja(t){let e={},a;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],a=Array.from(t).slice(0,t.length-1)):a=Array.from(t),[e,a]}let xt,Tt={};class C{constructor(e){const a=e.zone||j.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new ge("invalid input"):null)||(a.isValid?null:st(a));this.ts=R(e.ts)?j.now():e.ts;let s=null,r=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(a))[s,r]=[e.old.c,e.old.o];else{const i=Me(e.o)&&!e.old?e.o:a.offset(this.ts);s=yt(this.ts,i),n=Number.isNaN(s.year)?new ge("invalid input"):null,s=n?null:s,r=n?null:i}this._zone=a,this.loc=e.loc||B.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=r,this.isLuxonDateTime=!0}static now(){return new C({})}static local(){const[e,a]=Ja(arguments),[n,s,r,l,i,c,h]=a;return Ya({year:n,month:s,day:r,hour:l,minute:i,second:c,millisecond:h},e)}static utc(){const[e,a]=Ja(arguments),[n,s,r,l,i,c,h]=a;return e.zone=oe.utcInstance,Ya({year:n,month:s,day:r,hour:l,minute:i,second:c,millisecond:h},e)}static fromJSDate(e,a={}){const n=or(e)?e.valueOf():NaN;if(Number.isNaN(n))return C.invalid("invalid input");const s=Ee(a.zone,j.defaultZone);return s.isValid?new C({ts:n,zone:s,loc:B.fromObject(a)}):C.invalid(st(s))}static fromMillis(e,a={}){if(Me(e))return e<-Za||e>Za?C.invalid("Timestamp out of range"):new C({ts:e,zone:Ee(a.zone,j.defaultZone),loc:B.fromObject(a)});throw new ne(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,a={}){if(Me(e))return new C({ts:e*1e3,zone:Ee(a.zone,j.defaultZone),loc:B.fromObject(a)});throw new ne("fromSeconds requires a numerical input")}static fromObject(e,a={}){e=e||{};const n=Ee(a.zone,j.defaultZone);if(!n.isValid)return C.invalid(st(n));const s=B.fromObject(a),r=Ot(e,Ga),{minDaysInFirstWeek:l,startOfWeek:i}=$a(r,s),c=j.now(),h=R(a.specificOffset)?n.offset(c):a.specificOffset,m=!R(r.ordinal),f=!R(r.year),p=!R(r.month)||!R(r.day),u=f||p,O=r.weekYear||r.weekNumber;if((u||m)&&O)throw new ze("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&m)throw new ze("Can't mix ordinal dates with month/day");const k=O||r.weekday&&!u;let N,A,w=yt(c,h);k?(N=Dl,A=kl,w=bt(w,l,i)):m?(N=Nl,A=Ol,w=Rt(w)):(N=ms,A=cs);let V=!1;for(const P of N){const b=r[P];R(b)?V?r[P]=A[P]:r[P]=w[P]:V=!0}const W=k?sr(r,l,i):m?rr(r):Fn(r),E=W||_n(r);if(E)return C.invalid(E);const y=k?Ca(r,l,i):m?Aa(r):r,[$,v]=Vt(y,h,n),H=new C({ts:$,zone:n,o:v,loc:s});return r.weekday&&u&&e.weekday!==H.weekday?C.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${H.toISO()}`):H.isValid?H:C.invalid(H.invalid)}static fromISO(e,a={}){const[n,s]=Jr(e);return We(n,s,a,"ISO 8601",e)}static fromRFC2822(e,a={}){const[n,s]=Qr(e);return We(n,s,a,"RFC 2822",e)}static fromHTTP(e,a={}){const[n,s]=Xr(e);return We(n,s,a,"HTTP",a)}static fromFormat(e,a,n={}){if(R(e)||R(a))throw new ne("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:r=null}=n,l=B.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),[i,c,h,m]=bl(l,e,a);return m?C.invalid(m):We(i,c,n,`format ${a}`,e,h)}static fromString(e,a,n={}){return C.fromFormat(e,a,n)}static fromSQL(e,a={}){const[n,s]=rl(e);return We(n,s,a,"SQL",e)}static invalid(e,a=null){if(!e)throw new ne("need to specify a reason the DateTime is invalid");const n=e instanceof ge?e:new ge(e,a);if(j.throwOnInvalid)throw new Ms(n);return new C({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,a={}){const n=us(e,B.fromObject(a));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(e,a={}){return ls(se.parseFormat(e),B.fromObject(a)).map(s=>s.val).join("")}static resetCache(){xt=void 0,Tt={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?zt(this).weekYear:NaN}get weekNumber(){return this.isValid?zt(this).weekNumber:NaN}get weekday(){return this.isValid?zt(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Zt(this).weekday:NaN}get localWeekNumber(){return this.isValid?Zt(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Zt(this).weekYear:NaN}get ordinal(){return this.isValid?Rt(this.c).ordinal:NaN}get monthShort(){return this.isValid?pt.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?pt.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?pt.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?pt.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,a=6e4,n=Ct(this.c),s=this.zone.offset(n-e),r=this.zone.offset(n+e),l=this.zone.offset(n-s*a),i=this.zone.offset(n-r*a);if(l===i)return[this];const c=n-l*a,h=n-i*a,m=yt(c,l),f=yt(h,i);return m.hour===f.hour&&m.minute===f.minute&&m.second===f.second&&m.millisecond===f.millisecond?[$e(this,{ts:c}),$e(this,{ts:h})]:[this]}get isInLeapYear(){return it(this.year)}get daysInMonth(){return kt(this.year,this.month)}get daysInYear(){return this.isValid?Be(this.year):NaN}get weeksInWeekYear(){return this.isValid?lt(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?lt(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:a,numberingSystem:n,calendar:s}=se.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:a,numberingSystem:n,outputCalendar:s}}toUTC(e=0,a={}){return this.setZone(oe.instance(e),a)}toLocal(){return this.setZone(j.defaultZone)}setZone(e,{keepLocalTime:a=!1,keepCalendarTime:n=!1}={}){if(e=Ee(e,j.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(a||n){const r=e.offset(this.ts),l=this.toObject();[s]=Vt(l,r,e)}return $e(this,{ts:s,zone:e})}else return C.invalid(st(e))}reconfigure({locale:e,numberingSystem:a,outputCalendar:n}={}){const s=this.loc.clone({locale:e,numberingSystem:a,outputCalendar:n});return $e(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const a=Ot(e,Ga),{minDaysInFirstWeek:n,startOfWeek:s}=$a(a,this.loc),r=!R(a.weekYear)||!R(a.weekNumber)||!R(a.weekday),l=!R(a.ordinal),i=!R(a.year),c=!R(a.month)||!R(a.day),h=i||c,m=a.weekYear||a.weekNumber;if((h||l)&&m)throw new ze("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&l)throw new ze("Can't mix ordinal dates with month/day");let f;r?f=Ca({...bt(this.c,n,s),...a},n,s):R(a.ordinal)?(f={...this.toObject(),...a},R(a.day)&&(f.day=Math.min(kt(f.year,f.month),f.day))):f=Aa({...Rt(this.c),...a});const[p,u]=Vt(f,this.o,this.zone);return $e(this,{ts:p,o:u})}plus(e){if(!this.isValid)return this;const a=z.fromDurationLike(e);return $e(this,Ba(this,a))}minus(e){if(!this.isValid)return this;const a=z.fromDurationLike(e).negate();return $e(this,Ba(this,a))}startOf(e,{useLocaleWeeks:a=!1}={}){if(!this.isValid)return this;const n={},s=z.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks")if(a){const r=this.loc.getStartOfWeek(),{weekday:l}=this;l<r&&(n.weekNumber=this.weekNumber-1),n.weekday=r}else n.weekday=1;if(s==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(e,a){return this.isValid?this.plus({[e]:1}).startOf(e,a).minus(1):this}toFormat(e,a={}){return this.isValid?se.create(this.loc.redefaultToEN(a)).formatDateTimeFromString(this,e):Ht}toLocaleString(e=It,a={}){return this.isValid?se.create(this.loc.clone(a),e).formatDateTime(this):Ht}toLocaleParts(e={}){return this.isValid?se.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:a=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const l=e==="extended";let i=Bt(this,l);return i+="T",i+=qa(this,l,a,n,s,r),i}toISODate({format:e="extended"}={}){return this.isValid?Bt(this,e==="extended"):null}toISOWeekDate(){return gt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:a=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:r=!1,format:l="extended"}={}){return this.isValid?(s?"T":"")+qa(this,l==="extended",a,e,n,r):null}toRFC2822(){return gt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return gt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Bt(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:a=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(a||e)&&(n&&(s+=" "),a?s+="z":e&&(s+="ZZ")),gt(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Ht}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const a={...this.c};return e.includeConfig&&(a.outputCalendar=this.outputCalendar,a.numberingSystem=this.loc.numberingSystem,a.locale=this.loc.locale),a}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,a="milliseconds",n={}){if(!this.isValid||!e.isValid)return z.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},r=ir(a).map(z.normalizeUnit),l=e.valueOf()>this.valueOf(),i=l?this:e,c=l?e:this,h=ml(i,c,r,s);return l?h.negate():h}diffNow(e="milliseconds",a={}){return this.diff(C.now(),e,a)}until(e){return this.isValid?Y.fromDateTimes(this,e):this}hasSame(e,a,n){if(!this.isValid)return!1;const s=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(a,n)<=s&&s<=r.endOf(a,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const a=e.base||C.fromObject({},{zone:this.zone}),n=e.padding?this<a?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(s=e.unit,r=void 0),ja(a,this.plus(n),{...e,numeric:"always",units:s,unit:r})}toRelativeCalendar(e={}){return this.isValid?ja(e.base||C.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(C.isDateTime))throw new ne("min requires all arguments be DateTimes");return Ua(e,a=>a.valueOf(),Math.min)}static max(...e){if(!e.every(C.isDateTime))throw new ne("max requires all arguments be DateTimes");return Ua(e,a=>a.valueOf(),Math.max)}static fromFormatExplain(e,a,n={}){const{locale:s=null,numberingSystem:r=null}=n,l=B.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});return is(l,e,a)}static fromStringExplain(e,a,n={}){return C.fromFormatExplain(e,a,n)}static buildFormatParser(e,a={}){const{locale:n=null,numberingSystem:s=null}=a,r=B.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new os(r,e)}static fromFormatParser(e,a,n={}){if(R(e)||R(a))throw new ne("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:r=null}=n,l=B.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});if(!l.equals(a.locale))throw new ne(`fromFormatParser called with a locale of ${l}, but the format parser was created for ${a.locale}`);const{result:i,zone:c,specificOffset:h,invalidReason:m}=a.explainFromTokens(e);return m?C.invalid(m):We(i,c,n,`format ${a.format}`,e,h)}static get DATE_SHORT(){return It}static get DATE_MED(){return pn}static get DATE_MED_WITH_WEEKDAY(){return $s}static get DATE_FULL(){return hn}static get DATE_HUGE(){return yn}static get TIME_SIMPLE(){return gn}static get TIME_WITH_SECONDS(){return vn}static get TIME_WITH_SHORT_OFFSET(){return wn}static get TIME_WITH_LONG_OFFSET(){return Vn}static get TIME_24_SIMPLE(){return xn}static get TIME_24_WITH_SECONDS(){return Tn}static get TIME_24_WITH_SHORT_OFFSET(){return Sn}static get TIME_24_WITH_LONG_OFFSET(){return In}static get DATETIME_SHORT(){return bn}static get DATETIME_SHORT_WITH_SECONDS(){return kn}static get DATETIME_MED(){return On}static get DATETIME_MED_WITH_SECONDS(){return Dn}static get DATETIME_MED_WITH_WEEKDAY(){return Us}static get DATETIME_FULL(){return Nn}static get DATETIME_FULL_WITH_SECONDS(){return En}static get DATETIME_HUGE(){return Mn}static get DATETIME_HUGE_WITH_SECONDS(){return Cn}}function tt(t){if(C.isDateTime(t))return t;if(t&&t.valueOf&&Me(t.valueOf()))return C.fromJSDate(t);if(t&&typeof t=="object")return C.fromObject(t);throw new ne(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Te=()=>{const t=(l,i=void 0)=>i===void 0?C.fromMillis(l).toFormat("yyyy-MM-dd HH:mm"):C.fromMillis(l,{zone:i}).toFormat("yyyy-MM-dd HH:mm"),e=l=>t(l,"Asia/Ho_Chi_Minh"),a=(l,i=void 0)=>i===void 0?C.fromMillis(l).toFormat("yyyy-MM-dd"):C.fromMillis(l,{zone:i}).toFormat("yyyy-MM-dd"),n=l=>a(l,"Asia/Ho_Chi_Minh"),s=(l,i=void 0)=>i===void 0?C.fromMillis(l).toFormat("HH:mm:ss"):C.fromMillis(l,{zone:i}).toFormat("HH:mm:ss");return{formatDateTime:t,formatDateTimeV:e,formatDate:a,formatDateV:n,formatTime:s,formatTimeV:l=>s(l,"Asia/Ho_Chi_Minh")}},Qa=Dt(),{formatDate:Cl}=Te(),Al=()=>q({page:1,perPage:10,total:0}),$l=()=>q({sortBy:"createdAt",sortingOrder:null}),Ul=()=>q({isActive:!0,search:""}),Pl={[re.ESCORT]:"奧黛導遊",[re.SHUTTLE]:"機場接送",[re.CHARTER]:"包車旅遊",[re.MASSAGE]:"龍筋按摩",[re.TUTOR]:"越語家教"},Ce=t=>{const e=q(!1),a=q([]),{filters:n=Ul(),sorting:s=$l(),pagination:r=Al()}=t||{},l=async()=>{e.value=!0;const p={...G(n),sortBy:s.value.sortBy,sortOrder:s.value.sortingOrder,offset:(r.value.page-1)*r.value.perPage,limit:r.value.perPage,...n.value.isActive&&{excludeStatus:"initial"},...!n.value.isActive&&{status:"initial"}},{data:u}=await fe.getOrders(p);a.value=u.data;const O={page:r.value.page,perPage:10,total:u.total};i(()=>{r.value=O}),e.value=!1},{ignoreUpdates:i}=ea([r,s],l,{deep:!0});return ta(n,()=>{r.value.page=1,l()},{deep:!0}),l(),{categorys:Pl,isLoading:e,filters:n,sorting:s,pagination:r,orders:a,fetch:l,getServiceDate:p=>Cl(Number(p.orderPlanEscort.startTime)),getServiceDuring:p=>{const u=C.fromMillis(Number(p.orderPlanEscort.startTime),{zone:"Asia/Ho_Chi_Minh"}),O=u.plus({hours:Number(p.orderPlanEscort.serviceHours)});return`${u.toFormat("HH:mm")} - ${O.toFormat("HH:mm")}`},getGuideExpect:p=>{var u;return(u=p.orderPlanEscort.guideExpectIds)==null?void 0:u.split(",").map(O=>{var k;return(k=Qa.guides.find(N=>N.id===Number(O)))==null?void 0:k.name}).join(", ")},getAttractions:p=>{var u;return(u=p.orderPlanEscort.attractionIds)==null?void 0:u.split(",").map(O=>{var k;return(k=Qa.attractions.find(N=>N.id===Number(O)))==null?void 0:k.name}).join(", ")},async add(p){console.log("add order",p)},async update(p){console.log("update order",p)},async remove(p){console.log("remove order",p)}}},Fl=t=>(gs("data-v-d756e30e"),t=t(),vs(),t),_l={class:"flex items-center gap-2 max-w-[230px] ellipsis"},Ll={class:"max-w-[120px] ellipsis"},Rl={class:"ellipsis max-w-[230px]"},Wl={class:"ellipsis max-w-[230px]"},Hl={class:"ellipsis max-w-[230px]"},zl={class:"ellipsis max-w-[230px]"},Zl={class:"ellipsis max-w-[230px]"},Bl={class:"ellipsis max-w-[230px]"},ql={class:"max-w-[180px] ellipsis"},Gl={class:"ellipsis max-w-[230px]"},Yl=Fl(()=>g("div",{class:"ellipsis max-w-[230px]"},"服務人員",-1)),jl={class:"ellipsis max-w-[230px]"},Jl={class:"ellipsis max-w-[230px]"},Ql={class:"flex gap-2 justify-end"},Xl={class:"flex flex-col-reverse md:flex-row gap-2 justify-between items-center py-2"},Kl={key:0,class:"flex"},eo=Fe({__name:"OrdersTable",props:{orders:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0},sortBy:{type:String,required:!0},sortingOrder:{type:String,required:!0}},emits:["edit-order","delete-order","update:sortBy","update:sortingOrder"],setup(t,{emit:e}){const{categorys:a}=Ce(),{formatDateTime:n,formatDateTimeV:s}=Te(),{getServiceDate:r,getServiceDuring:l}=Ce(),i=ps([{label:"訂單編號",key:"id",sortable:!0},{label:"訂單狀態",key:"status",sortable:!0},{label:"付款狀態",key:"payment",sortable:!1},{label:"操作狀態",key:"manualOperationStatus",sortable:!1},{label:"下訂時間",key:"createdAt",sortable:!0},{label:"訂購人",key:"username",sortable:!0},{label:"訂購項目",key:"type",sortable:!0},{label:"訂購方案",key:"planName",sortable:!0},{label:"行程時段",key:"startTime",sortable:!0},{label:"已支付訂金",key:"deposit",sortable:!0},{label:"尾款(VND)",key:"finalPayment",sortable:!0},{label:" ",key:"actions",align:"right"}]),c={1:"東方小巴黎",2:"華燈夜生活",3:"西貢河船宴",4:"韓式桑拿趣"},h={1:"機場-市區",2:"市區-機場"},m=t,f=e,p=ys(m,"orders"),u=fa(m,"sortBy",f),O=fa(m,"sortingOrder",f),k={initial:"secondary",payment:"warning",payment_fail:"warning",completed:"success",cancel:"warning",cancel_completed:"secondary"},N={initial:"草稿",payment:"未付款",payment_fail:"付款失敗",completed:"已完成",cancel:"訂單取消",cancel_completed:"已取消"},A={[ee.PENDING]:"待處理",[ee.PROCESSED]:"已處理"},w={[ee.PENDING]:"warning",[ee.PROCESSED]:"success"},V=K(()=>Math.ceil(m.pagination.total/m.pagination.perPage)),{confirm:W}=hs(),E=async d=>{await W({title:"Delete user",message:`Are you sure you want to delete ${d.id}?`,okText:"Delete",cancelText:"Cancel",size:"small",maxWidth:"380px"})&&f("delete-order",d)},y=d=>{const x=d.payment||[];if(x.length===0)return 0;const M=x.find(S=>S.type===Ft.ECPAY_PAYMENT);return M?M.amount:0},$=d=>d<1e3?d.toString():`${Math.floor(d/1e3)}K`,v=d=>{switch(d.type){case et.PlanShuttle:return $(d.orderPlanShuttleSnapshot.totalAmount-d.orderPlanShuttleSnapshot.prePaymentAmount);case et.PlanCharter:return $(d.orderPlanCharterSnapshot.totalAmount-d.orderPlanCharterSnapshot.prePaymentAmount);case et.PlanEscort:return $(d.orderPlanEscortSnapshot.totalAmount-d.orderPlanEscortSnapshot.prePaymentAmount);case et.PlanMassage:return $(d.orderPlanDragonMassageSnapshot.totalAmount-d.orderPlanDragonMassageSnapshot.prePaymentAmount);case et.PlanTutor:return $(d.orderPlanTutorSnapshot.totalAmount-d.orderPlanTutorSnapshot.prePaymentAmount);default:return"N/A"}},H={[Ft.ECPAY_PAYMENT]:"綠界付款",[Ft.VOIN_PAYMENT]:"VCoin"},P={[Ve.INITIAL]:"未付款",[Ve.COMPLETED]:"付款成功",[Ve.FAILED]:"付款失敗",[Ve.EXPIRED]:"付款逾期",[Ve.REFUND]:"退款"},b={[Ve.INITIAL]:"warning",[Ve.COMPLETED]:"success",[Ve.FAILED]:"danger",[Ve.EXPIRED]:"secondary",[Ve.REFUND]:"warning"},I=d=>{const x=H[d.type],M=P[d.status];return`${x} - ${M}`},U=K(()=>p.value.map(d=>{if(d.type===re.ESCORT)return{...d,planName:c[d.orderPlanEscort.planId],startTime:`${r(d)}
${l(d)}`,orderPlanEscort:{...d.orderPlanEscort}};if(d.type===re.SHUTTLE)return{...d,planName:h[d.orderPlanShuttle.planId],startTime:s(Number(d.orderPlanShuttle.time)),orderPlanEscort:{...d.orderPlanShuttle}};if(d.type===re.CHARTER)return{...d,planName:"包車旅遊",startTime:s(Number(d.orderPlanCharter.time)),orderPlanEscort:{...d.orderPlanCharter}};if(d.type===re.MASSAGE){let x=s(Number(d.orderPlanDragonMassage.time));return d.orderPlanDragonMassage.confirmedTime&&(x=s(Number(d.orderPlanDragonMassage.confirmedTime))),{...d,planName:"龍筋按摩",startTime:x,orderPlanEscort:{...d.orderPlanDragonMassage}}}if(d.type===re.TUTOR){const x=s(Number(d.orderPlanTutor.startTime));return{...d,planName:"越語家教",startTime:x,orderPlanEscort:{...d.orderPlanTutor}}}}));return(d,x)=>{const M=L("VaBadge"),S=L("VaButton"),we=L("VaDataTable"),be=L("VaSelect"),ke=L("VaPagination");return J(),xe(St,null,[o(we,{"sort-by":G(u),"onUpdate:sortBy":x[0]||(x[0]=_=>pa(u)?u.value=_:null),"sorting-order":G(O),"onUpdate:sortingOrder":x[1]||(x[1]=_=>pa(O)?O.value=_:null),columns:G(i),items:U.value,loading:d.$props.loading},{"cell(id)":T(({rowData:_})=>[g("div",_l,ae(_.id),1)]),"cell(username)":T(({rowData:_})=>[g("div",Ll,ae(_.userInfo.firstName),1)]),"cell(status)":T(({rowData:_})=>[g("div",Rl,[o(M,{text:N[_.status],color:k[_.status]},null,8,["text","color"])])]),"cell(payment)":T(({rowData:_})=>[g("div",Wl,[(J(!0),xe(St,null,Xa(_.payment,ie=>(J(),ye(M,{key:ie.id,text:I(ie),color:b[ie.status]},null,8,["text","color"]))),128))])]),"cell(manualOperationStatus)":T(({rowData:_})=>[g("div",Hl,[o(M,{text:A[_.manualOperationStatus],color:w[_.manualOperationStatus]},null,8,["text","color"])])]),"cell(createdAt)":T(({rowData:_})=>[g("div",zl,ae(G(n)(Number(_.createdAt))),1)]),"cell(type)":T(({rowData:_})=>[g("div",Zl,ae(G(a)[_.type]),1)]),"cell(planName)":T(({rowData:_})=>[g("div",Bl,ae(_.planName),1)]),"cell(startTime)":T(({rowData:_})=>[g("div",ql,ae(_.startTime),1)]),"cell(numGuides)":T(({rowData:_})=>{var ie;return[g("div",Gl,ae((ie=_.orderPlanEscort)==null?void 0:ie.numGuides),1)]}),"cell(attendant)":T(({})=>[Yl]),"cell(deposit)":T(({rowData:_})=>[g("div",jl,ae(y(_)),1)]),"cell(finalPayment)":T(({rowData:_})=>[g("div",Jl,ae(v(_)),1)]),"cell(role)":T(({rowData:_})=>[o(M,{text:_.status,color:k[_.status]},null,8,["text","color"])]),"cell(actions)":T(({rowData:_})=>[g("div",Ql,[o(S,{preset:"primary",size:"small",icon:"mso-edit","aria-label":"Edit user",onClick:ie=>d.$emit("edit-order",_)},null,8,["onClick"]),o(S,{preset:"primary",size:"small",icon:"mso-delete",color:"danger","aria-label":"Delete user",onClick:ie=>E(_)},null,8,["onClick"])])]),_:1},8,["sort-by","sorting-order","columns","items","loading"]),g("div",Xl,[g("div",null,[g("b",null,"共"+ae(d.$props.pagination.total)+" 筆資料",1),le(" 每頁筆數 "),o(be,{modelValue:d.$props.pagination.perPage,"onUpdate:modelValue":x[2]||(x[2]=_=>d.$props.pagination.perPage=_),class:"!w-20",options:[10]},null,8,["modelValue"])]),V.value>1?(J(),xe("div",Kl,[o(S,{preset:"secondary",icon:"va-arrow-left","aria-label":"Previous page",disabled:d.$props.pagination.page===1,onClick:x[3]||(x[3]=_=>d.$props.pagination.page--)},null,8,["disabled"]),o(S,{class:"mr-2",preset:"secondary",icon:"va-arrow-right","aria-label":"Next page",disabled:d.$props.pagination.page===V.value,onClick:x[4]||(x[4]=_=>d.$props.pagination.page++)},null,8,["disabled"]),o(ke,{modelValue:d.$props.pagination.page,"onUpdate:modelValue":x[5]||(x[5]=_=>d.$props.pagination.page=_),"buttons-preset":"secondary",pages:V.value,"visible-pages":5,"boundary-links":!1,"direction-links":!1},null,8,["modelValue","pages"])])):Pe("",!0)])],64)}}});const to=ws(eo,[["__scopeId","data-v-d756e30e"]]),ao={class:"self-stretch flex-col justify-start items-start gap-4 flex"},no=g("span",{class:"px-2"},"訂單資訊",-1),so={class:"flex gap-4 flex-col sm:flex-row w-full"},ro={class:"flex gap-4 flex-col sm:flex-row w-full"},lo={class:"flex gap-4 flex-col sm:flex-row w-full"},oo={class:"flex gap-4 flex-col sm:flex-row w-full"},io={class:"flex gap-4 flex-col sm:flex-row w-full"},uo={class:"flex gap-4 flex-col sm:flex-row w-full"},co=g("span",{class:"px-2"},"聯絡資訊",-1),mo={class:"flex gap-4 flex-col sm:flex-row w-full"},fo={class:"flex gap-4 flex-col sm:flex-row w-full"},po={class:"flex gap-4 flex-col sm:flex-row w-full"},ho={class:"flex gap-4 flex-col sm:flex-row w-full"},yo=g("span",{class:"px-2"},"訂單狀態",-1),go=g("span",{class:"px-2"},"結帳資訊",-1),vo={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},wo=Fe({__name:"OrderDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const a=Dt(),{notify:n}=Ye(),{formatDate:s}=Te(),{categorys:r,getServiceDate:l,getServiceDuring:i,getGuideExpect:c,getAttractions:h}=Ce(),m={1:"東方小巴黎",2:"華燈夜生活",3:"西貢河船宴",4:"韓式桑拿趣"},f={[Pt.NORMAL]:"時裝",[Pt.AO_DAI]:"奧黛"},p={[Ut.SCOOTER]:"機車",[Ut.DO_DO_CAR]:"嘟嘟車",[Ut.TAXI]:"TAXI"},u=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],O=t,k={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceDuring:"",numTourists:0,numGuides:0,guideExpect:"",guideDress:"",attractions:"",meetAddress:"",note:"",manualOperationStatus:ee.PENDING,vehicle:"",needHoldHands:""},N=K(()=>{if(!O.order)return k;const $=s(Number(O.order.orderPlanEscort.createdAt));return{id:O.order.id,manualOperationStatus:O.order.manualOperationStatus,createdAt:$,category:r[O.order.type],plan:m[O.order.orderPlanEscort.planId],serviceDate:l(O.order),serviceDuring:i(O.order),numTourists:O.order.orderPlanEscort.numTourists,numGuides:O.order.orderPlanEscort.numGuides,guideExpect:c(O.order),guideDress:f[O.order.orderPlanEscort.guideDress||Pt.NORMAL],attractions:h(O.order),meetAddress:O.order.orderPlanEscort.meetAddress,note:O.order.orderPlanEscort.note,vehicle:p[O.order.orderPlanEscort.vehicle],needHoldHands:O.order.orderPlanEscort.needHoldHands?"是":"否"}}),A=K(()=>{var b,I,U,d,x,M;const $=(b=O.order.userInfo.socialMedia.find(S=>S.type==="line"))==null?void 0:b.accountId,v=(I=O.order.userInfo.socialMedia.find(S=>S.type==="wechat"))==null?void 0:I.accountId,H=(U=O.order.userInfo.socialMedia.find(S=>S.type==="telegram"))==null?void 0:U.accountId,P=(d=O.order.userInfo.socialMedia.find(S=>S.type==="zalo"))==null?void 0:d.accountId;return{firstName:O.order.userInfo.firstName,email:O.order.userInfo.email,phone:(x=O.order.userInfo.phone)==null?void 0:x.phoneNumber,phoneCode:(M=O.order.userInfo.phone)==null?void 0:M.code,lineId:$,wechatId:v,telegramId:H,zaloId:P}}),w=q([]),V=e,W=async()=>{var $;if(w.value.length>0&&(($=O.order.orderPlanEscort.guideAssignedIds)==null?void 0:$.join(""))!==w.value.join("")){const v={orderId:O.order.id,guideIds:w.value};await fe.assignGuidesToOrder(v)}if(N.value.meetAddress!==O.order.orderPlanEscort.meetAddress){const v={orderId:O.order.id,planParams:{meetAddress:N.value.meetAddress}};await fe.updateEscortOrder(v)}fe.updateManualOperationStatus({orderId:O.order.id,manualOperationStatus:N.value.manualOperationStatus}),V("save")},E=K(()=>a.guides.filter($=>$.isActive).map($=>({text:$.name,value:$.id})));Nt(()=>{w.value=O.order.orderPlanEscort.guideAssignedIds||[]});const y=async $=>{if($)try{await navigator.clipboard.writeText($),n({message:`已複製到剪貼簿: ${$}`,duration:3e3})}catch(v){alert(`Failed to copy text: ${v}`)}};return($,v)=>{const H=L("VaDivider"),P=L("VaInput"),b=L("VaSelect"),I=L("VaTextarea"),U=L("VaIcon"),d=L("VaButton"),x=L("VaForm");return J(),ye(x,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:T(({isValid:M})=>[g("div",ao,[o(H,{class:"w-full",orientation:"left"},{default:T(()=>[no]),_:1}),g("div",so,[o(P,{modelValue:N.value.id,"onUpdate:modelValue":v[0]||(v[0]=S=>N.value.id=S),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.createdAt,"onUpdate:modelValue":v[1]||(v[1]=S=>N.value.createdAt=S),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",ro,[o(P,{modelValue:N.value.category,"onUpdate:modelValue":v[2]||(v[2]=S=>N.value.category=S),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.plan,"onUpdate:modelValue":v[3]||(v[3]=S=>N.value.plan=S),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",lo,[o(P,{modelValue:N.value.serviceDate,"onUpdate:modelValue":v[4]||(v[4]=S=>N.value.serviceDate=S),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.serviceDuring,"onUpdate:modelValue":v[5]||(v[5]=S=>N.value.serviceDuring=S),label:"行程時段",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",oo,[o(P,{modelValue:N.value.numTourists,"onUpdate:modelValue":v[6]||(v[6]=S=>N.value.numTourists=S),label:"遊客人數",class:"w-full sm:w-1/2",name:"numTourists",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.numGuides,"onUpdate:modelValue":v[7]||(v[7]=S=>N.value.numGuides=S),label:"導遊人數",class:"w-full sm:w-1/2",name:"numGuides",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",io,[o(P,{modelValue:N.value.guideExpect,"onUpdate:modelValue":v[8]||(v[8]=S=>N.value.guideExpect=S),label:"導遊偏好",class:"w-full sm:w-1/2",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.guideDress,"onUpdate:modelValue":v[9]||(v[9]=S=>N.value.guideDress=S),label:"導遊穿著",class:"w-full sm:w-1/2",name:"guideDress",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",uo,[o(P,{modelValue:N.value.vehicle,"onUpdate:modelValue":v[10]||(v[10]=S=>N.value.vehicle=S),label:"交通工具",class:"w-full sm:w-1/2",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:N.value.needHoldHands,"onUpdate:modelValue":v[11]||(v[11]=S=>N.value.needHoldHands=S),label:"是否牽手",class:"w-full sm:w-1/2",name:"guideDress",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(b,{modelValue:w.value,"onUpdate:modelValue":v[12]||(v[12]=S=>w.value=S),label:"導遊指派",class:"w-full",options:E.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",multiple:""},null,8,["modelValue","options"]),o(P,{modelValue:N.value.attractions,"onUpdate:modelValue":v[13]||(v[13]=S=>N.value.attractions=S),label:"景點偏好",class:"w-full",name:"attractions",readonly:"",preset:"solid"},null,8,["modelValue"]),o(I,{modelValue:N.value.meetAddress,"onUpdate:modelValue":v[14]||(v[14]=S=>N.value.meetAddress=S),label:"會合地址",class:"w-full",name:"meetAddress"},null,8,["modelValue"]),o(I,{modelValue:N.value.note,"onUpdate:modelValue":v[15]||(v[15]=S=>N.value.note=S),label:"訂單備註",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{class:"w-full",orientation:"left"},{default:T(()=>[co]),_:1}),g("div",mo,[o(P,{modelValue:A.value.firstName,"onUpdate:modelValue":v[16]||(v[16]=S=>A.value.firstName=S),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:A.value.email,"onUpdate:modelValue":v[18]||(v[18]=S=>A.value.email=S),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(U,{name:"content_copy",color:"secondary",onClick:v[17]||(v[17]=()=>y(A.value.email))})]),_:1},8,["modelValue"])]),g("div",fo,[o(P,{modelValue:A.value.phoneCode,"onUpdate:modelValue":v[19]||(v[19]=S=>A.value.phoneCode=S),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{modelValue:A.value.phone,"onUpdate:modelValue":v[21]||(v[21]=S=>A.value.phone=S),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(U,{name:"content_copy",color:"secondary",onClick:v[20]||(v[20]=()=>y(A.value.phone))})]),_:1},8,["modelValue"])]),g("div",po,[o(P,{modelValue:A.value.lineId,"onUpdate:modelValue":v[23]||(v[23]=S=>A.value.lineId=S),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[A.value.lineId?{name:"appendInner",fn:T(()=>[o(U,{name:"content_copy",color:"secondary",onClick:v[22]||(v[22]=()=>y(A.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(P,{modelValue:A.value.wechatId,"onUpdate:modelValue":v[25]||(v[25]=S=>A.value.wechatId=S),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[A.value.wechatId?{name:"appendInner",fn:T(()=>[o(U,{name:"content_copy",color:"secondary",onClick:v[24]||(v[24]=()=>y(A.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",ho,[o(P,{modelValue:A.value.telegramId,"onUpdate:modelValue":v[27]||(v[27]=S=>A.value.telegramId=S),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[A.value.telegramId?{name:"appendInner",fn:T(()=>[o(U,{name:"content_copy",color:"secondary",onClick:v[26]||(v[26]=()=>y(A.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(P,{modelValue:A.value.zaloId,"onUpdate:modelValue":v[29]||(v[29]=S=>A.value.zaloId=S),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[A.value.zaloId?{name:"appendInner",fn:T(()=>[o(U,{name:"content_copy",color:"secondary",onClick:v[28]||(v[28]=()=>y(A.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(H,{class:"w-full",orientation:"left"},{default:T(()=>[yo]),_:1}),o(b,{modelValue:N.value.manualOperationStatus,"onUpdate:modelValue":v[30]||(v[30]=S=>N.value.manualOperationStatus=S),label:"操作狀態",class:"w-full",options:u,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(H,{class:"w-full",orientation:"left"},{default:T(()=>[go]),_:1}),g("div",vo,[o(d,{preset:"secondary",color:"secondary",onClick:v[31]||(v[31]=S=>$.$emit("close"))},{default:T(()=>[le("取消")]),_:1}),o(d,{disabled:!M,onClick:W},{default:T(()=>[le(ae(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),Vo=()=>({getStartTime:e=>C.fromMillis(Number(e.orderPlanShuttle.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm")}),xo={class:"self-stretch flex-col justify-start items-start gap-4 flex"},To=g("span",{class:"px-2"},"訂單資訊",-1),So={class:"flex gap-4 flex-col sm:flex-row w-full"},Io={class:"flex gap-4 flex-col sm:flex-row w-full"},bo={class:"flex gap-4 flex-col sm:flex-row w-full"},ko={class:"flex gap-4 flex-col sm:flex-row w-full"},Oo={class:"flex gap-4 flex-col sm:flex-row w-full"},Do={class:"flex gap-4 flex-col sm:flex-row w-full"},No={key:0,class:"flex gap-4 flex-col sm:flex-row w-full"},Eo={class:"flex gap-4 flex-col sm:flex-row w-full"},Mo=g("span",{class:"px-2"},"聯絡資訊",-1),Co={class:"flex gap-4 flex-col sm:flex-row w-full"},Ao={class:"flex gap-4 flex-col sm:flex-row w-full"},$o={class:"flex gap-4 flex-col sm:flex-row w-full"},Uo={class:"flex gap-4 flex-col sm:flex-row w-full"},Po=g("span",{class:"px-2"},"訂單狀態",-1),Fo=g("span",{class:"px-2"},"結帳資訊",-1),_o={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},Lo=Fe({__name:"OrderShuttleDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Ye(),{formatDate:n}=Te(),{categorys:s}=Ce(),{getStartTime:r}=Vo(),l={1:"接機",2:"送機"},i={1:"經濟五座",2:"尊爵五座",3:"經濟七座",4:"商務七座",5:"尊爵七座",6:"商務九座",7:"多人巴士"},c={1:"1郡/3郡/富潤郡/新平郡",2:"7郡/守德市",3:"4郡/5郡/10郡/平盛郡",4:"其他郡（6郡/8郡/11郡/12郡/平新郡/舊邑郡/新富郡）"},h=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],m=t,f={id:-1,manualOperationStatus:ee.PENDING,createdAt:"",category:"",planId:-1,plan:"",cardName:"",areaName:"",serviceDate:"",serviceDuring:"",buyFastPass:"",passengerNumber:0,passengerName:"",largeLuggageAmount:0,smallLuggageAmount:0,flightNumber:"",flightArrivalTime:"",flightType:"",customLocation:"",hotelName:"",note:""},p=K(()=>{if(!m.order)return f;const w=n(Number(m.order.orderPlanShuttle.createdAt));return{id:m.order.id,manualOperationStatus:m.order.manualOperationStatus,createdAt:w,category:s[m.order.type],planId:m.order.orderPlanShuttle.planId,plan:l[m.order.orderPlanShuttle.planId],cardName:i[m.order.orderPlanShuttle.carId],areaName:c[m.order.orderPlanShuttle.areaId],serviceDate:n(Number(m.order.orderPlanShuttle.time)),serviceDuring:r(m.order),buyFastPass:m.order.orderPlanShuttle.buyFastPass?"是":"否",passengerNumber:m.order.orderPlanShuttle.passengerNumber,passengerName:m.order.orderPlanShuttle.passengerName,largeLuggageAmount:m.order.orderPlanShuttle.largeLuggageAmount,smallLuggageAmount:m.order.orderPlanShuttle.smallLuggageAmount,flightNumber:m.order.orderPlanShuttle.flightNumber,flightArrivalTime:m.order.orderPlanShuttle.flightArrivalTime,flightType:m.order.orderPlanShuttle.flightType==="international"?"國際線":"國內線",customLocation:m.order.orderPlanShuttle.customLocation,hotelName:m.order.orderPlanShuttle.hotelName,note:m.order.orderPlanShuttle.note}}),u=K(()=>{var y,$,v,H,P,b;const w=(y=m.order.userInfo.socialMedia.find(I=>I.type==="line"))==null?void 0:y.accountId,V=($=m.order.userInfo.socialMedia.find(I=>I.type==="wechat"))==null?void 0:$.accountId,W=(v=m.order.userInfo.socialMedia.find(I=>I.type==="telegram"))==null?void 0:v.accountId,E=(H=m.order.userInfo.socialMedia.find(I=>I.type==="zalo"))==null?void 0:H.accountId;return{firstName:m.order.userInfo.firstName,email:m.order.userInfo.email,phone:(P=m.order.userInfo.phone)==null?void 0:P.phoneNumber,phoneCode:(b=m.order.userInfo.phone)==null?void 0:b.code,lineId:w,wechatId:V,telegramId:W,zaloId:E}}),O=e,k=async()=>{fe.updateManualOperationStatus({orderId:m.order.id,manualOperationStatus:p.value.manualOperationStatus}),O("save")},N=K(()=>p.value.planId===1);Nt(()=>{});const A=async w=>{if(w)try{await navigator.clipboard.writeText(w),a({message:`已複製到剪貼簿: ${w}`,duration:3e3})}catch(V){alert(`Failed to copy text: ${V}`)}};return(w,V)=>{const W=L("VaDivider"),E=L("VaInput"),y=L("VaTextarea"),$=L("VaIcon"),v=L("VaSelect"),H=L("VaButton"),P=L("VaForm");return J(),ye(P,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:T(({isValid:b})=>[g("div",xo,[o(W,{class:"w-full",orientation:"left"},{default:T(()=>[To]),_:1}),g("div",So,[o(E,{modelValue:p.value.id,"onUpdate:modelValue":V[0]||(V[0]=I=>p.value.id=I),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.createdAt,"onUpdate:modelValue":V[1]||(V[1]=I=>p.value.createdAt=I),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Io,[o(E,{modelValue:p.value.category,"onUpdate:modelValue":V[2]||(V[2]=I=>p.value.category=I),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.plan,"onUpdate:modelValue":V[3]||(V[3]=I=>p.value.plan=I),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",bo,[o(E,{modelValue:p.value.cardName,"onUpdate:modelValue":V[4]||(V[4]=I=>p.value.cardName=I),label:"車款",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.areaName,"onUpdate:modelValue":V[5]||(V[5]=I=>p.value.areaName=I),label:"接送區域",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",ko,[o(E,{modelValue:p.value.serviceDate,"onUpdate:modelValue":V[6]||(V[6]=I=>p.value.serviceDate=I),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.serviceDuring,"onUpdate:modelValue":V[7]||(V[7]=I=>p.value.serviceDuring=I),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Oo,[o(E,{modelValue:p.value.passengerNumber,"onUpdate:modelValue":V[8]||(V[8]=I=>p.value.passengerNumber=I),label:"乘客人數",class:"w-full sm:w-1/2",name:"passengerNumber",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.passengerName,"onUpdate:modelValue":V[9]||(V[9]=I=>p.value.passengerName=I),label:N.value?"舉牌大名":"乘客姓名",class:"w-full sm:w-1/2",name:"passengerName",readonly:"",preset:"solid"},null,8,["modelValue","label"])]),g("div",Do,[o(E,{modelValue:p.value.largeLuggageAmount,"onUpdate:modelValue":V[10]||(V[10]=I=>p.value.largeLuggageAmount=I),label:"大行李",class:"w-full sm:w-1/2",name:"largeLuggageAmount",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.smallLuggageAmount,"onUpdate:modelValue":V[11]||(V[11]=I=>p.value.smallLuggageAmount=I),label:"小行李",class:"w-full sm:w-1/2",name:"smallLuggageAmount",readonly:"",preset:"solid"},null,8,["modelValue"])]),N.value?(J(),xe("div",No,[o(E,{modelValue:p.value.flightNumber,"onUpdate:modelValue":V[12]||(V[12]=I=>p.value.flightNumber=I),label:"航班編號",class:"w-full sm:w-1/2",name:"flightNumber",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.flightArrivalTime,"onUpdate:modelValue":V[13]||(V[13]=I=>p.value.flightArrivalTime=I),label:"航班抵達時間",class:"w-full sm:w-1/2",name:"flightArrivalTime",readonly:"",preset:"solid"},null,8,["modelValue"])])):Pe("",!0),g("div",Eo,[o(E,{modelValue:p.value.flightType,"onUpdate:modelValue":V[14]||(V[14]=I=>p.value.flightType=I),label:N.value?"航班類別":"下車地點",class:"w-full sm:w-1/2",name:"flightType",readonly:"",preset:"solid"},null,8,["modelValue","label"])]),o(y,{modelValue:p.value.customLocation,"onUpdate:modelValue":V[15]||(V[15]=I=>p.value.customLocation=I),label:N.value?"下車地點":"上車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue","label"]),o(y,{modelValue:p.value.hotelName,"onUpdate:modelValue":V[16]||(V[16]=I=>p.value.hotelName=I),label:"飯店名稱",class:"w-full",name:"hotelName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(y,{modelValue:p.value.note,"onUpdate:modelValue":V[17]||(V[17]=I=>p.value.note=I),label:"訂單備註",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{class:"w-full",orientation:"left"},{default:T(()=>[Mo]),_:1}),g("div",Co,[o(E,{modelValue:u.value.firstName,"onUpdate:modelValue":V[18]||(V[18]=I=>u.value.firstName=I),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:u.value.email,"onUpdate:modelValue":V[20]||(V[20]=I=>u.value.email=I),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o($,{name:"content_copy",color:"secondary",onClick:V[19]||(V[19]=()=>A(u.value.email))})]),_:1},8,["modelValue"])]),g("div",Ao,[o(E,{modelValue:u.value.phoneCode,"onUpdate:modelValue":V[21]||(V[21]=I=>u.value.phoneCode=I),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:u.value.phone,"onUpdate:modelValue":V[23]||(V[23]=I=>u.value.phone=I),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o($,{name:"content_copy",color:"secondary",onClick:V[22]||(V[22]=()=>A(u.value.phone))})]),_:1},8,["modelValue"])]),g("div",$o,[o(E,{modelValue:u.value.lineId,"onUpdate:modelValue":V[25]||(V[25]=I=>u.value.lineId=I),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[u.value.lineId?{name:"appendInner",fn:T(()=>[o($,{name:"content_copy",color:"secondary",onClick:V[24]||(V[24]=()=>A(u.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(E,{modelValue:u.value.wechatId,"onUpdate:modelValue":V[27]||(V[27]=I=>u.value.wechatId=I),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[u.value.wechatId?{name:"appendInner",fn:T(()=>[o($,{name:"content_copy",color:"secondary",onClick:V[26]||(V[26]=()=>A(u.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",Uo,[o(E,{modelValue:u.value.telegramId,"onUpdate:modelValue":V[29]||(V[29]=I=>u.value.telegramId=I),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[u.value.telegramId?{name:"appendInner",fn:T(()=>[o($,{name:"content_copy",color:"secondary",onClick:V[28]||(V[28]=()=>A(u.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(E,{modelValue:u.value.zaloId,"onUpdate:modelValue":V[31]||(V[31]=I=>u.value.zaloId=I),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[u.value.zaloId?{name:"appendInner",fn:T(()=>[o($,{name:"content_copy",color:"secondary",onClick:V[30]||(V[30]=()=>A(u.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(W,{class:"w-full",orientation:"left"},{default:T(()=>[Po]),_:1}),o(v,{modelValue:p.value.manualOperationStatus,"onUpdate:modelValue":V[32]||(V[32]=I=>p.value.manualOperationStatus=I),label:"操作狀態",class:"w-full",options:h,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(W,{class:"w-full",orientation:"left"},{default:T(()=>[Fo]),_:1}),g("div",_o,[o(H,{preset:"secondary",color:"secondary",onClick:V[33]||(V[33]=I=>w.$emit("close"))},{default:T(()=>[le("取消")]),_:1}),o(H,{disabled:!b,onClick:k},{default:T(()=>[le(ae(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),Ro=()=>({getStartTime:e=>C.fromMillis(Number(e.orderPlanCharter.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm")}),Wo={class:"self-stretch flex-col justify-start items-start gap-4 flex"},Ho=g("span",{class:"px-2"},"訂單資訊",-1),zo={class:"flex gap-4 flex-col sm:flex-row w-full"},Zo={class:"flex gap-4 flex-col sm:flex-row w-full"},Bo={class:"flex gap-4 flex-col sm:flex-row w-full"},qo={class:"flex gap-4 flex-col sm:flex-row w-full"},Go={class:"flex gap-4 flex-col sm:flex-row w-full"},Yo=g("span",{class:"px-2"},"聯絡資訊",-1),jo={class:"flex gap-4 flex-col sm:flex-row w-full"},Jo={class:"flex gap-4 flex-col sm:flex-row w-full"},Qo={class:"flex gap-4 flex-col sm:flex-row w-full"},Xo={class:"flex gap-4 flex-col sm:flex-row w-full"},Ko=g("span",{class:"px-2"},"訂單狀態",-1),ei=g("span",{class:"px-2"},"結帳資訊",-1),ti={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},ai=Fe({__name:"OrderCharterDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Ye(),{formatDate:n}=Te(),{categorys:s}=Ce(),{getStartTime:r}=Ro(),l={1:"包車旅遊"},i={1:"經濟五座",2:"尊爵五座",3:"經濟七座",4:"商務七座",5:"尊爵七座",6:"商務九座",7:"多人巴士"},c={1:"4hr/50km",2:"4hr/100km",3:"8hr/100km",4:"8hr/200km",5:"10hr/100km",6:"10hr/300km"},h=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],m=t,f={id:-1,manualOperationStatus:"pending",createdAt:"",category:"",plan:"",cardName:"",days:0,packageName:"",serviceDate:"",serviceDuring:"",passengerNumber:0,pickupLocation:"",dropOffLocation:"",travelPlanNote:""},p=K(()=>{if(!m.order)return f;const A=n(Number(m.order.orderPlanCharter.createdAt));return{id:m.order.id,manualOperationStatus:m.order.manualOperationStatus,createdAt:A,category:s[m.order.type],plan:l[m.order.orderPlanCharter.planId],cardName:i[m.order.orderPlanCharter.carId],days:m.order.orderPlanCharter.days,packageName:c[m.order.orderPlanCharter.packageId],serviceDate:n(Number(m.order.orderPlanCharter.time)),serviceDuring:r(m.order),passengerNumber:m.order.orderPlanCharter.passengerNumber,pickupLocation:m.order.orderPlanCharter.pickupLocation,dropOffLocation:m.order.orderPlanCharter.dropOffLocation,travelPlanNote:m.order.orderPlanCharter.travelPlanNote}}),u=K(()=>{var E,y,$,v,H,P;const A=(E=m.order.userInfo.socialMedia.find(b=>b.type==="line"))==null?void 0:E.accountId,w=(y=m.order.userInfo.socialMedia.find(b=>b.type==="wechat"))==null?void 0:y.accountId,V=($=m.order.userInfo.socialMedia.find(b=>b.type==="telegram"))==null?void 0:$.accountId,W=(v=m.order.userInfo.socialMedia.find(b=>b.type==="zalo"))==null?void 0:v.accountId;return{firstName:m.order.userInfo.firstName,email:m.order.userInfo.email,phone:(H=m.order.userInfo.phone)==null?void 0:H.phoneNumber,phoneCode:(P=m.order.userInfo.phone)==null?void 0:P.code,lineId:A,wechatId:w,telegramId:V,zaloId:W}}),O=e,k=async()=>{fe.updateManualOperationStatus({orderId:m.order.id,manualOperationStatus:p.value.manualOperationStatus}),O("save")},N=async A=>{if(A)try{await navigator.clipboard.writeText(A),a({message:`已複製到剪貼簿: ${A}`,duration:3e3})}catch(w){alert(`Failed to copy text: ${w}`)}};return(A,w)=>{const V=L("VaDivider"),W=L("VaInput"),E=L("VaTextarea"),y=L("VaIcon"),$=L("VaSelect"),v=L("VaButton"),H=L("VaForm");return J(),ye(H,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:T(({isValid:P})=>[g("div",Wo,[o(V,{class:"w-full",orientation:"left"},{default:T(()=>[Ho]),_:1}),g("div",zo,[o(W,{modelValue:p.value.id,"onUpdate:modelValue":w[0]||(w[0]=b=>p.value.id=b),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:p.value.createdAt,"onUpdate:modelValue":w[1]||(w[1]=b=>p.value.createdAt=b),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Zo,[o(W,{modelValue:p.value.category,"onUpdate:modelValue":w[2]||(w[2]=b=>p.value.category=b),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:p.value.plan,"onUpdate:modelValue":w[3]||(w[3]=b=>p.value.plan=b),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Bo,[o(W,{modelValue:p.value.cardName,"onUpdate:modelValue":w[4]||(w[4]=b=>p.value.cardName=b),label:"車款",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:p.value.packageName,"onUpdate:modelValue":w[5]||(w[5]=b=>p.value.packageName=b),label:"用車方案",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",qo,[o(W,{modelValue:p.value.serviceDate,"onUpdate:modelValue":w[6]||(w[6]=b=>p.value.serviceDate=b),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:p.value.serviceDuring,"onUpdate:modelValue":w[7]||(w[7]=b=>p.value.serviceDuring=b),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Go,[o(W,{modelValue:p.value.days,"onUpdate:modelValue":w[8]||(w[8]=b=>p.value.days=b),label:"天數",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:p.value.passengerNumber,"onUpdate:modelValue":w[9]||(w[9]=b=>p.value.passengerNumber=b),label:"乘客人數",class:"w-full sm:w-1/2",name:"numTourists",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(E,{modelValue:p.value.pickupLocation,"onUpdate:modelValue":w[10]||(w[10]=b=>p.value.pickupLocation=b),label:"上車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.dropOffLocation,"onUpdate:modelValue":w[11]||(w[11]=b=>p.value.dropOffLocation=b),label:"下車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(E,{modelValue:p.value.travelPlanNote,"onUpdate:modelValue":w[12]||(w[12]=b=>p.value.travelPlanNote=b),label:"預計行程路線",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(V,{class:"w-full",orientation:"left"},{default:T(()=>[Yo]),_:1}),g("div",jo,[o(W,{modelValue:u.value.firstName,"onUpdate:modelValue":w[13]||(w[13]=b=>u.value.firstName=b),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:u.value.email,"onUpdate:modelValue":w[15]||(w[15]=b=>u.value.email=b),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(y,{name:"content_copy",color:"secondary",onClick:w[14]||(w[14]=()=>N(u.value.email))})]),_:1},8,["modelValue"])]),g("div",Jo,[o(W,{modelValue:u.value.phoneCode,"onUpdate:modelValue":w[16]||(w[16]=b=>u.value.phoneCode=b),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:u.value.phone,"onUpdate:modelValue":w[18]||(w[18]=b=>u.value.phone=b),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(y,{name:"content_copy",color:"secondary",onClick:w[17]||(w[17]=()=>N(u.value.phone))})]),_:1},8,["modelValue"])]),g("div",Qo,[o(W,{modelValue:u.value.lineId,"onUpdate:modelValue":w[20]||(w[20]=b=>u.value.lineId=b),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[u.value.lineId?{name:"appendInner",fn:T(()=>[o(y,{name:"content_copy",color:"secondary",onClick:w[19]||(w[19]=()=>N(u.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(W,{modelValue:u.value.wechatId,"onUpdate:modelValue":w[22]||(w[22]=b=>u.value.wechatId=b),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[u.value.wechatId?{name:"appendInner",fn:T(()=>[o(y,{name:"content_copy",color:"secondary",onClick:w[21]||(w[21]=()=>N(u.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",Xo,[o(W,{modelValue:u.value.telegramId,"onUpdate:modelValue":w[24]||(w[24]=b=>u.value.telegramId=b),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[u.value.telegramId?{name:"appendInner",fn:T(()=>[o(y,{name:"content_copy",color:"secondary",onClick:w[23]||(w[23]=()=>N(u.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(W,{modelValue:u.value.zaloId,"onUpdate:modelValue":w[26]||(w[26]=b=>u.value.zaloId=b),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[u.value.zaloId?{name:"appendInner",fn:T(()=>[o(y,{name:"content_copy",color:"secondary",onClick:w[25]||(w[25]=()=>N(u.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(V,{class:"w-full",orientation:"left"},{default:T(()=>[Ko]),_:1}),o($,{modelValue:p.value.manualOperationStatus,"onUpdate:modelValue":w[27]||(w[27]=b=>p.value.manualOperationStatus=b),label:"操作狀態",class:"w-full",options:h,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(V,{class:"w-full",orientation:"left"},{default:T(()=>[ei]),_:1}),g("div",ti,[o(v,{preset:"secondary",color:"secondary",onClick:w[28]||(w[28]=b=>A.$emit("close"))},{default:T(()=>[le("取消")]),_:1}),o(v,{disabled:!P,onClick:k},{default:T(()=>[le(ae(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),{formatDate:ni}=Te(),si=()=>q({page:1,perPage:10,total:0}),ri=()=>q({sortBy:"createdAt",sortingOrder:null}),li=()=>q({isActive:!0,search:""}),oi=t=>{const e=q(!1),a=q([]),{filters:n=li(),sorting:s=ri(),pagination:r=si()}=t||{},l=async()=>{e.value=!0;const f={...G(n),sortBy:s.value.sortBy,sortOrder:s.value.sortingOrder,offset:(r.value.page-1)*r.value.perPage,limit:r.value.perPage,...n.value.isActive&&{excludeStatus:"initial"},...!n.value.isActive&&{status:"initial"}},{data:p}=await fe.getOrders(f);a.value=p.data;const u={page:r.value.page,perPage:10,total:p.total};i(()=>{r.value=u}),e.value=!1},{ignoreUpdates:i}=ea([r,s],l,{deep:!0});return ta(n,()=>{r.value.page=1,l()},{deep:!0}),l(),{isLoading:e,filters:n,sorting:s,pagination:r,orders:a,fetch:l,getServiceDate:f=>ni(Number(f.orderPlanDragonMassage.time)),getStartTime:f=>C.fromMillis(Number(f.orderPlanDragonMassage.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),getStartTime2:f=>C.fromMillis(Number(f.orderPlanDragonMassage.secondTime),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),async add(f){console.log("add order",f)},async update(f){console.log("update order",f)},async remove(f){console.log("remove order",f)}}},ii={class:"self-stretch flex-col justify-start items-start gap-4 flex"},ui=g("span",{class:"px-2"},"訂單資訊",-1),di={class:"flex gap-4 flex-col sm:flex-row w-full"},ci={class:"flex gap-4 flex-col sm:flex-row w-full"},mi={class:"flex gap-4 flex-col sm:flex-row w-full"},fi={class:"flex gap-4 flex-col sm:flex-row w-full"},pi={class:"flex gap-4 flex-col sm:flex-row w-full"},hi={class:"flex gap-4 flex-col sm:flex-row w-full"},yi={key:0,class:"w-full"},gi=g("div",{class:"mb-2 text-sm font-medium text-gray-700"},"旅店圖片",-1),vi={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},wi=["onClick"],Vi=["src","alt"],xi=g("span",{class:"px-2"},"管理確認區",-1),Ti={class:"w-full"},Si={key:0,class:"w-full mt-4"},Ii={class:"flex gap-4 flex-col sm:flex-row w-full"},bi=g("div",{class:"text-sm text-gray-600 mt-1"},"* 時間將以越南時區保存",-1),ki=g("span",{class:"px-2"},"訂單狀態",-1),Oi=g("span",{class:"px-2"},"聯絡資訊",-1),Di={class:"flex gap-4 flex-col sm:flex-row w-full"},Ni={class:"flex gap-4 flex-col sm:flex-row w-full"},Ei={class:"flex gap-4 flex-col sm:flex-row w-full"},Mi={class:"flex gap-4 flex-col sm:flex-row w-full"},Ci=g("span",{class:"px-2"},"結帳資訊",-1),Ai={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},$i=Fe({__name:"OrderMassageDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Ye(),{formatDate:n,formatDateV:s}=Te(),{categorys:r}=Ce(),{getStartTime:l,getStartTime2:i}=oi(),c=Dt(),h={1:"龍筋按摩"},m=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],f=t,p={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceStartTime:"",note:"",serviceDate2:"",serviceStartTime2:"",hotelAddress:"",needHotelBooking:"",manualOperationStatus:ee.PENDING,hotelImageUrls:[],confirmedTherapistId:null,selectedTherapists:"",confirmedTime:""},u=K(()=>{if(!f.order)return p;const U=n(Number(f.order.orderPlanDragonMassage.createdAt));return{id:f.order.id,manualOperationStatus:f.order.manualOperationStatus,createdAt:U,category:r[f.order.type],plan:h[f.order.orderPlanDragonMassage.planId],selectedTherapists:O(f.order.orderPlanDragonMassage.selectedTherapists||[]),serviceDate:s(Number(f.order.orderPlanDragonMassage.time)),serviceStartTime:l(f.order),serviceDate2:s(Number(f.order.orderPlanDragonMassage.secondTime)),serviceStartTime2:i(f.order),hotelAddress:f.order.orderPlanDragonMassage.hotelAddress,note:f.order.orderPlanDragonMassage.note,needHotelBooking:f.order.orderPlanDragonMassage.needHotelBooking?"是":"否",hotelImageUrls:f.order.orderPlanDragonMassage.hotelImageUrls||[],confirmedTherapistId:f.order.orderPlanDragonMassage.confirmedTherapistId||null,confirmedTime:f.order.orderPlanDragonMassage.confirmedTime||""}}),O=U=>U.map(d=>{const x=c.therapists.find(M=>M.id===d);return x?`${d}.${x.name}`:`未知導遊(${d})`}).join(", "),k=K(()=>{var S,we,be,ke,_,ie;const U=(S=f.order.userInfo.socialMedia.find(Se=>Se.type==="line"))==null?void 0:S.accountId,d=(we=f.order.userInfo.socialMedia.find(Se=>Se.type==="wechat"))==null?void 0:we.accountId,x=(be=f.order.userInfo.socialMedia.find(Se=>Se.type==="telegram"))==null?void 0:be.accountId,M=(ke=f.order.userInfo.socialMedia.find(Se=>Se.type==="zalo"))==null?void 0:ke.accountId;return{firstName:f.order.userInfo.firstName,email:f.order.userInfo.email,phone:(_=f.order.userInfo.phone)==null?void 0:_.phoneNumber,phoneCode:(ie=f.order.userInfo.phone)==null?void 0:ie.code,lineId:U,wechatId:d,telegramId:x,zaloId:M}}),N=e,A=async()=>{if(f.order.manualOperationStatus!==u.value.manualOperationStatus&&await fe.updateManualOperationStatus({orderId:f.order.id,manualOperationStatus:u.value.manualOperationStatus}),f.order.orderPlanDragonMassage.confirmedTherapistId!==b.value||I.value!==f.order.orderPlanDragonMassage.confirmedTime){let U=I.value;if(I.value==="custom"&&y.value&&$.value){const d=C.fromJSDate(y.value).toFormat("yyyy-MM-dd"),x=C.fromJSDate($.value).toFormat("HH:mm"),M=`${d} ${x}`;U=C.fromFormat(M,"yyyy-MM-dd HH:mm",{zone:"Asia/Ho_Chi_Minh"}).toMillis().toString()}await fe.updateMassageOrder({orderId:f.order.id,planParams:{confirmedTherapistId:b.value,confirmedTime:U}})}N("save")};Nt(()=>{b.value=u.value.confirmedTherapistId||null;const U=u.value.confirmedTime||"";if(U)if(U===f.order.orderPlanDragonMassage.time||U===f.order.orderPlanDragonMassage.secondTime)I.value=U;else{I.value="custom";const x=C.fromMillis(Number(U),{zone:"Asia/Ho_Chi_Minh"}),M=x.year,S=x.month-1,we=x.day,be=x.hour,ke=x.minute;y.value=new Date(M,S,we),$.value=new Date(2e3,0,1,be,ke)}});const w=async U=>{if(U)try{await navigator.clipboard.writeText(U),a({message:`已複製到剪貼簿: ${U}`,duration:3e3})}catch(d){alert(`Failed to copy text: ${d}`)}},V=U=>{window.open(U,"_blank")},W=U=>{const d=U.target;d&&(d.style.display="none")},E=K(()=>{if(!f.order)return[];const U=[],{formatDateTimeV:d}=Te();f.order.orderPlanDragonMassage.time&&U.push({text:`時間 1: ${d(Number(f.order.orderPlanDragonMassage.time))}`,value:f.order.orderPlanDragonMassage.time}),f.order.orderPlanDragonMassage.secondTime&&U.push({text:`時間 2: ${d(Number(f.order.orderPlanDragonMassage.secondTime))}`,value:f.order.orderPlanDragonMassage.secondTime});let x="自訂時間";if(I.value==="custom"&&y.value&&$.value){const M=C.fromJSDate(y.value).toFormat("yyyy-MM-dd"),S=C.fromJSDate($.value).toFormat("HH:mm");x=`自訂時間: ${M} ${S}`}return U.push({text:x,value:"custom"}),U}),y=q(new Date),$=q(new Date),v=K(()=>I.value==="custom"),H=()=>{},P=K(()=>c.therapists.filter(U=>U.isActive).map(U=>({text:`${U.number}.${U.name}`,value:U.id}))),b=q(null),I=q("");return(U,d)=>{const x=L("VaDivider"),M=L("VaInput"),S=L("VaTextarea"),we=L("VaSelect"),be=L("VaDateInput"),ke=L("VaTimeInput"),_=L("VaIcon"),ie=L("VaButton"),Se=L("VaForm");return J(),ye(Se,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:T(({isValid:fs})=>[g("div",ii,[o(x,{class:"w-full",orientation:"left"},{default:T(()=>[ui]),_:1}),g("div",di,[o(M,{modelValue:u.value.id,"onUpdate:modelValue":d[0]||(d[0]=F=>u.value.id=F),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(M,{modelValue:u.value.createdAt,"onUpdate:modelValue":d[1]||(d[1]=F=>u.value.createdAt=F),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",ci,[o(M,{modelValue:u.value.category,"onUpdate:modelValue":d[2]||(d[2]=F=>u.value.category=F),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(M,{modelValue:u.value.plan,"onUpdate:modelValue":d[3]||(d[3]=F=>u.value.plan=F),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",mi,[o(M,{modelValue:u.value.serviceDate,"onUpdate:modelValue":d[4]||(d[4]=F=>u.value.serviceDate=F),label:"預約日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(M,{modelValue:u.value.serviceStartTime,"onUpdate:modelValue":d[5]||(d[5]=F=>u.value.serviceStartTime=F),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",fi,[o(M,{modelValue:u.value.serviceDate2,"onUpdate:modelValue":d[6]||(d[6]=F=>u.value.serviceDate2=F),label:"預約日期2",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(M,{modelValue:u.value.serviceStartTime2,"onUpdate:modelValue":d[7]||(d[7]=F=>u.value.serviceStartTime2=F),label:"起始時間2",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",pi,[o(M,{modelValue:u.value.selectedTherapists,"onUpdate:modelValue":d[8]||(d[8]=F=>u.value.selectedTherapists=F),label:"技師偏好",class:"w-full",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",hi,[o(M,{modelValue:u.value.needHotelBooking,"onUpdate:modelValue":d[9]||(d[9]=F=>u.value.needHotelBooking=F),label:"代訂旅店",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(S,{modelValue:u.value.hotelAddress,"onUpdate:modelValue":d[10]||(d[10]=F=>u.value.hotelAddress=F),label:"旅店地址",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),u.value.hotelImageUrls&&u.value.hotelImageUrls.length>0?(J(),xe("div",yi,[gi,g("div",vi,[(J(!0),xe(St,null,Xa(u.value.hotelImageUrls,(F,ma)=>(J(),xe("div",{key:ma,class:"relative aspect-square overflow-hidden rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:hu=>V(F)},[g("img",{src:F,alt:`旅店圖片 ${ma+1}`,class:"w-full h-full object-cover",loading:"lazy",onError:W},null,40,Vi)],8,wi))),128))])])):Pe("",!0),o(S,{modelValue:u.value.note,"onUpdate:modelValue":d[11]||(d[11]=F=>u.value.note=F),label:"訂單備註",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(x,{class:"w-full",orientation:"left"},{default:T(()=>[xi]),_:1}),g("div",Ti,[o(we,{modelValue:b.value,"onUpdate:modelValue":d[12]||(d[12]=F=>b.value=F),label:"龍筋老師指派",class:"w-full",options:P.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",placeholder:"未指派"},null,8,["modelValue","options"]),o(we,{modelValue:I.value,"onUpdate:modelValue":d[13]||(d[13]=F=>I.value=F),label:"時間確認",class:"w-full mt-4",options:E.value,name:"confirmedTime","text-by":"text","track-by":"value","value-by":"value",placeholder:"請選擇確認時間",clearable:""},null,8,["modelValue","options"]),v.value?(J(),xe("div",Si,[g("div",Ii,[o(be,{modelValue:y.value,"onUpdate:modelValue":d[14]||(d[14]=F=>y.value=F),label:"自訂日期",class:"w-full sm:w-1/2",placeholder:"請選擇日期",clearable:"",onInput:H},null,8,["modelValue"]),o(ke,{modelValue:$.value,"onUpdate:modelValue":d[15]||(d[15]=F=>$.value=F),label:"自訂時間",class:"w-full sm:w-1/2",placeholder:"請選擇時間",clearable:"",onInput:H},null,8,["modelValue"])]),bi])):Pe("",!0)]),o(x,{class:"w-full",orientation:"left"},{default:T(()=>[ki]),_:1}),o(we,{modelValue:u.value.manualOperationStatus,"onUpdate:modelValue":d[16]||(d[16]=F=>u.value.manualOperationStatus=F),label:"操作狀態",class:"w-full",options:m,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(x,{class:"w-full",orientation:"left"},{default:T(()=>[Oi]),_:1}),g("div",Di,[o(M,{modelValue:k.value.firstName,"onUpdate:modelValue":d[17]||(d[17]=F=>k.value.firstName=F),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(M,{modelValue:k.value.email,"onUpdate:modelValue":d[19]||(d[19]=F=>k.value.email=F),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(_,{name:"content_copy",color:"secondary",onClick:d[18]||(d[18]=()=>w(k.value.email))})]),_:1},8,["modelValue"])]),g("div",Ni,[o(M,{modelValue:k.value.phoneCode,"onUpdate:modelValue":d[20]||(d[20]=F=>k.value.phoneCode=F),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(M,{modelValue:k.value.phone,"onUpdate:modelValue":d[22]||(d[22]=F=>k.value.phone=F),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(_,{name:"content_copy",color:"secondary",onClick:d[21]||(d[21]=()=>w(k.value.phone))})]),_:1},8,["modelValue"])]),g("div",Ei,[o(M,{modelValue:k.value.lineId,"onUpdate:modelValue":d[24]||(d[24]=F=>k.value.lineId=F),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[k.value.lineId?{name:"appendInner",fn:T(()=>[o(_,{name:"content_copy",color:"secondary",onClick:d[23]||(d[23]=()=>w(k.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(M,{modelValue:k.value.wechatId,"onUpdate:modelValue":d[26]||(d[26]=F=>k.value.wechatId=F),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[k.value.wechatId?{name:"appendInner",fn:T(()=>[o(_,{name:"content_copy",color:"secondary",onClick:d[25]||(d[25]=()=>w(k.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",Mi,[o(M,{modelValue:k.value.telegramId,"onUpdate:modelValue":d[28]||(d[28]=F=>k.value.telegramId=F),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[k.value.telegramId?{name:"appendInner",fn:T(()=>[o(_,{name:"content_copy",color:"secondary",onClick:d[27]||(d[27]=()=>w(k.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(M,{modelValue:k.value.zaloId,"onUpdate:modelValue":d[30]||(d[30]=F=>k.value.zaloId=F),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[k.value.zaloId?{name:"appendInner",fn:T(()=>[o(_,{name:"content_copy",color:"secondary",onClick:d[29]||(d[29]=()=>w(k.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(x,{class:"w-full",orientation:"left"},{default:T(()=>[Ci]),_:1}),g("div",Ai,[o(ie,{preset:"secondary",color:"secondary",onClick:d[31]||(d[31]=F=>U.$emit("close"))},{default:T(()=>[le("取消")]),_:1}),o(ie,{disabled:!fs,onClick:A},{default:T(()=>[le(ae(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),{formatDate:Ui}=Te(),Pi=()=>q({page:1,perPage:10,total:0}),Fi=()=>q({sortBy:"createdAt",sortingOrder:null}),_i=()=>q({isActive:!0,search:""}),Li=t=>{const e=q(!1),a=q([]),{filters:n=_i(),sorting:s=Fi(),pagination:r=Pi()}=t||{},l=async()=>{e.value=!0;const m={...G(n),sortBy:s.value.sortBy,sortOrder:s.value.sortingOrder,offset:(r.value.page-1)*r.value.perPage,limit:r.value.perPage,...n.value.isActive&&{excludeStatus:"initial"},...!n.value.isActive&&{status:"initial"}},{data:f}=await fe.getOrders(m);a.value=f.data;const p={page:r.value.page,perPage:10,total:f.total};i(()=>{r.value=p}),e.value=!1},{ignoreUpdates:i}=ea([r,s],l,{deep:!0});return ta(n,()=>{r.value.page=1,l()},{deep:!0}),l(),{isLoading:e,filters:n,sorting:s,pagination:r,orders:a,fetch:l,getServiceDate:m=>Ui(Number(m.orderPlanTutor.startTime)),getStartTime:m=>C.fromMillis(Number(m.orderPlanTutor.startTime),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),async add(m){console.log("add order",m)},async update(m){console.log("update order",m)},async remove(m){console.log("remove order",m)},async teacherConfirm({orderId:m,teacherId:f}){fe.post(`/plan/tutor/order/${m}/teacher/confirm`,{teacherId:f})}}},Ri={class:"self-stretch flex-col justify-start items-start gap-4 flex"},Wi=g("span",{class:"px-2"},"訂單資訊",-1),Hi={class:"flex gap-4 flex-col sm:flex-row w-full"},zi={class:"flex gap-4 flex-col sm:flex-row w-full"},Zi={class:"flex gap-4 flex-col sm:flex-row w-full"},Bi={class:"flex gap-4 flex-col sm:flex-row w-full"},qi=g("span",{class:"px-2"},"管理確認區",-1),Gi={class:"w-full"},Yi=g("span",{class:"px-2"},"訂單狀態",-1),ji=g("span",{class:"px-2"},"聯絡資訊",-1),Ji={class:"flex gap-4 flex-col sm:flex-row w-full"},Qi={class:"flex gap-4 flex-col sm:flex-row w-full"},Xi={class:"flex gap-4 flex-col sm:flex-row w-full"},Ki={class:"flex gap-4 flex-col sm:flex-row w-full"},eu=g("span",{class:"px-2"},"結帳資訊",-1),tu={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},au=Fe({__name:"OrderTutorDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(t,{emit:e}){const{notify:a}=Ye(),{formatDate:n,formatDateV:s}=Te(),{categorys:r}=Ce(),{getStartTime:l,teacherConfirm:i}=Li(),c=Dt(),h={1:"越語家教"},m=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],f=t,p={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceStartTime:"",note:"",hotelAddress:"",needHotelBooking:"",manualOperationStatus:ee.PENDING,hotelImageUrls:[],confirmedTeacherId:null,selectedTeachers:""},u=K(()=>{if(!f.order)return p;const E=n(Number(f.order.orderPlanTutor.createdAt));return{id:f.order.id,manualOperationStatus:f.order.manualOperationStatus,createdAt:E,category:r[f.order.type],plan:h[f.order.orderPlanTutor.planId],selectedTeachers:O(f.order.orderPlanTutor.teachers||[]),serviceDate:s(Number(f.order.orderPlanTutor.startTime)),serviceStartTime:l(f.order),hotelAddress:f.order.orderPlanTutor.address,confirmedTeacherId:f.order.orderPlanTutor.confirmedTeacherId||null}}),O=E=>E.map(y=>`${y.number}`).join(", "),k=K(()=>{var H,P,b,I,U,d;const E=(H=f.order.userInfo.socialMedia.find(x=>x.type==="line"))==null?void 0:H.accountId,y=(P=f.order.userInfo.socialMedia.find(x=>x.type==="wechat"))==null?void 0:P.accountId,$=(b=f.order.userInfo.socialMedia.find(x=>x.type==="telegram"))==null?void 0:b.accountId,v=(I=f.order.userInfo.socialMedia.find(x=>x.type==="zalo"))==null?void 0:I.accountId;return{firstName:f.order.userInfo.firstName,email:f.order.userInfo.email,phone:(U=f.order.userInfo.phone)==null?void 0:U.phoneNumber,phoneCode:(d=f.order.userInfo.phone)==null?void 0:d.code,lineId:E,wechatId:y,telegramId:$,zaloId:v}}),N=e,A=async()=>{if(f.order.manualOperationStatus!==u.value.manualOperationStatus&&await fe.updateManualOperationStatus({orderId:f.order.id,manualOperationStatus:u.value.manualOperationStatus}),f.order.orderPlanTutor.confirmedTeacherId!==W.value){if(!W.value)return;await i({orderId:f.order.id,teacherId:W.value})}N("save")};Nt(()=>{W.value=u.value.confirmedTeacherId||null});const w=async E=>{if(E)try{await navigator.clipboard.writeText(E),a({message:`已複製到剪貼簿: ${E}`,duration:3e3})}catch(y){alert(`Failed to copy text: ${y}`)}},V=K(()=>c.teachers.filter(E=>E.isActive).map(E=>({text:`${E.number}`,value:E.id}))),W=q(null);return(E,y)=>{const $=L("VaDivider"),v=L("VaInput"),H=L("VaTextarea"),P=L("VaSelect"),b=L("VaIcon"),I=L("VaButton"),U=L("VaForm");return J(),ye(U,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:T(({isValid:d})=>[g("div",Ri,[o($,{class:"w-full",orientation:"left"},{default:T(()=>[Wi]),_:1}),g("div",Hi,[o(v,{modelValue:u.value.id,"onUpdate:modelValue":y[0]||(y[0]=x=>u.value.id=x),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(v,{modelValue:u.value.createdAt,"onUpdate:modelValue":y[1]||(y[1]=x=>u.value.createdAt=x),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",zi,[o(v,{modelValue:u.value.category,"onUpdate:modelValue":y[2]||(y[2]=x=>u.value.category=x),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(v,{modelValue:u.value.plan,"onUpdate:modelValue":y[3]||(y[3]=x=>u.value.plan=x),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Zi,[o(v,{modelValue:u.value.serviceDate,"onUpdate:modelValue":y[4]||(y[4]=x=>u.value.serviceDate=x),label:"預約日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(v,{modelValue:u.value.serviceStartTime,"onUpdate:modelValue":y[5]||(y[5]=x=>u.value.serviceStartTime=x),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Bi,[o(v,{modelValue:u.value.selectedTeachers,"onUpdate:modelValue":y[6]||(y[6]=x=>u.value.selectedTeachers=x),label:"老師偏好",class:"w-full",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(H,{modelValue:u.value.hotelAddress,"onUpdate:modelValue":y[7]||(y[7]=x=>u.value.hotelAddress=x),label:"上課地址",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o($,{class:"w-full",orientation:"left"},{default:T(()=>[qi]),_:1}),g("div",Gi,[o(P,{modelValue:W.value,"onUpdate:modelValue":y[8]||(y[8]=x=>W.value=x),label:"家教老師指派",class:"w-full",options:V.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",placeholder:"未指派"},null,8,["modelValue","options"])]),o($,{class:"w-full",orientation:"left"},{default:T(()=>[Yi]),_:1}),o(P,{modelValue:u.value.manualOperationStatus,"onUpdate:modelValue":y[9]||(y[9]=x=>u.value.manualOperationStatus=x),label:"操作狀態",class:"w-full",options:m,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o($,{class:"w-full",orientation:"left"},{default:T(()=>[ji]),_:1}),g("div",Ji,[o(v,{modelValue:k.value.firstName,"onUpdate:modelValue":y[10]||(y[10]=x=>k.value.firstName=x),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(v,{modelValue:k.value.email,"onUpdate:modelValue":y[12]||(y[12]=x=>k.value.email=x),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(b,{name:"content_copy",color:"secondary",onClick:y[11]||(y[11]=()=>w(k.value.email))})]),_:1},8,["modelValue"])]),g("div",Qi,[o(v,{modelValue:k.value.phoneCode,"onUpdate:modelValue":y[13]||(y[13]=x=>k.value.phoneCode=x),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(v,{modelValue:k.value.phone,"onUpdate:modelValue":y[15]||(y[15]=x=>k.value.phone=x),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:T(()=>[o(b,{name:"content_copy",color:"secondary",onClick:y[14]||(y[14]=()=>w(k.value.phone))})]),_:1},8,["modelValue"])]),g("div",Xi,[o(v,{modelValue:k.value.lineId,"onUpdate:modelValue":y[17]||(y[17]=x=>k.value.lineId=x),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[k.value.lineId?{name:"appendInner",fn:T(()=>[o(b,{name:"content_copy",color:"secondary",onClick:y[16]||(y[16]=()=>w(k.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(v,{modelValue:k.value.wechatId,"onUpdate:modelValue":y[19]||(y[19]=x=>k.value.wechatId=x),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[k.value.wechatId?{name:"appendInner",fn:T(()=>[o(b,{name:"content_copy",color:"secondary",onClick:y[18]||(y[18]=()=>w(k.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",Ki,[o(v,{modelValue:k.value.telegramId,"onUpdate:modelValue":y[21]||(y[21]=x=>k.value.telegramId=x),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[k.value.telegramId?{name:"appendInner",fn:T(()=>[o(b,{name:"content_copy",color:"secondary",onClick:y[20]||(y[20]=()=>w(k.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(v,{modelValue:k.value.zaloId,"onUpdate:modelValue":y[23]||(y[23]=x=>k.value.zaloId=x),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[k.value.zaloId?{name:"appendInner",fn:T(()=>[o(b,{name:"content_copy",color:"secondary",onClick:y[22]||(y[22]=()=>w(k.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o($,{class:"w-full",orientation:"left"},{default:T(()=>[eu]),_:1}),g("div",tu,[o(I,{preset:"secondary",color:"secondary",onClick:y[24]||(y[24]=x=>E.$emit("close"))},{default:T(()=>[le("取消")]),_:1}),o(I,{disabled:!d,onClick:A},{default:T(()=>[le(ae(t.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),nu=g("h1",{class:"page-title"},"訂單管理",-1),su={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between"},ru={class:"flex flex-col md:flex-row gap-2 justify-start"},lu={class:"va-h5"},ou=g("h1",{class:"va-h5"},"自訂訂單",-1),iu={class:"self-stretch flex-col justify-start items-start gap-4 flex"},uu=g("span",{class:"px-2"},"訂單資訊",-1),du={class:"flex gap-4 flex-col sm:flex-row w-full"},cu={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center mt-4"},mu={key:0,class:"w-full mt-4"},fu=g("span",{class:"px-2"},"生成的 URL",-1),pu={class:"flex gap-2 w-full"},xu=Fe({__name:"OrdersPage",setup(t){const e=q(!1),a=q(!1),{orders:n,isLoading:s,filters:r,sorting:l,pagination:i,...c}=Ce(),h=q(null),m=E=>{h.value=E,e.value=!0},f=()=>{a.value=!0},{init:p}=Ye(),u=q({amount:"",note:"",remark:""}),O=q(""),k=async()=>{try{const E={amount:Number(u.value.amount)||0,note:u.value.note,remark:u.value.remark},y=JSON.stringify(E),H=`https://dev.vnhappy7.com/order/quote?d=${Es.encodeURI(y)}`;O.value=H,p({message:"URL 已生成",color:"success"})}catch{p({message:"生成 URL 失敗",color:"danger"})}},N=async()=>{try{await navigator.clipboard.writeText(O.value),p({message:"URL 已複製到剪貼簿",color:"success"})}catch{p({message:"複製失敗",color:"danger"})}},A=async()=>{c.fetch()},w=async E=>{await c.remove(E),p({message:`${E.id} has been deleted`,color:"success"})},V=q(),W=async E=>{E()};return(E,y)=>{const $=L("VaButtonToggle"),v=L("VaIcon"),H=L("VaInput"),P=L("VaButton"),b=L("VaCardContent"),I=L("VaCard"),U=L("VaDivider"),d=L("VaTextarea"),x=L("VaForm");return J(),xe(St,null,[nu,o(I,null,{default:T(()=>[o(b,null,{default:T(()=>[g("div",su,[g("div",ru,[o($,{modelValue:G(r).isActive,"onUpdate:modelValue":y[0]||(y[0]=M=>G(r).isActive=M),color:"background-element","border-color":"background-element",options:[{label:"訂單",value:!0},{label:"草稿",value:!1}]},null,8,["modelValue"]),o(H,{modelValue:G(r).search,"onUpdate:modelValue":y[1]||(y[1]=M=>G(r).search=M),placeholder:"Search"},{prependInner:T(()=>[o(v,{name:"search",color:"secondary",size:"small"})]),_:1},8,["modelValue"])]),o(P,{onClick:f},{default:T(()=>[le("新增自訂訂單")]),_:1})]),o(to,{"sort-by":G(l).sortBy,"onUpdate:sortBy":y[2]||(y[2]=M=>G(l).sortBy=M),"sorting-order":G(l).sortingOrder,"onUpdate:sortingOrder":y[3]||(y[3]=M=>G(l).sortingOrder=M),orders:G(n),loading:G(s),pagination:G(i),onEditOrder:m,onDeleteUser:w},null,8,["sort-by","sorting-order","orders","loading","pagination"])]),_:1})]),_:1}),o(G(ha),{modelValue:e.value,"onUpdate:modelValue":y[4]||(y[4]=M=>e.value=M),size:"small","mobile-fullscreen":"","close-button":"","hide-default-actions":"","before-cancel":W},{default:T(({cancel:M,ok:S})=>[g("h1",lu,"訂單編號 "+ae(h.value.id),1),h.value.type===G(re).ESCORT?(J(),ye(wo,{key:0,ref_key:"editFormRef",ref:V,order:h.value,"save-button-label":"儲存",onClose:M,onSave:()=>{A(),S()}},null,8,["order","onClose","onSave"])):Pe("",!0),h.value.type===G(re).MASSAGE?(J(),ye($i,{key:1,ref_key:"editFormRef",ref:V,order:h.value,"save-button-label":"儲存",onClose:M,onSave:()=>{A(),S()}},null,8,["order","onClose","onSave"])):h.value.type===G(re).SHUTTLE?(J(),ye(Lo,{key:2,ref_key:"editFormRef",ref:V,order:h.value,"save-button-label":"儲存",onClose:M,onSave:()=>{A(),S()}},null,8,["order","onClose","onSave"])):h.value.type===G(re).CHARTER?(J(),ye(ai,{key:3,ref_key:"editFormRef",ref:V,order:h.value,"save-button-label":"儲存",onClose:M,onSave:()=>{A(),S()}},null,8,["order","onClose","onSave"])):h.value.type===G(re).TUTOR?(J(),ye(au,{key:4,ref_key:"editFormRef",ref:V,order:h.value,"save-button-label":"儲存",onClose:M,onSave:()=>{A(),S()}},null,8,["order","onClose","onSave"])):Pe("",!0)]),_:1},8,["modelValue"]),o(G(ha),{modelValue:a.value,"onUpdate:modelValue":y[10]||(y[10]=M=>a.value=M),size:"small","mobile-fullscreen":"","close-button":"","hide-default-actions":""},{default:T(()=>[ou,o(x,{ref:"quote-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:T(({isValid:M})=>[g("div",iu,[o(U,{class:"w-full",orientation:"left"},{default:T(()=>[uu]),_:1}),g("div",du,[o(H,{modelValue:u.value.amount,"onUpdate:modelValue":y[5]||(y[5]=S=>u.value.amount=S),label:"付款金額",class:"w-full",name:"amount",type:"number",placeholder:"請輸入金額"},null,8,["modelValue"])]),o(d,{modelValue:u.value.note,"onUpdate:modelValue":y[6]||(y[6]=S=>u.value.note=S),label:"訂單備註(用戶端)",class:"w-full",name:"note",placeholder:"請輸入用戶端訂單備註"},null,8,["modelValue"]),o(d,{modelValue:u.value.remark,"onUpdate:modelValue":y[7]||(y[7]=S=>u.value.remark=S),label:"筆記(管理員)",class:"w-full",name:"remark",placeholder:"請輸入管理員筆記"},null,8,["modelValue"]),g("div",cu,[o(P,{preset:"secondary",color:"secondary",onClick:y[8]||(y[8]=S=>a.value=!1)},{default:T(()=>[le("取消")]),_:1}),o(P,{disabled:!M,onClick:k},{default:T(()=>[le("產生 URL")]),_:2},1032,["disabled"])]),O.value?(J(),xe("div",mu,[o(U,{class:"w-full",orientation:"left"},{default:T(()=>[fu]),_:1}),g("div",pu,[o(H,{modelValue:O.value,"onUpdate:modelValue":y[9]||(y[9]=S=>O.value=S),label:"完整 URL",class:"w-full",readonly:"",preset:"solid"},null,8,["modelValue"]),o(P,{class:"flex-shrink-0 self-end",color:"primary",icon:"content_copy",onClick:N},{default:T(()=>[le(" 複製 ")]),_:1})])])):Pe("",!0)])]),_:1},512)]),_:1},8,["modelValue"])],64)}}});export{xu as default};
//# sourceMappingURL=OrdersPage-2dafd959.js.map
