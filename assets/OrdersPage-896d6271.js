import{w as Bt,d as _s}from"./index-12a73b2b.js";import{u as Ls}from"./useModal-f9d7addc.js";import{u as sa}from"./index-061b1ece.js";import{X as It,r as B,C as Gt,u as G,Y as ce,d as Pe,Z as Ws,e as K,f as L,a as Q,c as Ie,h as o,w as x,b as g,t as te,F as gt,x as Ua,$ as na,i as ye,H as Ze,g as pe,p as Rs,m as Hs,_ as zs,a0 as Dt,o as St,a1 as X}from"./index-c5c43275.js";import{u as Be}from"./useToast-f11ce6ac.js";const Mt={NORMAL:"normal",AO_DAI:"ao_dai"},ne={ESCORT:"plan_escort",SHUTTLE:"plan_shuttle",CHARTER:"plan_charter",MASSAGE:"plan_dragon_massage",TUTOR:"plan_tutor"},Ve={INITIAL:"initial",COMPLETED:"completed",FAILED:"failed",EXPIRED:"expired",REFUND:"refund"},Et={VOIN_PAYMENT:"vcoin_payment",ECPAY_PAYMENT:"payment"},ee={PENDING:"pending",PROCESSED:"processed"},Qe={PlanEscort:"plan_escort",PlanShuttle:"plan_shuttle",PlanCharter:"plan_charter",PlanMassage:"plan_dragon_massage",PlanTutor:"plan_tutor"};class Ue extends Error{}class Zs extends Ue{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class qs extends Ue{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Bs extends Ue{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Re extends Ue{}class Fa extends Ue{constructor(e){super(`Invalid unit ${e}`)}}class ae extends Ue{}class ke extends Ue{constructor(){super("Zone is an abstract class")}}const N="numeric",ge="short",oe="long",vt={year:N,month:N,day:N},_a={year:N,month:ge,day:N},Gs={year:N,month:ge,day:N,weekday:ge},La={year:N,month:oe,day:N},Wa={year:N,month:oe,day:N,weekday:oe},Ra={hour:N,minute:N},Ha={hour:N,minute:N,second:N},za={hour:N,minute:N,second:N,timeZoneName:ge},Za={hour:N,minute:N,second:N,timeZoneName:oe},qa={hour:N,minute:N,hourCycle:"h23"},Ba={hour:N,minute:N,second:N,hourCycle:"h23"},Ga={hour:N,minute:N,second:N,hourCycle:"h23",timeZoneName:ge},Ya={hour:N,minute:N,second:N,hourCycle:"h23",timeZoneName:oe},ja={year:N,month:N,day:N,hour:N,minute:N},Ja={year:N,month:N,day:N,hour:N,minute:N,second:N},Qa={year:N,month:ge,day:N,hour:N,minute:N},Xa={year:N,month:ge,day:N,hour:N,minute:N,second:N},Ys={year:N,month:ge,day:N,weekday:ge,hour:N,minute:N},Ka={year:N,month:oe,day:N,hour:N,minute:N,timeZoneName:ge},es={year:N,month:oe,day:N,hour:N,minute:N,second:N,timeZoneName:ge},ts={year:N,month:oe,day:N,weekday:oe,hour:N,minute:N,timeZoneName:oe},as={year:N,month:oe,day:N,weekday:oe,hour:N,minute:N,second:N,timeZoneName:oe};class st{get type(){throw new ke}get name(){throw new ke}get ianaName(){return this.name}get isUniversal(){throw new ke}offsetName(e,t){throw new ke}formatOffset(e,t){throw new ke}offset(e){throw new ke}equals(e){throw new ke}get isValid(){throw new ke}}let Ct=null;class xt extends st{static get instance(){return Ct===null&&(Ct=new xt),Ct}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:s}){return cs(e,t,s)}formatOffset(e,t){return tt(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let ft={};function js(a){return ft[a]||(ft[a]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ft[a]}const Js={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Qs(a,e){const t=a.format(e).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,n,l,r,i,u,h,d]=s;return[r,n,l,i,u,h,d]}function Xs(a,e){const t=a.formatToParts(e),s=[];for(let n=0;n<t.length;n++){const{type:l,value:r}=t[n],i=Js[l];l==="era"?s[i]=r:R(i)||(s[i]=parseInt(r,10))}return s}let ot={};class Se extends st{static create(e){return ot[e]||(ot[e]=new Se(e)),ot[e]}static resetCache(){ot={},ft={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Se.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:s}){return cs(e,t,s,this.name)}formatOffset(e,t){return tt(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const s=js(this.name);let[n,l,r,i,u,h,d]=s.formatToParts?Xs(s,t):Qs(s,t);i==="BC"&&(n=-Math.abs(n)+1);const f=kt({year:n,month:l,day:r,hour:u===24?0:u,minute:h,second:d,millisecond:0});let c=+t;const V=c%1e3;return c-=V>=0?V:1e3+V,(f-c)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let la={};function Ks(a,e={}){const t=JSON.stringify([a,e]);let s=la[t];return s||(s=new Intl.ListFormat(a,e),la[t]=s),s}let Wt={};function Rt(a,e={}){const t=JSON.stringify([a,e]);let s=Wt[t];return s||(s=new Intl.DateTimeFormat(a,e),Wt[t]=s),s}let Ht={};function en(a,e={}){const t=JSON.stringify([a,e]);let s=Ht[t];return s||(s=new Intl.NumberFormat(a,e),Ht[t]=s),s}let zt={};function tn(a,e={}){const{base:t,...s}=e,n=JSON.stringify([a,s]);let l=zt[n];return l||(l=new Intl.RelativeTimeFormat(a,e),zt[n]=l),l}let Ke=null;function an(){return Ke||(Ke=new Intl.DateTimeFormat().resolvedOptions().locale,Ke)}let ra={};function sn(a){let e=ra[a];if(!e){const t=new Intl.Locale(a);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,ra[a]=e}return e}function nn(a){const e=a.indexOf("-x-");e!==-1&&(a=a.substring(0,e));const t=a.indexOf("-u-");if(t===-1)return[a];{let s,n;try{s=Rt(a).resolvedOptions(),n=a}catch{const u=a.substring(0,t);s=Rt(u).resolvedOptions(),n=u}const{numberingSystem:l,calendar:r}=s;return[n,l,r]}}function ln(a,e,t){return(t||e)&&(a.includes("-u-")||(a+="-u"),t&&(a+=`-ca-${t}`),e&&(a+=`-nu-${e}`)),a}function rn(a){const e=[];for(let t=1;t<=12;t++){const s=M.utc(2009,t,1);e.push(a(s))}return e}function on(a){const e=[];for(let t=1;t<=7;t++){const s=M.utc(2016,11,13+t);e.push(a(s))}return e}function it(a,e,t,s){const n=a.listingMode();return n==="error"?null:n==="en"?t(e):s(e)}function un(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||new Intl.DateTimeFormat(a.intl).resolvedOptions().numberingSystem==="latn"}class dn{constructor(e,t,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:n,floor:l,...r}=s;if(!t||Object.keys(r).length>0){const i={useGrouping:!1,...s};s.padTo>0&&(i.minimumIntegerDigits=s.padTo),this.inf=en(e,i)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Xt(e,3);return J(t,this.padTo)}}}class cn{constructor(e,t,s){this.opts=s,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const r=-1*(e.offset/60),i=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;e.offset!==0&&Se.create(i).valid?(n=i,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const l={...this.opts};l.timeZone=l.timeZone||n,this.dtf=Rt(t,l)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:s}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class mn{constructor(e,t,s){this.opts={style:"long",...s},!t&&us()&&(this.rtf=tn(e,s))}format(e,t){return this.rtf?this.rtf.format(e,t):Pn(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const fn={firstDay:1,minimalDays:4,weekend:[6,7]};class q{static fromOpts(e){return q.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,s,n,l=!1){const r=e||j.defaultLocale,i=r||(l?"en-US":an()),u=t||j.defaultNumberingSystem,h=s||j.defaultOutputCalendar,d=Zt(n)||j.defaultWeekSettings;return new q(i,u,h,d,r)}static resetCache(){Ke=null,Wt={},Ht={},zt={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:s,weekSettings:n}={}){return q.create(e,t,s,n)}constructor(e,t,s,n,l){const[r,i,u]=nn(e);this.locale=r,this.numberingSystem=t||i||null,this.outputCalendar=s||u||null,this.weekSettings=n,this.intl=ln(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=l,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=un(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:q.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Zt(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return it(this,e,ps,()=>{const s=t?{month:e,day:"numeric"}:{month:e},n=t?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=rn(l=>this.extract(l,s,"month"))),this.monthsCache[n][e]})}weekdays(e,t=!1){return it(this,e,gs,()=>{const s=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=on(l=>this.extract(l,s,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return it(this,void 0,()=>vs,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[M.utc(2016,11,13,9),M.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return it(this,e,ws,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[M.utc(-40,1,1),M.utc(2017,1,1)].map(s=>this.extract(s,t,"era"))),this.eraCache[e]})}extract(e,t,s){const n=this.dtFormatter(e,t),l=n.formatToParts(),r=l.find(i=>i.type.toLowerCase()===s);return r?r.value:null}numberFormatter(e={}){return new dn(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new cn(e,this.intl,t)}relFormatter(e={}){return new mn(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Ks(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:ds()?sn(this.locale):fn}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let At=null;class le extends st{static get utcInstance(){return At===null&&(At=new le(0)),At}static instance(e){return e===0?le.utcInstance:new le(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new le(Ot(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${tt(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${tt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return tt(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class pn extends st{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function De(a,e){if(R(a)||a===null)return e;if(a instanceof st)return a;if(Vn(a)){const t=a.toLowerCase();return t==="default"?e:t==="local"||t==="system"?xt.instance:t==="utc"||t==="gmt"?le.utcInstance:le.parseSpecifier(t)||Se.create(a)}else return Me(a)?le.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new pn(a)}const Yt={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},oa={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hn=Yt.hanidec.replace(/[\[|\]]/g,"").split("");function yn(a){let e=parseInt(a,10);if(isNaN(e)){e="";for(let t=0;t<a.length;t++){const s=a.charCodeAt(t);if(a[t].search(Yt.hanidec)!==-1)e+=hn.indexOf(a[t]);else for(const n in oa){const[l,r]=oa[n];s>=l&&s<=r&&(e+=s-l)}}return parseInt(e,10)}else return e}let We={};function gn(){We={}}function me({numberingSystem:a},e=""){const t=a||"latn";return We[t]||(We[t]={}),We[t][e]||(We[t][e]=new RegExp(`${Yt[t]}${e}`)),We[t][e]}let ia=()=>Date.now(),ua="system",da=null,ca=null,ma=null,fa=60,pa,ha=null;class j{static get now(){return ia}static set now(e){ia=e}static set defaultZone(e){ua=e}static get defaultZone(){return De(ua,xt.instance)}static get defaultLocale(){return da}static set defaultLocale(e){da=e}static get defaultNumberingSystem(){return ca}static set defaultNumberingSystem(e){ca=e}static get defaultOutputCalendar(){return ma}static set defaultOutputCalendar(e){ma=e}static get defaultWeekSettings(){return ha}static set defaultWeekSettings(e){ha=Zt(e)}static get twoDigitCutoffYear(){return fa}static set twoDigitCutoffYear(e){fa=e%100}static get throwOnInvalid(){return pa}static set throwOnInvalid(e){pa=e}static resetCaches(){q.resetCache(),Se.resetCache(),M.resetCache(),gn()}}class he{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ss=[0,31,59,90,120,151,181,212,243,273,304,334],ns=[0,31,60,91,121,152,182,213,244,274,305,335];function ue(a,e){return new he("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${a}, which is invalid`)}function jt(a,e,t){const s=new Date(Date.UTC(a,e-1,t));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const n=s.getUTCDay();return n===0?7:n}function ls(a,e,t){return t+(nt(a)?ns:ss)[e-1]}function rs(a,e){const t=nt(a)?ns:ss,s=t.findIndex(l=>l<e),n=e-t[s];return{month:s+1,day:n}}function Jt(a,e){return(a-e+7)%7+1}function wt(a,e=4,t=1){const{year:s,month:n,day:l}=a,r=ls(s,n,l),i=Jt(jt(s,n,l),t);let u=Math.floor((r-i+14-e)/7),h;return u<1?(h=s-1,u=at(h,e,t)):u>at(s,e,t)?(h=s+1,u=1):h=s,{weekYear:h,weekNumber:u,weekday:i,...Nt(a)}}function ya(a,e=4,t=1){const{weekYear:s,weekNumber:n,weekday:l}=a,r=Jt(jt(s,1,e),t),i=He(s);let u=n*7+l-r-7+e,h;u<1?(h=s-1,u+=He(h)):u>i?(h=s+1,u-=He(s)):h=s;const{month:d,day:y}=rs(h,u);return{year:h,month:d,day:y,...Nt(a)}}function $t(a){const{year:e,month:t,day:s}=a,n=ls(e,t,s);return{year:e,ordinal:n,...Nt(a)}}function ga(a){const{year:e,ordinal:t}=a,{month:s,day:n}=rs(e,t);return{year:e,month:s,day:n,...Nt(a)}}function va(a,e){if(!R(a.localWeekday)||!R(a.localWeekNumber)||!R(a.localWeekYear)){if(!R(a.weekday)||!R(a.weekNumber)||!R(a.weekYear))throw new Re("Cannot mix locale-based week fields with ISO-based week fields");return R(a.localWeekday)||(a.weekday=a.localWeekday),R(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),R(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function vn(a,e=4,t=1){const s=bt(a.weekYear),n=de(a.weekNumber,1,at(a.weekYear,e,t)),l=de(a.weekday,1,7);return s?n?l?!1:ue("weekday",a.weekday):ue("week",a.weekNumber):ue("weekYear",a.weekYear)}function wn(a){const e=bt(a.year),t=de(a.ordinal,1,He(a.year));return e?t?!1:ue("ordinal",a.ordinal):ue("year",a.year)}function os(a){const e=bt(a.year),t=de(a.month,1,12),s=de(a.day,1,Vt(a.year,a.month));return e?t?s?!1:ue("day",a.day):ue("month",a.month):ue("year",a.year)}function is(a){const{hour:e,minute:t,second:s,millisecond:n}=a,l=de(e,0,23)||e===24&&t===0&&s===0&&n===0,r=de(t,0,59),i=de(s,0,59),u=de(n,0,999);return l?r?i?u?!1:ue("millisecond",n):ue("second",s):ue("minute",t):ue("hour",e)}function R(a){return typeof a>"u"}function Me(a){return typeof a=="number"}function bt(a){return typeof a=="number"&&a%1===0}function Vn(a){return typeof a=="string"}function Tn(a){return Object.prototype.toString.call(a)==="[object Date]"}function us(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function ds(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function In(a){return Array.isArray(a)?a:[a]}function wa(a,e,t){if(a.length!==0)return a.reduce((s,n)=>{const l=[e(n),n];return s&&t(s[0],l[0])===s[0]?s:l},null)[1]}function Sn(a,e){return e.reduce((t,s)=>(t[s]=a[s],t),{})}function qe(a,e){return Object.prototype.hasOwnProperty.call(a,e)}function Zt(a){if(a==null)return null;if(typeof a!="object")throw new ae("Week settings must be an object");if(!de(a.firstDay,1,7)||!de(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(e=>!de(e,1,7)))throw new ae("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function de(a,e,t){return bt(a)&&a>=e&&a<=t}function xn(a,e){return a-e*Math.floor(a/e)}function J(a,e=2){const t=a<0;let s;return t?s="-"+(""+-a).padStart(e,"0"):s=(""+a).padStart(e,"0"),s}function Ne(a){if(!(R(a)||a===null||a===""))return parseInt(a,10)}function Ce(a){if(!(R(a)||a===null||a===""))return parseFloat(a)}function Qt(a){if(!(R(a)||a===null||a==="")){const e=parseFloat("0."+a)*1e3;return Math.floor(e)}}function Xt(a,e,t=!1){const s=10**e;return(t?Math.trunc:Math.round)(a*s)/s}function nt(a){return a%4===0&&(a%100!==0||a%400===0)}function He(a){return nt(a)?366:365}function Vt(a,e){const t=xn(e-1,12)+1,s=a+(e-t)/12;return t===2?nt(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function kt(a){let e=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(e=new Date(e),e.setUTCFullYear(a.year,a.month-1,a.day)),+e}function Va(a,e,t){return-Jt(jt(a,1,e),t)+e-1}function at(a,e=4,t=1){const s=Va(a,e,t),n=Va(a+1,e,t);return(He(a)-s+n)/7}function qt(a){return a>99?a:a>j.twoDigitCutoffYear?1900+a:2e3+a}function cs(a,e,t,s=null){const n=new Date(a),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(l.timeZone=s);const r={timeZoneName:e,...l},i=new Intl.DateTimeFormat(t,r).formatToParts(n).find(u=>u.type.toLowerCase()==="timezonename");return i?i.value:null}function Ot(a,e){let t=parseInt(a,10);Number.isNaN(t)&&(t=0);const s=parseInt(e,10)||0,n=t<0||Object.is(t,-0)?-s:s;return t*60+n}function ms(a){const e=Number(a);if(typeof a=="boolean"||a===""||Number.isNaN(e))throw new ae(`Invalid unit value ${a}`);return e}function Tt(a,e){const t={};for(const s in a)if(qe(a,s)){const n=a[s];if(n==null)continue;t[e(s)]=ms(n)}return t}function tt(a,e){const t=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),n=a>=0?"+":"-";switch(e){case"short":return`${n}${J(t,2)}:${J(s,2)}`;case"narrow":return`${n}${t}${s>0?`:${s}`:""}`;case"techie":return`${n}${J(t,2)}${J(s,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Nt(a){return Sn(a,["hour","minute","second","millisecond"])}const bn=["January","February","March","April","May","June","July","August","September","October","November","December"],fs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kn=["J","F","M","A","M","J","J","A","S","O","N","D"];function ps(a){switch(a){case"narrow":return[...kn];case"short":return[...fs];case"long":return[...bn];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const hs=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ys=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],On=["M","T","W","T","F","S","S"];function gs(a){switch(a){case"narrow":return[...On];case"short":return[...ys];case"long":return[...hs];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const vs=["AM","PM"],Nn=["Before Christ","Anno Domini"],Dn=["BC","AD"],Mn=["B","A"];function ws(a){switch(a){case"narrow":return[...Mn];case"short":return[...Dn];case"long":return[...Nn];default:return null}}function En(a){return vs[a.hour<12?0:1]}function Cn(a,e){return gs(e)[a.weekday-1]}function An(a,e){return ps(e)[a.month-1]}function $n(a,e){return ws(e)[a.year<0?0:1]}function Pn(a,e,t="always",s=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=["hours","minutes","seconds"].indexOf(a)===-1;if(t==="auto"&&l){const y=a==="days";switch(e){case 1:return y?"tomorrow":`next ${n[a][0]}`;case-1:return y?"yesterday":`last ${n[a][0]}`;case 0:return y?"today":`this ${n[a][0]}`}}const r=Object.is(e,-0)||e<0,i=Math.abs(e),u=i===1,h=n[a],d=s?u?h[1]:h[2]||h[1]:u?n[a][0]:a;return r?`${i} ${d} ago`:`in ${i} ${d}`}function Ta(a,e){let t="";for(const s of a)s.literal?t+=s.val:t+=e(s.val);return t}const Un={D:vt,DD:_a,DDD:La,DDDD:Wa,t:Ra,tt:Ha,ttt:za,tttt:Za,T:qa,TT:Ba,TTT:Ga,TTTT:Ya,f:ja,ff:Qa,fff:Ka,ffff:ts,F:Ja,FF:Xa,FFF:es,FFFF:as};class se{static create(e,t={}){return new se(e,t)}static parseFormat(e){let t=null,s="",n=!1;const l=[];for(let r=0;r<e.length;r++){const i=e.charAt(r);i==="'"?(s.length>0&&l.push({literal:n||/^\s+$/.test(s),val:s}),t=null,s="",n=!n):n||i===t?s+=i:(s.length>0&&l.push({literal:/^\s+$/.test(s),val:s}),s=i,t=i)}return s.length>0&&l.push({literal:n||/^\s+$/.test(s),val:s}),l}static macroTokenToFormatOpts(e){return Un[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return J(e,t);const s={...this.opts};return t>0&&(s.padTo=t),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,t){const s=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",l=(c,V)=>this.loc.extract(e,c,V),r=c=>e.isOffsetFixed&&e.offset===0&&c.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,c.format):"",i=()=>s?En(e):l({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(c,V)=>s?An(e,c):l(V?{month:c}:{month:c,day:"numeric"},"month"),h=(c,V)=>s?Cn(e,c):l(V?{weekday:c}:{weekday:c,month:"long",day:"numeric"},"weekday"),d=c=>{const V=se.macroTokenToFormatOpts(c);return V?this.formatWithSystemDefault(e,V):c},y=c=>s?$n(e,c):l({era:c},"era"),f=c=>{switch(c){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return i();case"d":return n?l({day:"numeric"},"day"):this.num(e.day);case"dd":return n?l({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return n?l({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?l({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return n?l({month:"numeric"},"month"):this.num(e.month);case"MM":return n?l({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return n?l({year:"numeric"},"year"):this.num(e.year);case"yy":return n?l({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?l({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?l({year:"numeric"},"year"):this.num(e.year,6);case"G":return y("short");case"GG":return y("long");case"GGGGG":return y("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(c)}};return Ta(se.parseFormat(t),f)}formatDurationFromString(e,t){const s=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=u=>h=>{const d=s(h);return d?this.num(u.get(d),h.length):h},l=se.parseFormat(t),r=l.reduce((u,{literal:h,val:d})=>h?u:u.concat(d),[]),i=e.shiftTo(...r.map(s).filter(u=>u));return Ta(l,n(i))}}const Vs=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ge(...a){const e=a.reduce((t,s)=>t+s.source,"");return RegExp(`^${e}$`)}function Ye(...a){return e=>a.reduce(([t,s,n],l)=>{const[r,i,u]=l(e,n);return[{...t,...r},i||s,u]},[{},null,1]).slice(0,2)}function je(a,...e){if(a==null)return[null,null];for(const[t,s]of e){const n=t.exec(a);if(n)return s(n)}return[null,null]}function Ts(...a){return(e,t)=>{const s={};let n;for(n=0;n<a.length;n++)s[a[n]]=Ne(e[t+n]);return[s,null,t+n]}}const Is=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Fn=`(?:${Is.source}?(?:\\[(${Vs.source})\\])?)?`,Kt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Ss=RegExp(`${Kt.source}${Fn}`),ea=RegExp(`(?:T${Ss.source})?`),_n=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ln=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Wn=/(\d{4})-?(\d{3})/,Rn=Ts("weekYear","weekNumber","weekDay"),Hn=Ts("year","ordinal"),zn=/(\d{4})-(\d\d)-(\d\d)/,xs=RegExp(`${Kt.source} ?(?:${Is.source}|(${Vs.source}))?`),Zn=RegExp(`(?: ${xs.source})?`);function ze(a,e,t){const s=a[e];return R(s)?t:Ne(s)}function qn(a,e){return[{year:ze(a,e),month:ze(a,e+1,1),day:ze(a,e+2,1)},null,e+3]}function Je(a,e){return[{hours:ze(a,e,0),minutes:ze(a,e+1,0),seconds:ze(a,e+2,0),milliseconds:Qt(a[e+3])},null,e+4]}function lt(a,e){const t=!a[e]&&!a[e+1],s=Ot(a[e+1],a[e+2]),n=t?null:le.instance(s);return[{},n,e+3]}function rt(a,e){const t=a[e]?Se.create(a[e]):null;return[{},t,e+1]}const Bn=RegExp(`^T?${Kt.source}$`),Gn=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Yn(a){const[e,t,s,n,l,r,i,u,h]=a,d=e[0]==="-",y=u&&u[0]==="-",f=(c,V=!1)=>c!==void 0&&(V||c&&d)?-c:c;return[{years:f(Ce(t)),months:f(Ce(s)),weeks:f(Ce(n)),days:f(Ce(l)),hours:f(Ce(r)),minutes:f(Ce(i)),seconds:f(Ce(u),u==="-0"),milliseconds:f(Qt(h),y)}]}const jn={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ta(a,e,t,s,n,l,r){const i={year:e.length===2?qt(Ne(e)):Ne(e),month:fs.indexOf(t)+1,day:Ne(s),hour:Ne(n),minute:Ne(l)};return r&&(i.second=Ne(r)),a&&(i.weekday=a.length>3?hs.indexOf(a)+1:ys.indexOf(a)+1),i}const Jn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Qn(a){const[,e,t,s,n,l,r,i,u,h,d,y]=a,f=ta(e,n,s,t,l,r,i);let c;return u?c=jn[u]:h?c=0:c=Ot(d,y),[f,new le(c)]}function Xn(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Kn=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,el=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,tl=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ia(a){const[,e,t,s,n,l,r,i]=a;return[ta(e,n,s,t,l,r,i),le.utcInstance]}function al(a){const[,e,t,s,n,l,r,i]=a;return[ta(e,i,t,s,n,l,r),le.utcInstance]}const sl=Ge(_n,ea),nl=Ge(Ln,ea),ll=Ge(Wn,ea),rl=Ge(Ss),bs=Ye(qn,Je,lt,rt),ol=Ye(Rn,Je,lt,rt),il=Ye(Hn,Je,lt,rt),ul=Ye(Je,lt,rt);function dl(a){return je(a,[sl,bs],[nl,ol],[ll,il],[rl,ul])}function cl(a){return je(Xn(a),[Jn,Qn])}function ml(a){return je(a,[Kn,Ia],[el,Ia],[tl,al])}function fl(a){return je(a,[Gn,Yn])}const pl=Ye(Je);function hl(a){return je(a,[Bn,pl])}const yl=Ge(zn,Zn),gl=Ge(xs),vl=Ye(Je,lt,rt);function wl(a){return je(a,[yl,bs],[gl,vl])}const Sa="Invalid Duration",ks={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Vl={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...ks},ie=146097/400,Fe=146097/4800,Tl={years:{quarters:4,months:12,weeks:ie/7,days:ie,hours:ie*24,minutes:ie*24*60,seconds:ie*24*60*60,milliseconds:ie*24*60*60*1e3},quarters:{months:3,weeks:ie/28,days:ie/4,hours:ie*24/4,minutes:ie*24*60/4,seconds:ie*24*60*60/4,milliseconds:ie*24*60*60*1e3/4},months:{weeks:Fe/7,days:Fe,hours:Fe*24,minutes:Fe*24*60,seconds:Fe*24*60*60,milliseconds:Fe*24*60*60*1e3},...ks},$e=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Il=$e.slice(0).reverse();function Oe(a,e,t=!1){const s={values:t?e.values:{...a.values,...e.values||{}},loc:a.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||a.conversionAccuracy,matrix:e.matrix||a.matrix};return new z(s)}function Os(a,e){let t=e.milliseconds??0;for(const s of Il.slice(1))e[s]&&(t+=e[s]*a[s].milliseconds);return t}function xa(a,e){const t=Os(a,e)<0?-1:1;$e.reduceRight((s,n)=>{if(R(e[n]))return s;if(s){const l=e[s]*t,r=a[n][s],i=Math.floor(l/r);e[n]+=i*t,e[s]-=i*r*t}return n},null),$e.reduce((s,n)=>{if(R(e[n]))return s;if(s){const l=e[s]%1;e[s]-=l,e[n]+=l*a[s][n]}return n},null)}function Sl(a){const e={};for(const[t,s]of Object.entries(a))s!==0&&(e[t]=s);return e}class z{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let s=t?Tl:Vl;e.matrix&&(s=e.matrix),this.values=e.values,this.loc=e.loc||q.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(e,t){return z.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new ae(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new z({values:Tt(e,z.normalizeUnit),loc:q.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Me(e))return z.fromMillis(e);if(z.isDuration(e))return e;if(typeof e=="object")return z.fromObject(e);throw new ae(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[s]=fl(e);return s?z.fromObject(s,t):z.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[s]=hl(e);return s?z.fromObject(s,t):z.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new ae("need to specify a reason the Duration is invalid");const s=e instanceof he?e:new he(e,t);if(j.throwOnInvalid)throw new Bs(s);return new z({invalid:s})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Fa(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const s={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?se.create(this.loc,s).formatDurationFromString(this,e):Sa}toHuman(e={}){if(!this.isValid)return Sa;const t=$e.map(s=>{const n=this.values[s];return R(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(n)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Xt(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},M.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Os(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=z.fromDurationLike(e),s={};for(const n of $e)(qe(t.values,n)||qe(this.values,n))&&(s[n]=t.get(n)+this.get(n));return Oe(this,{values:s},!0)}minus(e){if(!this.isValid)return this;const t=z.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const s of Object.keys(this.values))t[s]=ms(e(this.values[s],s));return Oe(this,{values:t},!0)}get(e){return this[z.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Tt(e,z.normalizeUnit)};return Oe(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:s,matrix:n}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:n,conversionAccuracy:s};return Oe(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return xa(this.matrix,e),Oe(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Sl(this.normalize().shiftToAll().toObject());return Oe(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(r=>z.normalizeUnit(r));const t={},s={},n=this.toObject();let l;for(const r of $e)if(e.indexOf(r)>=0){l=r;let i=0;for(const h in s)i+=this.matrix[h][r]*s[h],s[h]=0;Me(n[r])&&(i+=n[r]);const u=Math.trunc(i);t[r]=u,s[r]=(i*1e3-u*1e3)/1e3}else Me(n[r])&&(s[r]=n[r]);for(const r in s)s[r]!==0&&(t[l]+=r===l?s[r]:s[r]/this.matrix[l][r]);return xa(this.matrix,t),Oe(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Oe(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(s,n){return s===void 0||s===0?n===void 0||n===0:s===n}for(const s of $e)if(!t(this.values[s],e.values[s]))return!1;return!0}}const _e="Invalid Interval";function xl(a,e){return!a||!a.isValid?Y.invalid("missing or invalid start"):!e||!e.isValid?Y.invalid("missing or invalid end"):e<a?Y.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${e.toISO()}`):null}class Y{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new ae("need to specify a reason the Interval is invalid");const s=e instanceof he?e:new he(e,t);if(j.throwOnInvalid)throw new qs(s);return new Y({invalid:s})}static fromDateTimes(e,t){const s=Xe(e),n=Xe(t),l=xl(s,n);return l??new Y({start:s,end:n})}static after(e,t){const s=z.fromDurationLike(t),n=Xe(e);return Y.fromDateTimes(n,n.plus(s))}static before(e,t){const s=z.fromDurationLike(t),n=Xe(e);return Y.fromDateTimes(n.minus(s),n)}static fromISO(e,t){const[s,n]=(e||"").split("/",2);if(s&&n){let l,r;try{l=M.fromISO(s,t),r=l.isValid}catch{r=!1}let i,u;try{i=M.fromISO(n,t),u=i.isValid}catch{u=!1}if(r&&u)return Y.fromDateTimes(l,i);if(r){const h=z.fromISO(n,t);if(h.isValid)return Y.after(l,h)}else if(u){const h=z.fromISO(s,t);if(h.isValid)return Y.before(i,h)}}return Y.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const s=this.start.startOf(e,t);let n;return t!=null&&t.useLocaleWeeks?n=this.end.reconfigure({locale:s.locale}):n=this.end,n=n.startOf(e,t),Math.floor(n.diff(s,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Y.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Xe).filter(r=>this.contains(r)).sort((r,i)=>r.toMillis()-i.toMillis()),s=[];let{s:n}=this,l=0;for(;n<this.e;){const r=t[l]||this.e,i=+r>+this.e?this.e:r;s.push(Y.fromDateTimes(n,i)),n=i,l+=1}return s}splitBy(e){const t=z.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s}=this,n=1,l;const r=[];for(;s<this.e;){const i=this.start.plus(t.mapUnits(u=>u*n));l=+i>+this.e?this.e:i,r.push(Y.fromDateTimes(s,l)),s=l,n+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,s=this.e<e.e?this.e:e.e;return t>=s?null:Y.fromDateTimes(t,s)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,s=this.e>e.e?this.e:e.e;return Y.fromDateTimes(t,s)}static merge(e){const[t,s]=e.sort((n,l)=>n.s-l.s).reduce(([n,l],r)=>l?l.overlaps(r)||l.abutsStart(r)?[n,l.union(r)]:[n.concat([l]),r]:[n,r],[[],null]);return s&&t.push(s),t}static xor(e){let t=null,s=0;const n=[],l=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),r=Array.prototype.concat(...l),i=r.sort((u,h)=>u.time-h.time);for(const u of i)s+=u.type==="s"?1:-1,s===1?t=u.time:(t&&+t!=+u.time&&n.push(Y.fromDateTimes(t,u.time)),t=null);return Y.merge(n)}difference(...e){return Y.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:_e}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=vt,t={}){return this.isValid?se.create(this.s.loc.clone(t),e).formatInterval(this):_e}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:_e}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:_e}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:_e}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:_e}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):z.invalid(this.invalidReason)}mapEndpoints(e){return Y.fromDateTimes(e(this.s),e(this.e))}}class ut{static hasDST(e=j.defaultZone){const t=M.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Se.isValidZone(e)}static normalizeZone(e){return De(e,j.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||q.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||q.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||q.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null,outputCalendar:l="gregory"}={}){return(n||q.create(t,s,l)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null,outputCalendar:l="gregory"}={}){return(n||q.create(t,s,l)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null}={}){return(n||q.create(t,s,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null}={}){return(n||q.create(t,s,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return q.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return q.create(t,null,"gregory").eras(e)}static features(){return{relative:us(),localeWeek:ds()}}}function ba(a,e){const t=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=t(e)-t(a);return Math.floor(z.fromMillis(s).as("days"))}function bl(a,e,t){const s=[["years",(u,h)=>h.year-u.year],["quarters",(u,h)=>h.quarter-u.quarter+(h.year-u.year)*4],["months",(u,h)=>h.month-u.month+(h.year-u.year)*12],["weeks",(u,h)=>{const d=ba(u,h);return(d-d%7)/7}],["days",ba]],n={},l=a;let r,i;for(const[u,h]of s)t.indexOf(u)>=0&&(r=u,n[u]=h(a,e),i=l.plus(n),i>e?(n[u]--,a=l.plus(n),a>e&&(i=a,n[u]--,a=l.plus(n))):a=i);return[a,n,i,r]}function kl(a,e,t,s){let[n,l,r,i]=bl(a,e,t);const u=e-n,h=t.filter(y=>["hours","minutes","seconds","milliseconds"].indexOf(y)>=0);h.length===0&&(r<e&&(r=n.plus({[i]:1})),r!==n&&(l[i]=(l[i]||0)+u/(r-n)));const d=z.fromObject(l,s);return h.length>0?z.fromMillis(u,s).shiftTo(...h).plus(d):d}const Ol="missing Intl.DateTimeFormat.formatToParts support";function Z(a,e=t=>t){return{regex:a,deser:([t])=>e(yn(t))}}const Nl=String.fromCharCode(160),Ns=`[ ${Nl}]`,Ds=new RegExp(Ns,"g");function Dl(a){return a.replace(/\./g,"\\.?").replace(Ds,Ns)}function ka(a){return a.replace(/\./g,"").replace(Ds," ").toLowerCase()}function fe(a,e){return a===null?null:{regex:RegExp(a.map(Dl).join("|")),deser:([t])=>a.findIndex(s=>ka(t)===ka(s))+e}}function Oa(a,e){return{regex:a,deser:([,t,s])=>Ot(t,s),groups:e}}function dt(a){return{regex:a,deser:([e])=>e}}function Ml(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function El(a,e){const t=me(e),s=me(e,"{2}"),n=me(e,"{3}"),l=me(e,"{4}"),r=me(e,"{6}"),i=me(e,"{1,2}"),u=me(e,"{1,3}"),h=me(e,"{1,6}"),d=me(e,"{1,9}"),y=me(e,"{2,4}"),f=me(e,"{4,6}"),c=k=>({regex:RegExp(Ml(k.val)),deser:([D])=>D,literal:!0}),E=(k=>{if(a.literal)return c(k);switch(k.val){case"G":return fe(e.eras("short"),0);case"GG":return fe(e.eras("long"),0);case"y":return Z(h);case"yy":return Z(y,qt);case"yyyy":return Z(l);case"yyyyy":return Z(f);case"yyyyyy":return Z(r);case"M":return Z(i);case"MM":return Z(s);case"MMM":return fe(e.months("short",!0),1);case"MMMM":return fe(e.months("long",!0),1);case"L":return Z(i);case"LL":return Z(s);case"LLL":return fe(e.months("short",!1),1);case"LLLL":return fe(e.months("long",!1),1);case"d":return Z(i);case"dd":return Z(s);case"o":return Z(u);case"ooo":return Z(n);case"HH":return Z(s);case"H":return Z(i);case"hh":return Z(s);case"h":return Z(i);case"mm":return Z(s);case"m":return Z(i);case"q":return Z(i);case"qq":return Z(s);case"s":return Z(i);case"ss":return Z(s);case"S":return Z(u);case"SSS":return Z(n);case"u":return dt(d);case"uu":return dt(i);case"uuu":return Z(t);case"a":return fe(e.meridiems(),0);case"kkkk":return Z(l);case"kk":return Z(y,qt);case"W":return Z(i);case"WW":return Z(s);case"E":case"c":return Z(t);case"EEE":return fe(e.weekdays("short",!1),1);case"EEEE":return fe(e.weekdays("long",!1),1);case"ccc":return fe(e.weekdays("short",!0),1);case"cccc":return fe(e.weekdays("long",!0),1);case"Z":case"ZZ":return Oa(new RegExp(`([+-]${i.source})(?::(${s.source}))?`),2);case"ZZZ":return Oa(new RegExp(`([+-]${i.source})(${s.source})?`),2);case"z":return dt(/[a-z_+-/]{1,256}?/i);case" ":return dt(/[^\S\n\r]/);default:return c(k)}})(a)||{invalidReason:Ol};return E.token=a,E}const Cl={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Al(a,e,t){const{type:s,value:n}=a;if(s==="literal"){const u=/^\s+$/.test(n);return{literal:!u,val:u?" ":n}}const l=e[s];let r=s;s==="hour"&&(e.hour12!=null?r=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?r="hour12":r="hour24":r=t.hour12?"hour12":"hour24");let i=Cl[r];if(typeof i=="object"&&(i=i[l]),i)return{literal:!1,val:i}}function $l(a){return[`^${a.map(t=>t.regex).reduce((t,s)=>`${t}(${s.source})`,"")}$`,a]}function Pl(a,e,t){const s=a.match(e);if(s){const n={};let l=1;for(const r in t)if(qe(t,r)){const i=t[r],u=i.groups?i.groups+1:1;!i.literal&&i.token&&(n[i.token.val[0]]=i.deser(s.slice(l,l+u))),l+=u}return[s,n]}else return[s,{}]}function Ul(a){const e=l=>{switch(l){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,s;return R(a.z)||(t=Se.create(a.z)),R(a.Z)||(t||(t=new le(a.Z)),s=a.Z),R(a.q)||(a.M=(a.q-1)*3+1),R(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),R(a.u)||(a.S=Qt(a.u)),[Object.keys(a).reduce((l,r)=>{const i=e(r);return i&&(l[i]=a[r]),l},{}),t,s]}let Pt=null;function Fl(){return Pt||(Pt=M.fromMillis(1555555555555)),Pt}function _l(a,e){if(a.literal)return a;const t=se.macroTokenToFormatOpts(a.val),s=As(t,e);return s==null||s.includes(void 0)?a:s}function Ms(a,e){return Array.prototype.concat(...a.map(t=>_l(t,e)))}class Es{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Ms(se.parseFormat(t),e),this.units=this.tokens.map(s=>El(s,e)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,n]=$l(this.units);this.regex=RegExp(s,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[t,s]=Pl(e,this.regex,this.handlers),[n,l,r]=s?Ul(s):[null,null,void 0];if(qe(s,"a")&&qe(s,"H"))throw new Re("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:s,result:n,zone:l,specificOffset:r}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Cs(a,e,t){return new Es(a,t).explainFromTokens(e)}function Ll(a,e,t){const{result:s,zone:n,specificOffset:l,invalidReason:r}=Cs(a,e,t);return[s,n,l,r]}function As(a,e){if(!a)return null;const s=se.create(e,a).dtFormatter(Fl()),n=s.formatToParts(),l=s.resolvedOptions();return n.map(r=>Al(r,a,l))}const Ut="Invalid DateTime",Na=864e13;function et(a){return new he("unsupported zone",`the zone "${a.name}" is not supported`)}function Ft(a){return a.weekData===null&&(a.weekData=wt(a.c)),a.weekData}function _t(a){return a.localWeekData===null&&(a.localWeekData=wt(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function Ae(a,e){const t={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new M({...t,...e,old:t})}function $s(a,e,t){let s=a-e*60*1e3;const n=t.offset(s);if(e===n)return[s,e];s-=(n-e)*60*1e3;const l=t.offset(s);return n===l?[s,n]:[a-Math.min(n,l)*60*1e3,Math.max(n,l)]}function ct(a,e){a+=e*60*1e3;const t=new Date(a);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function pt(a,e,t){return $s(kt(a),e,t)}function Da(a,e){const t=a.o,s=a.c.year+Math.trunc(e.years),n=a.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,l={...a.c,year:s,month:n,day:Math.min(a.c.day,Vt(s,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},r=z.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),i=kt(l);let[u,h]=$s(i,t,a.zone);return r!==0&&(u+=r,h=a.zone.offset(u)),{ts:u,o:h}}function Le(a,e,t,s,n,l){const{setZone:r,zone:i}=t;if(a&&Object.keys(a).length!==0||e){const u=e||i,h=M.fromObject(a,{...t,zone:u,specificOffset:l});return r?h:h.setZone(i)}else return M.invalid(new he("unparsable",`the input "${n}" can't be parsed as ${s}`))}function mt(a,e,t=!0){return a.isValid?se.create(q.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(a,e):null}function Lt(a,e){const t=a.c.year>9999||a.c.year<0;let s="";return t&&a.c.year>=0&&(s+="+"),s+=J(a.c.year,t?6:4),e?(s+="-",s+=J(a.c.month),s+="-",s+=J(a.c.day)):(s+=J(a.c.month),s+=J(a.c.day)),s}function Ma(a,e,t,s,n,l){let r=J(a.c.hour);return e?(r+=":",r+=J(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!t)&&(r+=":")):r+=J(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!t)&&(r+=J(a.c.second),(a.c.millisecond!==0||!s)&&(r+=".",r+=J(a.c.millisecond,3))),n&&(a.isOffsetFixed&&a.offset===0&&!l?r+="Z":a.o<0?(r+="-",r+=J(Math.trunc(-a.o/60)),r+=":",r+=J(Math.trunc(-a.o%60))):(r+="+",r+=J(Math.trunc(a.o/60)),r+=":",r+=J(Math.trunc(a.o%60)))),l&&(r+="["+a.zone.ianaName+"]"),r}const Ps={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Wl={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Rl={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Us=["year","month","day","hour","minute","second","millisecond"],Hl=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],zl=["year","ordinal","hour","minute","second","millisecond"];function Zl(a){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!e)throw new Fa(a);return e}function Ea(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Zl(a)}}function ql(a){return yt[a]||(ht===void 0&&(ht=j.now()),yt[a]=a.offset(ht)),yt[a]}function Ca(a,e){const t=De(e.zone,j.defaultZone);if(!t.isValid)return M.invalid(et(t));const s=q.fromObject(e);let n,l;if(R(a.year))n=j.now();else{for(const u of Us)R(a[u])&&(a[u]=Ps[u]);const r=os(a)||is(a);if(r)return M.invalid(r);const i=ql(t);[n,l]=pt(a,i,t)}return new M({ts:n,zone:t,loc:s,o:l})}function Aa(a,e,t){const s=R(t.round)?!0:t.round,n=(r,i)=>(r=Xt(r,s||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(r,i)),l=r=>t.calendary?e.hasSame(a,r)?0:e.startOf(r).diff(a.startOf(r),r).get(r):e.diff(a,r).get(r);if(t.unit)return n(l(t.unit),t.unit);for(const r of t.units){const i=l(r);if(Math.abs(i)>=1)return n(i,r)}return n(a>e?-0:0,t.units[t.units.length-1])}function $a(a){let e={},t;return a.length>0&&typeof a[a.length-1]=="object"?(e=a[a.length-1],t=Array.from(a).slice(0,a.length-1)):t=Array.from(a),[e,t]}let ht,yt={};class M{constructor(e){const t=e.zone||j.defaultZone;let s=e.invalid||(Number.isNaN(e.ts)?new he("invalid input"):null)||(t.isValid?null:et(t));this.ts=R(e.ts)?j.now():e.ts;let n=null,l=null;if(!s)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[n,l]=[e.old.c,e.old.o];else{const i=Me(e.o)&&!e.old?e.o:t.offset(this.ts);n=ct(this.ts,i),s=Number.isNaN(n.year)?new he("invalid input"):null,n=s?null:n,l=s?null:i}this._zone=t,this.loc=e.loc||q.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=n,this.o=l,this.isLuxonDateTime=!0}static now(){return new M({})}static local(){const[e,t]=$a(arguments),[s,n,l,r,i,u,h]=t;return Ca({year:s,month:n,day:l,hour:r,minute:i,second:u,millisecond:h},e)}static utc(){const[e,t]=$a(arguments),[s,n,l,r,i,u,h]=t;return e.zone=le.utcInstance,Ca({year:s,month:n,day:l,hour:r,minute:i,second:u,millisecond:h},e)}static fromJSDate(e,t={}){const s=Tn(e)?e.valueOf():NaN;if(Number.isNaN(s))return M.invalid("invalid input");const n=De(t.zone,j.defaultZone);return n.isValid?new M({ts:s,zone:n,loc:q.fromObject(t)}):M.invalid(et(n))}static fromMillis(e,t={}){if(Me(e))return e<-Na||e>Na?M.invalid("Timestamp out of range"):new M({ts:e,zone:De(t.zone,j.defaultZone),loc:q.fromObject(t)});throw new ae(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Me(e))return new M({ts:e*1e3,zone:De(t.zone,j.defaultZone),loc:q.fromObject(t)});throw new ae("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const s=De(t.zone,j.defaultZone);if(!s.isValid)return M.invalid(et(s));const n=q.fromObject(t),l=Tt(e,Ea),{minDaysInFirstWeek:r,startOfWeek:i}=va(l,n),u=j.now(),h=R(t.specificOffset)?s.offset(u):t.specificOffset,d=!R(l.ordinal),y=!R(l.year),f=!R(l.month)||!R(l.day),c=y||f,V=l.weekYear||l.weekNumber;if((c||d)&&V)throw new Re("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&d)throw new Re("Can't mix ordinal dates with month/day");const E=V||l.weekday&&!c;let k,D,w=ct(u,h);E?(k=Hl,D=Wl,w=wt(w,r,i)):d?(k=zl,D=Rl,w=$t(w)):(k=Us,D=Ps);let T=!1;for(const _ of k){const b=l[_];R(b)?T?l[_]=D[_]:l[_]=w[_]:T=!0}const H=E?vn(l,r,i):d?wn(l):os(l),W=H||is(l);if(W)return M.invalid(W);const C=E?ya(l,r,i):d?ga(l):l,[p,v]=pt(C,h,s),F=new M({ts:p,zone:s,o:v,loc:n});return l.weekday&&c&&e.weekday!==F.weekday?M.invalid("mismatched weekday",`you can't specify both a weekday of ${l.weekday} and a date of ${F.toISO()}`):F.isValid?F:M.invalid(F.invalid)}static fromISO(e,t={}){const[s,n]=dl(e);return Le(s,n,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[s,n]=cl(e);return Le(s,n,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[s,n]=ml(e);return Le(s,n,t,"HTTP",t)}static fromFormat(e,t,s={}){if(R(e)||R(t))throw new ae("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:l=null}=s,r=q.fromOpts({locale:n,numberingSystem:l,defaultToEN:!0}),[i,u,h,d]=Ll(r,e,t);return d?M.invalid(d):Le(i,u,s,`format ${t}`,e,h)}static fromString(e,t,s={}){return M.fromFormat(e,t,s)}static fromSQL(e,t={}){const[s,n]=wl(e);return Le(s,n,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new ae("need to specify a reason the DateTime is invalid");const s=e instanceof he?e:new he(e,t);if(j.throwOnInvalid)throw new Zs(s);return new M({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const s=As(e,q.fromObject(t));return s?s.map(n=>n?n.val:null).join(""):null}static expandFormat(e,t={}){return Ms(se.parseFormat(e),q.fromObject(t)).map(n=>n.val).join("")}static resetCache(){ht=void 0,yt={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ft(this).weekYear:NaN}get weekNumber(){return this.isValid?Ft(this).weekNumber:NaN}get weekday(){return this.isValid?Ft(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?_t(this).weekday:NaN}get localWeekNumber(){return this.isValid?_t(this).weekNumber:NaN}get localWeekYear(){return this.isValid?_t(this).weekYear:NaN}get ordinal(){return this.isValid?$t(this.c).ordinal:NaN}get monthShort(){return this.isValid?ut.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ut.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ut.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ut.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,s=kt(this.c),n=this.zone.offset(s-e),l=this.zone.offset(s+e),r=this.zone.offset(s-n*t),i=this.zone.offset(s-l*t);if(r===i)return[this];const u=s-r*t,h=s-i*t,d=ct(u,r),y=ct(h,i);return d.hour===y.hour&&d.minute===y.minute&&d.second===y.second&&d.millisecond===y.millisecond?[Ae(this,{ts:u}),Ae(this,{ts:h})]:[this]}get isInLeapYear(){return nt(this.year)}get daysInMonth(){return Vt(this.year,this.month)}get daysInYear(){return this.isValid?He(this.year):NaN}get weeksInWeekYear(){return this.isValid?at(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?at(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:s,calendar:n}=se.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:s,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(le.instance(e),t)}toLocal(){return this.setZone(j.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:s=!1}={}){if(e=De(e,j.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||s){const l=e.offset(this.ts),r=this.toObject();[n]=pt(r,l,e)}return Ae(this,{ts:n,zone:e})}else return M.invalid(et(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:s}={}){const n=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:s});return Ae(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Tt(e,Ea),{minDaysInFirstWeek:s,startOfWeek:n}=va(t,this.loc),l=!R(t.weekYear)||!R(t.weekNumber)||!R(t.weekday),r=!R(t.ordinal),i=!R(t.year),u=!R(t.month)||!R(t.day),h=i||u,d=t.weekYear||t.weekNumber;if((h||r)&&d)throw new Re("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&r)throw new Re("Can't mix ordinal dates with month/day");let y;l?y=ya({...wt(this.c,s,n),...t},s,n):R(t.ordinal)?(y={...this.toObject(),...t},R(t.day)&&(y.day=Math.min(Vt(y.year,y.month),y.day))):y=ga({...$t(this.c),...t});const[f,c]=pt(y,this.o,this.zone);return Ae(this,{ts:f,o:c})}plus(e){if(!this.isValid)return this;const t=z.fromDurationLike(e);return Ae(this,Da(this,t))}minus(e){if(!this.isValid)return this;const t=z.fromDurationLike(e).negate();return Ae(this,Da(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const s={},n=z.normalizeUnit(e);switch(n){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(n==="weeks")if(t){const l=this.loc.getStartOfWeek(),{weekday:r}=this;r<l&&(s.weekNumber=this.weekNumber-1),s.weekday=l}else s.weekday=1;if(n==="quarters"){const l=Math.ceil(this.month/3);s.month=(l-1)*3+1}return this.set(s)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?se.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Ut}toLocaleString(e=vt,t={}){return this.isValid?se.create(this.loc.clone(t),e).formatDateTime(this):Ut}toLocaleParts(e={}){return this.isValid?se.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:s=!1,includeOffset:n=!0,extendedZone:l=!1}={}){if(!this.isValid)return null;const r=e==="extended";let i=Lt(this,r);return i+="T",i+=Ma(this,r,t,s,n,l),i}toISODate({format:e="extended"}={}){return this.isValid?Lt(this,e==="extended"):null}toISOWeekDate(){return mt(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:s=!0,includePrefix:n=!1,extendedZone:l=!1,format:r="extended"}={}){return this.isValid?(n?"T":"")+Ma(this,r==="extended",t,e,s,l):null}toRFC2822(){return mt(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return mt(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Lt(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:s=!0}={}){let n="HH:mm:ss.SSS";return(t||e)&&(s&&(n+=" "),t?n+="z":e&&(n+="ZZ")),mt(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Ut}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",s={}){if(!this.isValid||!e.isValid)return z.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...s},l=In(t).map(z.normalizeUnit),r=e.valueOf()>this.valueOf(),i=r?this:e,u=r?e:this,h=kl(i,u,l,n);return r?h.negate():h}diffNow(e="milliseconds",t={}){return this.diff(M.now(),e,t)}until(e){return this.isValid?Y.fromDateTimes(this,e):this}hasSame(e,t,s){if(!this.isValid)return!1;const n=e.valueOf(),l=this.setZone(e.zone,{keepLocalTime:!0});return l.startOf(t,s)<=n&&n<=l.endOf(t,s)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||M.fromObject({},{zone:this.zone}),s=e.padding?this<t?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],l=e.unit;return Array.isArray(e.unit)&&(n=e.unit,l=void 0),Aa(t,this.plus(s),{...e,numeric:"always",units:n,unit:l})}toRelativeCalendar(e={}){return this.isValid?Aa(e.base||M.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(M.isDateTime))throw new ae("min requires all arguments be DateTimes");return wa(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(M.isDateTime))throw new ae("max requires all arguments be DateTimes");return wa(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,s={}){const{locale:n=null,numberingSystem:l=null}=s,r=q.fromOpts({locale:n,numberingSystem:l,defaultToEN:!0});return Cs(r,e,t)}static fromStringExplain(e,t,s={}){return M.fromFormatExplain(e,t,s)}static buildFormatParser(e,t={}){const{locale:s=null,numberingSystem:n=null}=t,l=q.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return new Es(l,e)}static fromFormatParser(e,t,s={}){if(R(e)||R(t))throw new ae("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:l=null}=s,r=q.fromOpts({locale:n,numberingSystem:l,defaultToEN:!0});if(!r.equals(t.locale))throw new ae(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:i,zone:u,specificOffset:h,invalidReason:d}=t.explainFromTokens(e);return d?M.invalid(d):Le(i,u,s,`format ${t.format}`,e,h)}static get DATE_SHORT(){return vt}static get DATE_MED(){return _a}static get DATE_MED_WITH_WEEKDAY(){return Gs}static get DATE_FULL(){return La}static get DATE_HUGE(){return Wa}static get TIME_SIMPLE(){return Ra}static get TIME_WITH_SECONDS(){return Ha}static get TIME_WITH_SHORT_OFFSET(){return za}static get TIME_WITH_LONG_OFFSET(){return Za}static get TIME_24_SIMPLE(){return qa}static get TIME_24_WITH_SECONDS(){return Ba}static get TIME_24_WITH_SHORT_OFFSET(){return Ga}static get TIME_24_WITH_LONG_OFFSET(){return Ya}static get DATETIME_SHORT(){return ja}static get DATETIME_SHORT_WITH_SECONDS(){return Ja}static get DATETIME_MED(){return Qa}static get DATETIME_MED_WITH_SECONDS(){return Xa}static get DATETIME_MED_WITH_WEEKDAY(){return Ys}static get DATETIME_FULL(){return Ka}static get DATETIME_FULL_WITH_SECONDS(){return es}static get DATETIME_HUGE(){return ts}static get DATETIME_HUGE_WITH_SECONDS(){return as}}function Xe(a){if(M.isDateTime(a))return a;if(a&&a.valueOf&&Me(a.valueOf()))return M.fromJSDate(a);if(a&&typeof a=="object")return M.fromObject(a);throw new ae(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const ve=()=>{const a=(r,i=void 0)=>i===void 0?M.fromMillis(r).toFormat("yyyy-MM-dd HH:mm"):M.fromMillis(r,{zone:i}).toFormat("yyyy-MM-dd HH:mm"),e=r=>a(r,"Asia/Ho_Chi_Minh"),t=(r,i=void 0)=>i===void 0?M.fromMillis(r).toFormat("yyyy-MM-dd"):M.fromMillis(r,{zone:i}).toFormat("yyyy-MM-dd"),s=r=>t(r,"Asia/Ho_Chi_Minh"),n=(r,i=void 0)=>i===void 0?M.fromMillis(r).toFormat("HH:mm:ss"):M.fromMillis(r,{zone:i}).toFormat("HH:mm:ss");return{formatDateTime:a,formatDateTimeV:e,formatDate:t,formatDateV:s,formatTime:n,formatTimeV:r=>n(r,"Asia/Ho_Chi_Minh")}},Pa=It(),{formatDate:Bl}=ve(),Gl=()=>B({page:1,perPage:10,total:0}),Yl=()=>B({sortBy:"createdAt",sortingOrder:null}),jl=()=>B({isActive:!0,search:""}),Jl={[ne.ESCORT]:"奧黛導遊",[ne.SHUTTLE]:"機場接送",[ne.CHARTER]:"包車旅遊",[ne.MASSAGE]:"龍筋按摩",[ne.TUTOR]:"越語家教"},Ee=a=>{const e=B(!1),t=B([]),{filters:s=jl(),sorting:n=Yl(),pagination:l=Gl()}=a||{},r=async()=>{e.value=!0;const f={...G(s),sortBy:n.value.sortBy,sortOrder:n.value.sortingOrder,offset:(l.value.page-1)*l.value.perPage,limit:l.value.perPage,...s.value.isActive&&{excludeStatus:"initial"},...!s.value.isActive&&{status:"initial"}},{data:c}=await ce.getOrders(f);t.value=c.data;const V={page:l.value.page,perPage:10,total:c.total};i(()=>{l.value=V}),e.value=!1},{ignoreUpdates:i}=Bt([l,n],r,{deep:!0});return Gt(s,()=>{l.value.page=1,r()},{deep:!0}),r(),{categorys:Jl,isLoading:e,filters:s,sorting:n,pagination:l,orders:t,fetch:r,getServiceDate:f=>Bl(Number(f.orderPlanEscort.startTime)),getServiceDuring:f=>{const c=M.fromMillis(Number(f.orderPlanEscort.startTime),{zone:"Asia/Ho_Chi_Minh"}),V=c.plus({hours:Number(f.orderPlanEscort.serviceHours)});return`${c.toFormat("HH:mm")} - ${V.toFormat("HH:mm")}`},getGuideExpect:f=>{var c;return(c=f.orderPlanEscort.guideExpectIds)==null?void 0:c.split(",").map(V=>{var E;return(E=Pa.guides.find(k=>k.id===Number(V)))==null?void 0:E.name}).join(", ")},getAttractions:f=>{var c;return(c=f.orderPlanEscort.attractionIds)==null?void 0:c.split(",").map(V=>{var E;return(E=Pa.attractions.find(k=>k.id===Number(V)))==null?void 0:E.name}).join(", ")},async add(f){console.log("add order",f)},async update(f){console.log("update order",f)},async remove(f){console.log("remove order",f)}}},Ql=a=>(Rs("data-v-d756e30e"),a=a(),Hs(),a),Xl={class:"flex items-center gap-2 max-w-[230px] ellipsis"},Kl={class:"max-w-[120px] ellipsis"},er={class:"ellipsis max-w-[230px]"},tr={class:"ellipsis max-w-[230px]"},ar={class:"ellipsis max-w-[230px]"},sr={class:"ellipsis max-w-[230px]"},nr={class:"ellipsis max-w-[230px]"},lr={class:"ellipsis max-w-[230px]"},rr={class:"max-w-[180px] ellipsis"},or={class:"ellipsis max-w-[230px]"},ir=Ql(()=>g("div",{class:"ellipsis max-w-[230px]"},"服務人員",-1)),ur={class:"ellipsis max-w-[230px]"},dr={class:"ellipsis max-w-[230px]"},cr={class:"flex gap-2 justify-end"},mr={class:"flex flex-col-reverse md:flex-row gap-2 justify-between items-center py-2"},fr={key:0,class:"flex"},pr=Pe({__name:"OrdersTable",props:{orders:{type:Array,required:!0},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0},sortBy:{type:String,required:!0},sortingOrder:{type:String,required:!0}},emits:["edit-order","delete-order","update:sortBy","update:sortingOrder"],setup(a,{emit:e}){const{categorys:t}=Ee(),{formatDateTime:s,formatDateTimeV:n}=ve(),{getServiceDate:l,getServiceDuring:r}=Ee(),i=_s([{label:"訂單編號",key:"id",sortable:!0},{label:"訂單狀態",key:"status",sortable:!0},{label:"付款狀態",key:"payment",sortable:!1},{label:"操作狀態",key:"manualOperationStatus",sortable:!1},{label:"下訂時間",key:"createdAt",sortable:!0},{label:"訂購人",key:"username",sortable:!0},{label:"訂購項目",key:"type",sortable:!0},{label:"訂購方案",key:"planName",sortable:!0},{label:"行程時段",key:"startTime",sortable:!0},{label:"已支付訂金",key:"deposit",sortable:!0},{label:"尾款(VND)",key:"finalPayment",sortable:!0},{label:" ",key:"actions",align:"right"}]),u={1:"東方小巴黎",2:"華燈夜生活",3:"西貢河船宴",4:"韓式桑拿趣"},h={1:"機場-市區",2:"市區-機場"},d=a,y=e,f=Ws(d,"orders"),c=sa(d,"sortBy",y),V=sa(d,"sortingOrder",y),E={initial:"secondary",payment:"warning",payment_fail:"warning",completed:"success",cancel:"warning",cancel_completed:"secondary"},k={initial:"草稿",payment:"未付款",payment_fail:"付款失敗",completed:"已完成",cancel:"訂單取消",cancel_completed:"已取消"},D={[ee.PENDING]:"待處理",[ee.PROCESSED]:"已處理"},w={[ee.PENDING]:"warning",[ee.PROCESSED]:"success"},T=K(()=>Math.ceil(d.pagination.total/d.pagination.perPage)),{confirm:H}=Ls(),W=async m=>{await H({title:"Delete user",message:`Are you sure you want to delete ${m.id}?`,okText:"Delete",cancelText:"Cancel",size:"small",maxWidth:"380px"})&&y("delete-order",m)},C=m=>{const A=m.payment||[];if(A.length===0)return 0;const S=A.find(O=>O.type===Et.ECPAY_PAYMENT);return S?S.amount:0},p=m=>m<1e3?m.toString():`${Math.floor(m/1e3)}K`,v=m=>{switch(m.type){case Qe.PlanShuttle:return p(m.orderPlanShuttleSnapshot.totalAmount-m.orderPlanShuttleSnapshot.prePaymentAmount);case Qe.PlanCharter:return p(m.orderPlanCharterSnapshot.totalAmount-m.orderPlanCharterSnapshot.prePaymentAmount);case Qe.PlanEscort:return p(m.orderPlanEscortSnapshot.totalAmount-m.orderPlanEscortSnapshot.prePaymentAmount);case Qe.PlanMassage:return p(m.orderPlanDragonMassageSnapshot.totalAmount-m.orderPlanDragonMassageSnapshot.prePaymentAmount);case Qe.PlanTutor:return p(m.orderPlanTutorSnapshot.totalAmount-m.orderPlanTutorSnapshot.prePaymentAmount);default:return"N/A"}},F={[Et.ECPAY_PAYMENT]:"綠界付款",[Et.VOIN_PAYMENT]:"VCoin"},_={[Ve.INITIAL]:"未付款",[Ve.COMPLETED]:"付款成功",[Ve.FAILED]:"付款失敗",[Ve.EXPIRED]:"付款逾期",[Ve.REFUND]:"退款"},b={[Ve.INITIAL]:"warning",[Ve.COMPLETED]:"success",[Ve.FAILED]:"danger",[Ve.EXPIRED]:"secondary",[Ve.REFUND]:"warning"},I=m=>{const A=F[m.type],S=_[m.status];return`${A} - ${S}`},$=K(()=>f.value.map(m=>{if(m.type===ne.ESCORT)return{...m,planName:u[m.orderPlanEscort.planId],startTime:`${l(m)}
${r(m)}`,orderPlanEscort:{...m.orderPlanEscort}};if(m.type===ne.SHUTTLE)return{...m,planName:h[m.orderPlanShuttle.planId],startTime:n(Number(m.orderPlanShuttle.time)),orderPlanEscort:{...m.orderPlanShuttle}};if(m.type===ne.CHARTER)return{...m,planName:"包車旅遊",startTime:n(Number(m.orderPlanCharter.time)),orderPlanEscort:{...m.orderPlanCharter}};if(m.type===ne.MASSAGE){let A=n(Number(m.orderPlanDragonMassage.time));return m.orderPlanDragonMassage.confirmedTime&&(A=n(Number(m.orderPlanDragonMassage.confirmedTime))),{...m,planName:"龍筋按摩",startTime:A,orderPlanEscort:{...m.orderPlanDragonMassage}}}if(m.type===ne.TUTOR){const A=n(Number(m.orderPlanTutor.startTime));return{...m,planName:"越語家教",startTime:A,orderPlanEscort:{...m.orderPlanTutor}}}}));return(m,A)=>{const S=L("VaBadge"),O=L("VaButton"),we=L("VaDataTable"),xe=L("VaSelect"),be=L("VaPagination");return Q(),Ie(gt,null,[o(we,{"sort-by":G(c),"onUpdate:sortBy":A[0]||(A[0]=U=>na(c)?c.value=U:null),"sorting-order":G(V),"onUpdate:sortingOrder":A[1]||(A[1]=U=>na(V)?V.value=U:null),columns:G(i),items:$.value,loading:m.$props.loading},{"cell(id)":x(({rowData:U})=>[g("div",Xl,te(U.id),1)]),"cell(username)":x(({rowData:U})=>[g("div",Kl,te(U.userInfo.firstName),1)]),"cell(status)":x(({rowData:U})=>[g("div",er,[o(S,{text:k[U.status],color:E[U.status]},null,8,["text","color"])])]),"cell(payment)":x(({rowData:U})=>[g("div",tr,[(Q(!0),Ie(gt,null,Ua(U.payment,re=>(Q(),pe(S,{key:re.id,text:I(re),color:b[re.status]},null,8,["text","color"]))),128))])]),"cell(manualOperationStatus)":x(({rowData:U})=>[g("div",ar,[o(S,{text:D[U.manualOperationStatus],color:w[U.manualOperationStatus]},null,8,["text","color"])])]),"cell(createdAt)":x(({rowData:U})=>[g("div",sr,te(G(s)(Number(U.createdAt))),1)]),"cell(type)":x(({rowData:U})=>[g("div",nr,te(G(t)[U.type]),1)]),"cell(planName)":x(({rowData:U})=>[g("div",lr,te(U.planName),1)]),"cell(startTime)":x(({rowData:U})=>[g("div",rr,te(U.startTime),1)]),"cell(numGuides)":x(({rowData:U})=>{var re;return[g("div",or,te((re=U.orderPlanEscort)==null?void 0:re.numGuides),1)]}),"cell(attendant)":x(({})=>[ir]),"cell(deposit)":x(({rowData:U})=>[g("div",ur,te(C(U)),1)]),"cell(finalPayment)":x(({rowData:U})=>[g("div",dr,te(v(U)),1)]),"cell(role)":x(({rowData:U})=>[o(S,{text:U.status,color:E[U.status]},null,8,["text","color"])]),"cell(actions)":x(({rowData:U})=>[g("div",cr,[o(O,{preset:"primary",size:"small",icon:"mso-edit","aria-label":"Edit user",onClick:re=>m.$emit("edit-order",U)},null,8,["onClick"]),o(O,{preset:"primary",size:"small",icon:"mso-delete",color:"danger","aria-label":"Delete user",onClick:re=>W(U)},null,8,["onClick"])])]),_:1},8,["sort-by","sorting-order","columns","items","loading"]),g("div",mr,[g("div",null,[g("b",null,"共"+te(m.$props.pagination.total)+" 筆資料",1),ye(" 每頁筆數 "),o(xe,{modelValue:m.$props.pagination.perPage,"onUpdate:modelValue":A[2]||(A[2]=U=>m.$props.pagination.perPage=U),class:"!w-20",options:[10]},null,8,["modelValue"])]),T.value>1?(Q(),Ie("div",fr,[o(O,{preset:"secondary",icon:"va-arrow-left","aria-label":"Previous page",disabled:m.$props.pagination.page===1,onClick:A[3]||(A[3]=U=>m.$props.pagination.page--)},null,8,["disabled"]),o(O,{class:"mr-2",preset:"secondary",icon:"va-arrow-right","aria-label":"Next page",disabled:m.$props.pagination.page===T.value,onClick:A[4]||(A[4]=U=>m.$props.pagination.page++)},null,8,["disabled"]),o(be,{modelValue:m.$props.pagination.page,"onUpdate:modelValue":A[5]||(A[5]=U=>m.$props.pagination.page=U),"buttons-preset":"secondary",pages:T.value,"visible-pages":5,"boundary-links":!1,"direction-links":!1},null,8,["modelValue","pages"])])):Ze("",!0)])],64)}}});const hr=zs(pr,[["__scopeId","data-v-d756e30e"]]),yr={class:"self-stretch flex-col justify-start items-start gap-4 flex"},gr=g("span",{class:"px-2"},"訂單資訊",-1),vr={class:"flex gap-4 flex-col sm:flex-row w-full"},wr={class:"flex gap-4 flex-col sm:flex-row w-full"},Vr={class:"flex gap-4 flex-col sm:flex-row w-full"},Tr={class:"flex gap-4 flex-col sm:flex-row w-full"},Ir={class:"flex gap-4 flex-col sm:flex-row w-full"},Sr={class:"flex gap-4 flex-col sm:flex-row w-full"},xr=g("span",{class:"px-2"},"聯絡資訊",-1),br={class:"flex gap-4 flex-col sm:flex-row w-full"},kr={class:"flex gap-4 flex-col sm:flex-row w-full"},Or={class:"flex gap-4 flex-col sm:flex-row w-full"},Nr={class:"flex gap-4 flex-col sm:flex-row w-full"},Dr=g("span",{class:"px-2"},"訂單狀態",-1),Mr=g("span",{class:"px-2"},"結帳資訊",-1),Er={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},Cr=Pe({__name:"OrderDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(a,{emit:e}){const t=It(),{notify:s}=Be(),{formatDate:n}=ve(),{categorys:l,getServiceDate:r,getServiceDuring:i,getGuideExpect:u,getAttractions:h}=Ee(),d={1:"東方小巴黎",2:"華燈夜生活",3:"西貢河船宴",4:"韓式桑拿趣"},y={[Mt.NORMAL]:"時裝",[Mt.AO_DAI]:"奧黛"},f={[Dt.SCOOTER]:"機車",[Dt.DO_DO_CAR]:"嘟嘟車",[Dt.TAXI]:"TAXI"},c=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],V=a,E={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceDuring:"",numTourists:0,numGuides:0,guideExpect:"",guideDress:"",attractions:"",meetAddress:"",note:"",manualOperationStatus:ee.PENDING,vehicle:"",needHoldHands:""},k=K(()=>{if(!V.order)return E;const p=n(Number(V.order.orderPlanEscort.createdAt));return{id:V.order.id,manualOperationStatus:V.order.manualOperationStatus,createdAt:p,category:l[V.order.type],plan:d[V.order.orderPlanEscort.planId],serviceDate:r(V.order),serviceDuring:i(V.order),numTourists:V.order.orderPlanEscort.numTourists,numGuides:V.order.orderPlanEscort.numGuides,guideExpect:u(V.order),guideDress:y[V.order.orderPlanEscort.guideDress||Mt.NORMAL],attractions:h(V.order),meetAddress:V.order.orderPlanEscort.meetAddress,note:V.order.orderPlanEscort.note,vehicle:f[V.order.orderPlanEscort.vehicle],needHoldHands:V.order.orderPlanEscort.needHoldHands?"是":"否"}}),D=K(()=>{var b,I,$,m,A,S;const p=(b=V.order.userInfo.socialMedia.find(O=>O.type==="line"))==null?void 0:b.accountId,v=(I=V.order.userInfo.socialMedia.find(O=>O.type==="wechat"))==null?void 0:I.accountId,F=($=V.order.userInfo.socialMedia.find(O=>O.type==="telegram"))==null?void 0:$.accountId,_=(m=V.order.userInfo.socialMedia.find(O=>O.type==="zalo"))==null?void 0:m.accountId;return{firstName:V.order.userInfo.firstName,email:V.order.userInfo.email,phone:(A=V.order.userInfo.phone)==null?void 0:A.phoneNumber,phoneCode:(S=V.order.userInfo.phone)==null?void 0:S.code,lineId:p,wechatId:v,telegramId:F,zaloId:_}}),w=B([]),T=e,H=async()=>{var p;if(w.value.length>0&&((p=V.order.orderPlanEscort.guideAssignedIds)==null?void 0:p.join(""))!==w.value.join("")){const v={orderId:V.order.id,guideIds:w.value};await ce.assignGuidesToOrder(v)}if(k.value.meetAddress!==V.order.orderPlanEscort.meetAddress){const v={orderId:V.order.id,planParams:{meetAddress:k.value.meetAddress}};await ce.updateEscortOrder(v)}ce.updateManualOperationStatus({orderId:V.order.id,manualOperationStatus:k.value.manualOperationStatus}),T("save")},W=K(()=>t.guides.filter(p=>p.isActive).map(p=>({text:p.name,value:p.id})));St(()=>{w.value=V.order.orderPlanEscort.guideAssignedIds||[]});const C=async p=>{if(p)try{await navigator.clipboard.writeText(p),s({message:`已複製到剪貼簿: ${p}`,duration:3e3})}catch(v){alert(`Failed to copy text: ${v}`)}};return(p,v)=>{const F=L("VaDivider"),_=L("VaInput"),b=L("VaSelect"),I=L("VaTextarea"),$=L("VaIcon"),m=L("VaButton"),A=L("VaForm");return Q(),pe(A,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:S})=>[g("div",yr,[o(F,{class:"w-full",orientation:"left"},{default:x(()=>[gr]),_:1}),g("div",vr,[o(_,{modelValue:k.value.id,"onUpdate:modelValue":v[0]||(v[0]=O=>k.value.id=O),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:k.value.createdAt,"onUpdate:modelValue":v[1]||(v[1]=O=>k.value.createdAt=O),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",wr,[o(_,{modelValue:k.value.category,"onUpdate:modelValue":v[2]||(v[2]=O=>k.value.category=O),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:k.value.plan,"onUpdate:modelValue":v[3]||(v[3]=O=>k.value.plan=O),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Vr,[o(_,{modelValue:k.value.serviceDate,"onUpdate:modelValue":v[4]||(v[4]=O=>k.value.serviceDate=O),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:k.value.serviceDuring,"onUpdate:modelValue":v[5]||(v[5]=O=>k.value.serviceDuring=O),label:"行程時段",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Tr,[o(_,{modelValue:k.value.numTourists,"onUpdate:modelValue":v[6]||(v[6]=O=>k.value.numTourists=O),label:"遊客人數",class:"w-full sm:w-1/2",name:"numTourists",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:k.value.numGuides,"onUpdate:modelValue":v[7]||(v[7]=O=>k.value.numGuides=O),label:"導遊人數",class:"w-full sm:w-1/2",name:"numGuides",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Ir,[o(_,{modelValue:k.value.guideExpect,"onUpdate:modelValue":v[8]||(v[8]=O=>k.value.guideExpect=O),label:"導遊偏好",class:"w-full sm:w-1/2",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:k.value.guideDress,"onUpdate:modelValue":v[9]||(v[9]=O=>k.value.guideDress=O),label:"導遊穿著",class:"w-full sm:w-1/2",name:"guideDress",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Sr,[o(_,{modelValue:k.value.vehicle,"onUpdate:modelValue":v[10]||(v[10]=O=>k.value.vehicle=O),label:"交通工具",class:"w-full sm:w-1/2",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:k.value.needHoldHands,"onUpdate:modelValue":v[11]||(v[11]=O=>k.value.needHoldHands=O),label:"是否牽手",class:"w-full sm:w-1/2",name:"guideDress",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(b,{modelValue:w.value,"onUpdate:modelValue":v[12]||(v[12]=O=>w.value=O),label:"導遊指派",class:"w-full",options:W.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",multiple:""},null,8,["modelValue","options"]),o(_,{modelValue:k.value.attractions,"onUpdate:modelValue":v[13]||(v[13]=O=>k.value.attractions=O),label:"景點偏好",class:"w-full",name:"attractions",readonly:"",preset:"solid"},null,8,["modelValue"]),o(I,{modelValue:k.value.meetAddress,"onUpdate:modelValue":v[14]||(v[14]=O=>k.value.meetAddress=O),label:"會合地址",class:"w-full",name:"meetAddress"},null,8,["modelValue"]),o(I,{modelValue:k.value.note,"onUpdate:modelValue":v[15]||(v[15]=O=>k.value.note=O),label:"訂單備註",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{class:"w-full",orientation:"left"},{default:x(()=>[xr]),_:1}),g("div",br,[o(_,{modelValue:D.value.firstName,"onUpdate:modelValue":v[16]||(v[16]=O=>D.value.firstName=O),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:D.value.email,"onUpdate:modelValue":v[18]||(v[18]=O=>D.value.email=O),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o($,{name:"content_copy",color:"secondary",onClick:v[17]||(v[17]=()=>C(D.value.email))})]),_:1},8,["modelValue"])]),g("div",kr,[o(_,{modelValue:D.value.phoneCode,"onUpdate:modelValue":v[19]||(v[19]=O=>D.value.phoneCode=O),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(_,{modelValue:D.value.phone,"onUpdate:modelValue":v[21]||(v[21]=O=>D.value.phone=O),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o($,{name:"content_copy",color:"secondary",onClick:v[20]||(v[20]=()=>C(D.value.phone))})]),_:1},8,["modelValue"])]),g("div",Or,[o(_,{modelValue:D.value.lineId,"onUpdate:modelValue":v[23]||(v[23]=O=>D.value.lineId=O),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[D.value.lineId?{name:"appendInner",fn:x(()=>[o($,{name:"content_copy",color:"secondary",onClick:v[22]||(v[22]=()=>C(D.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(_,{modelValue:D.value.wechatId,"onUpdate:modelValue":v[25]||(v[25]=O=>D.value.wechatId=O),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[D.value.wechatId?{name:"appendInner",fn:x(()=>[o($,{name:"content_copy",color:"secondary",onClick:v[24]||(v[24]=()=>C(D.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",Nr,[o(_,{modelValue:D.value.telegramId,"onUpdate:modelValue":v[27]||(v[27]=O=>D.value.telegramId=O),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[D.value.telegramId?{name:"appendInner",fn:x(()=>[o($,{name:"content_copy",color:"secondary",onClick:v[26]||(v[26]=()=>C(D.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(_,{modelValue:D.value.zaloId,"onUpdate:modelValue":v[29]||(v[29]=O=>D.value.zaloId=O),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[D.value.zaloId?{name:"appendInner",fn:x(()=>[o($,{name:"content_copy",color:"secondary",onClick:v[28]||(v[28]=()=>C(D.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(F,{class:"w-full",orientation:"left"},{default:x(()=>[Dr]),_:1}),o(b,{modelValue:k.value.manualOperationStatus,"onUpdate:modelValue":v[30]||(v[30]=O=>k.value.manualOperationStatus=O),label:"操作狀態",class:"w-full",options:c,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(F,{class:"w-full",orientation:"left"},{default:x(()=>[Mr]),_:1}),g("div",Er,[o(m,{preset:"secondary",color:"secondary",onClick:v[31]||(v[31]=O=>p.$emit("close"))},{default:x(()=>[ye("取消")]),_:1}),o(m,{disabled:!S,onClick:H},{default:x(()=>[ye(te(a.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),Ar=()=>({getStartTime:e=>M.fromMillis(Number(e.orderPlanShuttle.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm")}),$r={class:"self-stretch flex-col justify-start items-start gap-4 flex"},Pr=g("span",{class:"px-2"},"訂單資訊",-1),Ur={class:"flex gap-4 flex-col sm:flex-row w-full"},Fr={class:"flex gap-4 flex-col sm:flex-row w-full"},_r={class:"flex gap-4 flex-col sm:flex-row w-full"},Lr={class:"flex gap-4 flex-col sm:flex-row w-full"},Wr={class:"flex gap-4 flex-col sm:flex-row w-full"},Rr={class:"flex gap-4 flex-col sm:flex-row w-full"},Hr={key:0,class:"flex gap-4 flex-col sm:flex-row w-full"},zr={class:"flex gap-4 flex-col sm:flex-row w-full"},Zr=g("span",{class:"px-2"},"聯絡資訊",-1),qr={class:"flex gap-4 flex-col sm:flex-row w-full"},Br={class:"flex gap-4 flex-col sm:flex-row w-full"},Gr={class:"flex gap-4 flex-col sm:flex-row w-full"},Yr={class:"flex gap-4 flex-col sm:flex-row w-full"},jr=g("span",{class:"px-2"},"訂單狀態",-1),Jr=g("span",{class:"px-2"},"結帳資訊",-1),Qr={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},Xr=Pe({__name:"OrderShuttleDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(a,{emit:e}){const{notify:t}=Be(),{formatDate:s}=ve(),{categorys:n}=Ee(),{getStartTime:l}=Ar(),r={1:"接機",2:"送機"},i={1:"經濟五座",2:"尊爵五座",3:"經濟七座",4:"商務七座",5:"尊爵七座",6:"商務九座",7:"多人巴士"},u={1:"1郡/3郡/富潤郡/新平郡",2:"7郡/守德市",3:"4郡/5郡/10郡/平盛郡",4:"其他郡（6郡/8郡/11郡/12郡/平新郡/舊邑郡/新富郡）"},h=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],d=a,y={id:-1,manualOperationStatus:ee.PENDING,createdAt:"",category:"",planId:-1,plan:"",cardName:"",areaName:"",serviceDate:"",serviceDuring:"",buyFastPass:"",passengerNumber:0,passengerName:"",largeLuggageAmount:0,smallLuggageAmount:0,flightNumber:"",flightArrivalTime:"",flightType:"",customLocation:"",hotelName:"",note:""},f=K(()=>{if(!d.order)return y;const w=s(Number(d.order.orderPlanShuttle.createdAt));return{id:d.order.id,manualOperationStatus:d.order.manualOperationStatus,createdAt:w,category:n[d.order.type],planId:d.order.orderPlanShuttle.planId,plan:r[d.order.orderPlanShuttle.planId],cardName:i[d.order.orderPlanShuttle.carId],areaName:u[d.order.orderPlanShuttle.areaId],serviceDate:s(Number(d.order.orderPlanShuttle.time)),serviceDuring:l(d.order),buyFastPass:d.order.orderPlanShuttle.buyFastPass?"是":"否",passengerNumber:d.order.orderPlanShuttle.passengerNumber,passengerName:d.order.orderPlanShuttle.passengerName,largeLuggageAmount:d.order.orderPlanShuttle.largeLuggageAmount,smallLuggageAmount:d.order.orderPlanShuttle.smallLuggageAmount,flightNumber:d.order.orderPlanShuttle.flightNumber,flightArrivalTime:d.order.orderPlanShuttle.flightArrivalTime,flightType:d.order.orderPlanShuttle.flightType==="international"?"國際線":"國內線",customLocation:d.order.orderPlanShuttle.customLocation,hotelName:d.order.orderPlanShuttle.hotelName,note:d.order.orderPlanShuttle.note}}),c=K(()=>{var C,p,v,F,_,b;const w=(C=d.order.userInfo.socialMedia.find(I=>I.type==="line"))==null?void 0:C.accountId,T=(p=d.order.userInfo.socialMedia.find(I=>I.type==="wechat"))==null?void 0:p.accountId,H=(v=d.order.userInfo.socialMedia.find(I=>I.type==="telegram"))==null?void 0:v.accountId,W=(F=d.order.userInfo.socialMedia.find(I=>I.type==="zalo"))==null?void 0:F.accountId;return{firstName:d.order.userInfo.firstName,email:d.order.userInfo.email,phone:(_=d.order.userInfo.phone)==null?void 0:_.phoneNumber,phoneCode:(b=d.order.userInfo.phone)==null?void 0:b.code,lineId:w,wechatId:T,telegramId:H,zaloId:W}}),V=e,E=async()=>{ce.updateManualOperationStatus({orderId:d.order.id,manualOperationStatus:f.value.manualOperationStatus}),V("save")},k=K(()=>f.value.planId===1);St(()=>{});const D=async w=>{if(w)try{await navigator.clipboard.writeText(w),t({message:`已複製到剪貼簿: ${w}`,duration:3e3})}catch(T){alert(`Failed to copy text: ${T}`)}};return(w,T)=>{const H=L("VaDivider"),W=L("VaInput"),C=L("VaTextarea"),p=L("VaIcon"),v=L("VaSelect"),F=L("VaButton"),_=L("VaForm");return Q(),pe(_,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:b})=>[g("div",$r,[o(H,{class:"w-full",orientation:"left"},{default:x(()=>[Pr]),_:1}),g("div",Ur,[o(W,{modelValue:f.value.id,"onUpdate:modelValue":T[0]||(T[0]=I=>f.value.id=I),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.createdAt,"onUpdate:modelValue":T[1]||(T[1]=I=>f.value.createdAt=I),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Fr,[o(W,{modelValue:f.value.category,"onUpdate:modelValue":T[2]||(T[2]=I=>f.value.category=I),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.plan,"onUpdate:modelValue":T[3]||(T[3]=I=>f.value.plan=I),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",_r,[o(W,{modelValue:f.value.cardName,"onUpdate:modelValue":T[4]||(T[4]=I=>f.value.cardName=I),label:"車款",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.areaName,"onUpdate:modelValue":T[5]||(T[5]=I=>f.value.areaName=I),label:"接送區域",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Lr,[o(W,{modelValue:f.value.serviceDate,"onUpdate:modelValue":T[6]||(T[6]=I=>f.value.serviceDate=I),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.serviceDuring,"onUpdate:modelValue":T[7]||(T[7]=I=>f.value.serviceDuring=I),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Wr,[o(W,{modelValue:f.value.passengerNumber,"onUpdate:modelValue":T[8]||(T[8]=I=>f.value.passengerNumber=I),label:"乘客人數",class:"w-full sm:w-1/2",name:"passengerNumber",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.passengerName,"onUpdate:modelValue":T[9]||(T[9]=I=>f.value.passengerName=I),label:k.value?"舉牌大名":"乘客姓名",class:"w-full sm:w-1/2",name:"passengerName",readonly:"",preset:"solid"},null,8,["modelValue","label"])]),g("div",Rr,[o(W,{modelValue:f.value.largeLuggageAmount,"onUpdate:modelValue":T[10]||(T[10]=I=>f.value.largeLuggageAmount=I),label:"大行李",class:"w-full sm:w-1/2",name:"largeLuggageAmount",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.smallLuggageAmount,"onUpdate:modelValue":T[11]||(T[11]=I=>f.value.smallLuggageAmount=I),label:"小行李",class:"w-full sm:w-1/2",name:"smallLuggageAmount",readonly:"",preset:"solid"},null,8,["modelValue"])]),k.value?(Q(),Ie("div",Hr,[o(W,{modelValue:f.value.flightNumber,"onUpdate:modelValue":T[12]||(T[12]=I=>f.value.flightNumber=I),label:"航班編號",class:"w-full sm:w-1/2",name:"flightNumber",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.flightArrivalTime,"onUpdate:modelValue":T[13]||(T[13]=I=>f.value.flightArrivalTime=I),label:"航班抵達時間",class:"w-full sm:w-1/2",name:"flightArrivalTime",readonly:"",preset:"solid"},null,8,["modelValue"])])):Ze("",!0),g("div",zr,[o(W,{modelValue:f.value.flightType,"onUpdate:modelValue":T[14]||(T[14]=I=>f.value.flightType=I),label:k.value?"航班類別":"下車地點",class:"w-full sm:w-1/2",name:"flightType",readonly:"",preset:"solid"},null,8,["modelValue","label"])]),o(C,{modelValue:f.value.customLocation,"onUpdate:modelValue":T[15]||(T[15]=I=>f.value.customLocation=I),label:k.value?"下車地點":"上車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue","label"]),o(C,{modelValue:f.value.hotelName,"onUpdate:modelValue":T[16]||(T[16]=I=>f.value.hotelName=I),label:"飯店名稱",class:"w-full",name:"hotelName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(C,{modelValue:f.value.note,"onUpdate:modelValue":T[17]||(T[17]=I=>f.value.note=I),label:"訂單備註",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{class:"w-full",orientation:"left"},{default:x(()=>[Zr]),_:1}),g("div",qr,[o(W,{modelValue:c.value.firstName,"onUpdate:modelValue":T[18]||(T[18]=I=>c.value.firstName=I),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:c.value.email,"onUpdate:modelValue":T[20]||(T[20]=I=>c.value.email=I),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(p,{name:"content_copy",color:"secondary",onClick:T[19]||(T[19]=()=>D(c.value.email))})]),_:1},8,["modelValue"])]),g("div",Br,[o(W,{modelValue:c.value.phoneCode,"onUpdate:modelValue":T[21]||(T[21]=I=>c.value.phoneCode=I),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:c.value.phone,"onUpdate:modelValue":T[23]||(T[23]=I=>c.value.phone=I),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(p,{name:"content_copy",color:"secondary",onClick:T[22]||(T[22]=()=>D(c.value.phone))})]),_:1},8,["modelValue"])]),g("div",Gr,[o(W,{modelValue:c.value.lineId,"onUpdate:modelValue":T[25]||(T[25]=I=>c.value.lineId=I),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[c.value.lineId?{name:"appendInner",fn:x(()=>[o(p,{name:"content_copy",color:"secondary",onClick:T[24]||(T[24]=()=>D(c.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(W,{modelValue:c.value.wechatId,"onUpdate:modelValue":T[27]||(T[27]=I=>c.value.wechatId=I),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[c.value.wechatId?{name:"appendInner",fn:x(()=>[o(p,{name:"content_copy",color:"secondary",onClick:T[26]||(T[26]=()=>D(c.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",Yr,[o(W,{modelValue:c.value.telegramId,"onUpdate:modelValue":T[29]||(T[29]=I=>c.value.telegramId=I),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[c.value.telegramId?{name:"appendInner",fn:x(()=>[o(p,{name:"content_copy",color:"secondary",onClick:T[28]||(T[28]=()=>D(c.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(W,{modelValue:c.value.zaloId,"onUpdate:modelValue":T[31]||(T[31]=I=>c.value.zaloId=I),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[c.value.zaloId?{name:"appendInner",fn:x(()=>[o(p,{name:"content_copy",color:"secondary",onClick:T[30]||(T[30]=()=>D(c.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(H,{class:"w-full",orientation:"left"},{default:x(()=>[jr]),_:1}),o(v,{modelValue:f.value.manualOperationStatus,"onUpdate:modelValue":T[32]||(T[32]=I=>f.value.manualOperationStatus=I),label:"操作狀態",class:"w-full",options:h,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(H,{class:"w-full",orientation:"left"},{default:x(()=>[Jr]),_:1}),g("div",Qr,[o(F,{preset:"secondary",color:"secondary",onClick:T[33]||(T[33]=I=>w.$emit("close"))},{default:x(()=>[ye("取消")]),_:1}),o(F,{disabled:!b,onClick:E},{default:x(()=>[ye(te(a.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),Kr=()=>({getStartTime:e=>M.fromMillis(Number(e.orderPlanCharter.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm")}),eo={class:"self-stretch flex-col justify-start items-start gap-4 flex"},to=g("span",{class:"px-2"},"訂單資訊",-1),ao={class:"flex gap-4 flex-col sm:flex-row w-full"},so={class:"flex gap-4 flex-col sm:flex-row w-full"},no={class:"flex gap-4 flex-col sm:flex-row w-full"},lo={class:"flex gap-4 flex-col sm:flex-row w-full"},ro={class:"flex gap-4 flex-col sm:flex-row w-full"},oo=g("span",{class:"px-2"},"聯絡資訊",-1),io={class:"flex gap-4 flex-col sm:flex-row w-full"},uo={class:"flex gap-4 flex-col sm:flex-row w-full"},co={class:"flex gap-4 flex-col sm:flex-row w-full"},mo={class:"flex gap-4 flex-col sm:flex-row w-full"},fo=g("span",{class:"px-2"},"訂單狀態",-1),po=g("span",{class:"px-2"},"結帳資訊",-1),ho={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},yo=Pe({__name:"OrderCharterDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(a,{emit:e}){const{notify:t}=Be(),{formatDate:s}=ve(),{categorys:n}=Ee(),{getStartTime:l}=Kr(),r={1:"包車旅遊"},i={1:"經濟五座",2:"尊爵五座",3:"經濟七座",4:"商務七座",5:"尊爵七座",6:"商務九座",7:"多人巴士"},u={1:"4hr/50km",2:"4hr/100km",3:"8hr/100km",4:"8hr/200km",5:"10hr/100km",6:"10hr/300km"},h=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],d=a,y={id:-1,manualOperationStatus:"pending",createdAt:"",category:"",plan:"",cardName:"",days:0,packageName:"",serviceDate:"",serviceDuring:"",passengerNumber:0,pickupLocation:"",dropOffLocation:"",travelPlanNote:""},f=K(()=>{if(!d.order)return y;const D=s(Number(d.order.orderPlanCharter.createdAt));return{id:d.order.id,manualOperationStatus:d.order.manualOperationStatus,createdAt:D,category:n[d.order.type],plan:r[d.order.orderPlanCharter.planId],cardName:i[d.order.orderPlanCharter.carId],days:d.order.orderPlanCharter.days,packageName:u[d.order.orderPlanCharter.packageId],serviceDate:s(Number(d.order.orderPlanCharter.time)),serviceDuring:l(d.order),passengerNumber:d.order.orderPlanCharter.passengerNumber,pickupLocation:d.order.orderPlanCharter.pickupLocation,dropOffLocation:d.order.orderPlanCharter.dropOffLocation,travelPlanNote:d.order.orderPlanCharter.travelPlanNote}}),c=K(()=>{var W,C,p,v,F,_;const D=(W=d.order.userInfo.socialMedia.find(b=>b.type==="line"))==null?void 0:W.accountId,w=(C=d.order.userInfo.socialMedia.find(b=>b.type==="wechat"))==null?void 0:C.accountId,T=(p=d.order.userInfo.socialMedia.find(b=>b.type==="telegram"))==null?void 0:p.accountId,H=(v=d.order.userInfo.socialMedia.find(b=>b.type==="zalo"))==null?void 0:v.accountId;return{firstName:d.order.userInfo.firstName,email:d.order.userInfo.email,phone:(F=d.order.userInfo.phone)==null?void 0:F.phoneNumber,phoneCode:(_=d.order.userInfo.phone)==null?void 0:_.code,lineId:D,wechatId:w,telegramId:T,zaloId:H}}),V=e,E=async()=>{ce.updateManualOperationStatus({orderId:d.order.id,manualOperationStatus:f.value.manualOperationStatus}),V("save")},k=async D=>{if(D)try{await navigator.clipboard.writeText(D),t({message:`已複製到剪貼簿: ${D}`,duration:3e3})}catch(w){alert(`Failed to copy text: ${w}`)}};return(D,w)=>{const T=L("VaDivider"),H=L("VaInput"),W=L("VaTextarea"),C=L("VaIcon"),p=L("VaSelect"),v=L("VaButton"),F=L("VaForm");return Q(),pe(F,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:_})=>[g("div",eo,[o(T,{class:"w-full",orientation:"left"},{default:x(()=>[to]),_:1}),g("div",ao,[o(H,{modelValue:f.value.id,"onUpdate:modelValue":w[0]||(w[0]=b=>f.value.id=b),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{modelValue:f.value.createdAt,"onUpdate:modelValue":w[1]||(w[1]=b=>f.value.createdAt=b),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",so,[o(H,{modelValue:f.value.category,"onUpdate:modelValue":w[2]||(w[2]=b=>f.value.category=b),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{modelValue:f.value.plan,"onUpdate:modelValue":w[3]||(w[3]=b=>f.value.plan=b),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",no,[o(H,{modelValue:f.value.cardName,"onUpdate:modelValue":w[4]||(w[4]=b=>f.value.cardName=b),label:"車款",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{modelValue:f.value.packageName,"onUpdate:modelValue":w[5]||(w[5]=b=>f.value.packageName=b),label:"用車方案",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",lo,[o(H,{modelValue:f.value.serviceDate,"onUpdate:modelValue":w[6]||(w[6]=b=>f.value.serviceDate=b),label:"行程日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{modelValue:f.value.serviceDuring,"onUpdate:modelValue":w[7]||(w[7]=b=>f.value.serviceDuring=b),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",ro,[o(H,{modelValue:f.value.days,"onUpdate:modelValue":w[8]||(w[8]=b=>f.value.days=b),label:"天數",class:"w-full sm:w-1/2",name:"serviceDuring",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{modelValue:f.value.passengerNumber,"onUpdate:modelValue":w[9]||(w[9]=b=>f.value.passengerNumber=b),label:"乘客人數",class:"w-full sm:w-1/2",name:"numTourists",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(W,{modelValue:f.value.pickupLocation,"onUpdate:modelValue":w[10]||(w[10]=b=>f.value.pickupLocation=b),label:"上車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.dropOffLocation,"onUpdate:modelValue":w[11]||(w[11]=b=>f.value.dropOffLocation=b),label:"下車地點",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(W,{modelValue:f.value.travelPlanNote,"onUpdate:modelValue":w[12]||(w[12]=b=>f.value.travelPlanNote=b),label:"預計行程路線",class:"w-full",name:"note",readonly:"",preset:"solid"},null,8,["modelValue"]),o(T,{class:"w-full",orientation:"left"},{default:x(()=>[oo]),_:1}),g("div",io,[o(H,{modelValue:c.value.firstName,"onUpdate:modelValue":w[13]||(w[13]=b=>c.value.firstName=b),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{modelValue:c.value.email,"onUpdate:modelValue":w[15]||(w[15]=b=>c.value.email=b),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(C,{name:"content_copy",color:"secondary",onClick:w[14]||(w[14]=()=>k(c.value.email))})]),_:1},8,["modelValue"])]),g("div",uo,[o(H,{modelValue:c.value.phoneCode,"onUpdate:modelValue":w[16]||(w[16]=b=>c.value.phoneCode=b),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(H,{modelValue:c.value.phone,"onUpdate:modelValue":w[18]||(w[18]=b=>c.value.phone=b),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(C,{name:"content_copy",color:"secondary",onClick:w[17]||(w[17]=()=>k(c.value.phone))})]),_:1},8,["modelValue"])]),g("div",co,[o(H,{modelValue:c.value.lineId,"onUpdate:modelValue":w[20]||(w[20]=b=>c.value.lineId=b),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[c.value.lineId?{name:"appendInner",fn:x(()=>[o(C,{name:"content_copy",color:"secondary",onClick:w[19]||(w[19]=()=>k(c.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(H,{modelValue:c.value.wechatId,"onUpdate:modelValue":w[22]||(w[22]=b=>c.value.wechatId=b),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[c.value.wechatId?{name:"appendInner",fn:x(()=>[o(C,{name:"content_copy",color:"secondary",onClick:w[21]||(w[21]=()=>k(c.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",mo,[o(H,{modelValue:c.value.telegramId,"onUpdate:modelValue":w[24]||(w[24]=b=>c.value.telegramId=b),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[c.value.telegramId?{name:"appendInner",fn:x(()=>[o(C,{name:"content_copy",color:"secondary",onClick:w[23]||(w[23]=()=>k(c.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(H,{modelValue:c.value.zaloId,"onUpdate:modelValue":w[26]||(w[26]=b=>c.value.zaloId=b),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[c.value.zaloId?{name:"appendInner",fn:x(()=>[o(C,{name:"content_copy",color:"secondary",onClick:w[25]||(w[25]=()=>k(c.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(T,{class:"w-full",orientation:"left"},{default:x(()=>[fo]),_:1}),o(p,{modelValue:f.value.manualOperationStatus,"onUpdate:modelValue":w[27]||(w[27]=b=>f.value.manualOperationStatus=b),label:"操作狀態",class:"w-full",options:h,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(T,{class:"w-full",orientation:"left"},{default:x(()=>[po]),_:1}),g("div",ho,[o(v,{preset:"secondary",color:"secondary",onClick:w[28]||(w[28]=b=>D.$emit("close"))},{default:x(()=>[ye("取消")]),_:1}),o(v,{disabled:!_,onClick:E},{default:x(()=>[ye(te(a.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),{formatDate:go}=ve(),vo=()=>B({page:1,perPage:10,total:0}),wo=()=>B({sortBy:"createdAt",sortingOrder:null}),Vo=()=>B({isActive:!0,search:""}),To=a=>{const e=B(!1),t=B([]),{filters:s=Vo(),sorting:n=wo(),pagination:l=vo()}=a||{},r=async()=>{e.value=!0;const y={...G(s),sortBy:n.value.sortBy,sortOrder:n.value.sortingOrder,offset:(l.value.page-1)*l.value.perPage,limit:l.value.perPage,...s.value.isActive&&{excludeStatus:"initial"},...!s.value.isActive&&{status:"initial"}},{data:f}=await ce.getOrders(y);t.value=f.data;const c={page:l.value.page,perPage:10,total:f.total};i(()=>{l.value=c}),e.value=!1},{ignoreUpdates:i}=Bt([l,n],r,{deep:!0});return Gt(s,()=>{l.value.page=1,r()},{deep:!0}),r(),{isLoading:e,filters:s,sorting:n,pagination:l,orders:t,fetch:r,getServiceDate:y=>go(Number(y.orderPlanDragonMassage.time)),getStartTime:y=>M.fromMillis(Number(y.orderPlanDragonMassage.time),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),getStartTime2:y=>M.fromMillis(Number(y.orderPlanDragonMassage.secondTime),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),async add(y){console.log("add order",y)},async update(y){console.log("update order",y)},async remove(y){console.log("remove order",y)}}},Io={class:"self-stretch flex-col justify-start items-start gap-4 flex"},So=g("span",{class:"px-2"},"訂單資訊",-1),xo={class:"flex gap-4 flex-col sm:flex-row w-full"},bo={class:"flex gap-4 flex-col sm:flex-row w-full"},ko={class:"flex gap-4 flex-col sm:flex-row w-full"},Oo={class:"flex gap-4 flex-col sm:flex-row w-full"},No={class:"flex gap-4 flex-col sm:flex-row w-full"},Do={class:"flex gap-4 flex-col sm:flex-row w-full"},Mo={key:0,class:"w-full"},Eo=g("div",{class:"mb-2 text-sm font-medium text-gray-700"},"旅店圖片",-1),Co={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Ao=["onClick"],$o=["src","alt"],Po=g("span",{class:"px-2"},"管理確認區",-1),Uo={class:"w-full"},Fo={key:0,class:"w-full mt-4"},_o={class:"flex gap-4 flex-col sm:flex-row w-full"},Lo=g("div",{class:"text-sm text-gray-600 mt-1"},"* 時間將以越南時區保存",-1),Wo=g("span",{class:"px-2"},"訂單狀態",-1),Ro=g("span",{class:"px-2"},"聯絡資訊",-1),Ho={class:"flex gap-4 flex-col sm:flex-row w-full"},zo={class:"flex gap-4 flex-col sm:flex-row w-full"},Zo={class:"flex gap-4 flex-col sm:flex-row w-full"},qo={class:"flex gap-4 flex-col sm:flex-row w-full"},Bo=g("span",{class:"px-2"},"結帳資訊",-1),Go={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},Yo=Pe({__name:"OrderMassageDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(a,{emit:e}){const{notify:t}=Be(),{formatDate:s,formatDateV:n}=ve(),{categorys:l}=Ee(),{getStartTime:r,getStartTime2:i}=To(),u=It(),h={1:"龍筋按摩"},d=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],y=a,f={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceStartTime:"",note:"",serviceDate2:"",serviceStartTime2:"",hotelAddress:"",needHotelBooking:"",manualOperationStatus:ee.PENDING,hotelImageUrls:[],confirmedTherapistId:null,selectedTherapists:"",confirmedTime:""},c=K(()=>{if(!y.order)return f;const $=s(Number(y.order.orderPlanDragonMassage.createdAt));return{id:y.order.id,manualOperationStatus:y.order.manualOperationStatus,createdAt:$,category:l[y.order.type],plan:h[y.order.orderPlanDragonMassage.planId],selectedTherapists:V(y.order.orderPlanDragonMassage.selectedTherapists||[]),serviceDate:n(Number(y.order.orderPlanDragonMassage.time)),serviceStartTime:r(y.order),serviceDate2:n(Number(y.order.orderPlanDragonMassage.secondTime)),serviceStartTime2:i(y.order),hotelAddress:y.order.orderPlanDragonMassage.hotelAddress,note:y.order.orderPlanDragonMassage.note,needHotelBooking:y.order.orderPlanDragonMassage.needHotelBooking?"是":"否",hotelImageUrls:y.order.orderPlanDragonMassage.hotelImageUrls||[],confirmedTherapistId:y.order.orderPlanDragonMassage.confirmedTherapistId||null,confirmedTime:y.order.orderPlanDragonMassage.confirmedTime||""}}),V=$=>$.map(m=>{const A=u.therapists.find(S=>S.id===m);return A?`${m}.${A.name}`:`未知導遊(${m})`}).join(", "),E=K(()=>{var O,we,xe,be,U,re;const $=(O=y.order.userInfo.socialMedia.find(Te=>Te.type==="line"))==null?void 0:O.accountId,m=(we=y.order.userInfo.socialMedia.find(Te=>Te.type==="wechat"))==null?void 0:we.accountId,A=(xe=y.order.userInfo.socialMedia.find(Te=>Te.type==="telegram"))==null?void 0:xe.accountId,S=(be=y.order.userInfo.socialMedia.find(Te=>Te.type==="zalo"))==null?void 0:be.accountId;return{firstName:y.order.userInfo.firstName,email:y.order.userInfo.email,phone:(U=y.order.userInfo.phone)==null?void 0:U.phoneNumber,phoneCode:(re=y.order.userInfo.phone)==null?void 0:re.code,lineId:$,wechatId:m,telegramId:A,zaloId:S}}),k=e,D=async()=>{if(y.order.manualOperationStatus!==c.value.manualOperationStatus&&await ce.updateManualOperationStatus({orderId:y.order.id,manualOperationStatus:c.value.manualOperationStatus}),y.order.orderPlanDragonMassage.confirmedTherapistId!==b.value||I.value!==y.order.orderPlanDragonMassage.confirmedTime){let $=I.value;if(I.value==="custom"&&C.value&&p.value){const m=M.fromJSDate(C.value).toFormat("yyyy-MM-dd"),A=M.fromJSDate(p.value).toFormat("HH:mm"),S=`${m} ${A}`;$=M.fromFormat(S,"yyyy-MM-dd HH:mm",{zone:"Asia/Ho_Chi_Minh"}).toMillis().toString()}await ce.updateMassageOrder({orderId:y.order.id,planParams:{confirmedTherapistId:b.value,confirmedTime:$}})}k("save")};St(()=>{b.value=c.value.confirmedTherapistId||null;const $=c.value.confirmedTime||"";if($)if($===y.order.orderPlanDragonMassage.time||$===y.order.orderPlanDragonMassage.secondTime)I.value=$;else{I.value="custom";const A=M.fromMillis(Number($),{zone:"Asia/Ho_Chi_Minh"}),S=A.year,O=A.month-1,we=A.day,xe=A.hour,be=A.minute;C.value=new Date(S,O,we),p.value=new Date(2e3,0,1,xe,be)}});const w=async $=>{if($)try{await navigator.clipboard.writeText($),t({message:`已複製到剪貼簿: ${$}`,duration:3e3})}catch(m){alert(`Failed to copy text: ${m}`)}},T=$=>{window.open($,"_blank")},H=$=>{const m=$.target;m&&(m.style.display="none")},W=K(()=>{if(!y.order)return[];const $=[],{formatDateTimeV:m}=ve();y.order.orderPlanDragonMassage.time&&$.push({text:`時間 1: ${m(Number(y.order.orderPlanDragonMassage.time))}`,value:y.order.orderPlanDragonMassage.time}),y.order.orderPlanDragonMassage.secondTime&&$.push({text:`時間 2: ${m(Number(y.order.orderPlanDragonMassage.secondTime))}`,value:y.order.orderPlanDragonMassage.secondTime});let A="自訂時間";if(I.value==="custom"&&C.value&&p.value){const S=M.fromJSDate(C.value).toFormat("yyyy-MM-dd"),O=M.fromJSDate(p.value).toFormat("HH:mm");A=`自訂時間: ${S} ${O}`}return $.push({text:A,value:"custom"}),$}),C=B(new Date),p=B(new Date),v=K(()=>I.value==="custom"),F=()=>{},_=K(()=>u.therapists.filter($=>$.isActive).map($=>({text:`${$.number}.${$.name}`,value:$.id}))),b=B(null),I=B("");return($,m)=>{const A=L("VaDivider"),S=L("VaInput"),O=L("VaTextarea"),we=L("VaSelect"),xe=L("VaDateInput"),be=L("VaTimeInput"),U=L("VaIcon"),re=L("VaButton"),Te=L("VaForm");return Q(),pe(Te,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:Fs})=>[g("div",Io,[o(A,{class:"w-full",orientation:"left"},{default:x(()=>[So]),_:1}),g("div",xo,[o(S,{modelValue:c.value.id,"onUpdate:modelValue":m[0]||(m[0]=P=>c.value.id=P),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(S,{modelValue:c.value.createdAt,"onUpdate:modelValue":m[1]||(m[1]=P=>c.value.createdAt=P),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",bo,[o(S,{modelValue:c.value.category,"onUpdate:modelValue":m[2]||(m[2]=P=>c.value.category=P),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(S,{modelValue:c.value.plan,"onUpdate:modelValue":m[3]||(m[3]=P=>c.value.plan=P),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",ko,[o(S,{modelValue:c.value.serviceDate,"onUpdate:modelValue":m[4]||(m[4]=P=>c.value.serviceDate=P),label:"預約日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(S,{modelValue:c.value.serviceStartTime,"onUpdate:modelValue":m[5]||(m[5]=P=>c.value.serviceStartTime=P),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Oo,[o(S,{modelValue:c.value.serviceDate2,"onUpdate:modelValue":m[6]||(m[6]=P=>c.value.serviceDate2=P),label:"預約日期2",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(S,{modelValue:c.value.serviceStartTime2,"onUpdate:modelValue":m[7]||(m[7]=P=>c.value.serviceStartTime2=P),label:"起始時間2",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",No,[o(S,{modelValue:c.value.selectedTherapists,"onUpdate:modelValue":m[8]||(m[8]=P=>c.value.selectedTherapists=P),label:"技師偏好",class:"w-full",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",Do,[o(S,{modelValue:c.value.needHotelBooking,"onUpdate:modelValue":m[9]||(m[9]=P=>c.value.needHotelBooking=P),label:"代訂旅店",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(O,{modelValue:c.value.hotelAddress,"onUpdate:modelValue":m[10]||(m[10]=P=>c.value.hotelAddress=P),label:"旅店地址",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),c.value.hotelImageUrls&&c.value.hotelImageUrls.length>0?(Q(),Ie("div",Mo,[Eo,g("div",Co,[(Q(!0),Ie(gt,null,Ua(c.value.hotelImageUrls,(P,aa)=>(Q(),Ie("div",{key:aa,class:"relative aspect-square overflow-hidden rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:Ti=>T(P)},[g("img",{src:P,alt:`旅店圖片 ${aa+1}`,class:"w-full h-full object-cover",loading:"lazy",onError:H},null,40,$o)],8,Ao))),128))])])):Ze("",!0),o(O,{modelValue:c.value.note,"onUpdate:modelValue":m[11]||(m[11]=P=>c.value.note=P),label:"訂單備註",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[Po]),_:1}),g("div",Uo,[o(we,{modelValue:b.value,"onUpdate:modelValue":m[12]||(m[12]=P=>b.value=P),label:"龍筋老師指派",class:"w-full",options:_.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",placeholder:"未指派"},null,8,["modelValue","options"]),o(we,{modelValue:I.value,"onUpdate:modelValue":m[13]||(m[13]=P=>I.value=P),label:"時間確認",class:"w-full mt-4",options:W.value,name:"confirmedTime","text-by":"text","track-by":"value","value-by":"value",placeholder:"請選擇確認時間",clearable:""},null,8,["modelValue","options"]),v.value?(Q(),Ie("div",Fo,[g("div",_o,[o(xe,{modelValue:C.value,"onUpdate:modelValue":m[14]||(m[14]=P=>C.value=P),label:"自訂日期",class:"w-full sm:w-1/2",placeholder:"請選擇日期",clearable:"",onInput:F},null,8,["modelValue"]),o(be,{modelValue:p.value,"onUpdate:modelValue":m[15]||(m[15]=P=>p.value=P),label:"自訂時間",class:"w-full sm:w-1/2",placeholder:"請選擇時間",clearable:"",onInput:F},null,8,["modelValue"])]),Lo])):Ze("",!0)]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[Wo]),_:1}),o(we,{modelValue:c.value.manualOperationStatus,"onUpdate:modelValue":m[16]||(m[16]=P=>c.value.manualOperationStatus=P),label:"操作狀態",class:"w-full",options:d,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[Ro]),_:1}),g("div",Ho,[o(S,{modelValue:E.value.firstName,"onUpdate:modelValue":m[17]||(m[17]=P=>E.value.firstName=P),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(S,{modelValue:E.value.email,"onUpdate:modelValue":m[19]||(m[19]=P=>E.value.email=P),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:m[18]||(m[18]=()=>w(E.value.email))})]),_:1},8,["modelValue"])]),g("div",zo,[o(S,{modelValue:E.value.phoneCode,"onUpdate:modelValue":m[20]||(m[20]=P=>E.value.phoneCode=P),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(S,{modelValue:E.value.phone,"onUpdate:modelValue":m[22]||(m[22]=P=>E.value.phone=P),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:m[21]||(m[21]=()=>w(E.value.phone))})]),_:1},8,["modelValue"])]),g("div",Zo,[o(S,{modelValue:E.value.lineId,"onUpdate:modelValue":m[24]||(m[24]=P=>E.value.lineId=P),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[E.value.lineId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:m[23]||(m[23]=()=>w(E.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(S,{modelValue:E.value.wechatId,"onUpdate:modelValue":m[26]||(m[26]=P=>E.value.wechatId=P),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[E.value.wechatId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:m[25]||(m[25]=()=>w(E.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",qo,[o(S,{modelValue:E.value.telegramId,"onUpdate:modelValue":m[28]||(m[28]=P=>E.value.telegramId=P),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[E.value.telegramId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:m[27]||(m[27]=()=>w(E.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(S,{modelValue:E.value.zaloId,"onUpdate:modelValue":m[30]||(m[30]=P=>E.value.zaloId=P),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[E.value.zaloId?{name:"appendInner",fn:x(()=>[o(U,{name:"content_copy",color:"secondary",onClick:m[29]||(m[29]=()=>w(E.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(A,{class:"w-full",orientation:"left"},{default:x(()=>[Bo]),_:1}),g("div",Go,[o(re,{preset:"secondary",color:"secondary",onClick:m[31]||(m[31]=P=>$.$emit("close"))},{default:x(()=>[ye("取消")]),_:1}),o(re,{disabled:!Fs,onClick:D},{default:x(()=>[ye(te(a.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),{formatDate:jo}=ve(),Jo=()=>B({page:1,perPage:10,total:0}),Qo=()=>B({sortBy:"createdAt",sortingOrder:null}),Xo=()=>B({isActive:!0,search:""}),Ko=a=>{const e=B(!1),t=B([]),{filters:s=Xo(),sorting:n=Qo(),pagination:l=Jo()}=a||{},r=async()=>{e.value=!0;const d={...G(s),sortBy:n.value.sortBy,sortOrder:n.value.sortingOrder,offset:(l.value.page-1)*l.value.perPage,limit:l.value.perPage,...s.value.isActive&&{excludeStatus:"initial"},...!s.value.isActive&&{status:"initial"}},{data:y}=await ce.getOrders(d);t.value=y.data;const f={page:l.value.page,perPage:10,total:y.total};i(()=>{l.value=f}),e.value=!1},{ignoreUpdates:i}=Bt([l,n],r,{deep:!0});return Gt(s,()=>{l.value.page=1,r()},{deep:!0}),r(),{isLoading:e,filters:s,sorting:n,pagination:l,orders:t,fetch:r,getServiceDate:d=>jo(Number(d.orderPlanTutor.startTime)),getStartTime:d=>M.fromMillis(Number(d.orderPlanTutor.startTime),{zone:"Asia/Ho_Chi_Minh"}).toFormat("HH:mm"),async add(d){console.log("add order",d)},async update(d){console.log("update order",d)},async remove(d){console.log("remove order",d)}}},ei={class:"self-stretch flex-col justify-start items-start gap-4 flex"},ti=g("span",{class:"px-2"},"訂單資訊",-1),ai={class:"flex gap-4 flex-col sm:flex-row w-full"},si={class:"flex gap-4 flex-col sm:flex-row w-full"},ni={class:"flex gap-4 flex-col sm:flex-row w-full"},li={class:"flex gap-4 flex-col sm:flex-row w-full"},ri=g("span",{class:"px-2"},"管理確認區",-1),oi={class:"w-full"},ii=g("span",{class:"px-2"},"訂單狀態",-1),ui=g("span",{class:"px-2"},"聯絡資訊",-1),di={class:"flex gap-4 flex-col sm:flex-row w-full"},ci={class:"flex gap-4 flex-col sm:flex-row w-full"},mi={class:"flex gap-4 flex-col sm:flex-row w-full"},fi={class:"flex gap-4 flex-col sm:flex-row w-full"},pi=g("span",{class:"px-2"},"結帳資訊",-1),hi={class:"flex gap-2 flex-col-reverse items-stretch justify-end w-full sm:flex-row sm:items-center"},yi=Pe({__name:"OrderTutorDetailForm",props:{order:{type:Object,required:!0},saveButtonLabel:{type:String,default:"Save"}},emits:["close","save"],setup(a,{emit:e}){const{notify:t}=Be(),{formatDate:s,formatDateV:n}=ve(),{categorys:l}=Ee(),{getStartTime:r}=Ko(),i=It(),u={1:"越語家教"},h=[{text:"待處理",value:ee.PENDING},{text:"已處理",value:ee.PROCESSED}],d=a,y={id:-1,createdAt:"",category:"",plan:"",serviceDate:"",serviceStartTime:"",note:"",hotelAddress:"",needHotelBooking:"",manualOperationStatus:ee.PENDING,hotelImageUrls:[],confirmedTherapistId:null,selectedTherapists:"",confirmedTime:""},f=K(()=>{if(!d.order)return y;const C=s(Number(d.order.orderPlanTutor.createdAt));return{id:d.order.id,manualOperationStatus:d.order.manualOperationStatus,createdAt:C,category:l[d.order.type],plan:u[d.order.orderPlanTutor.planId],selectedTherapists:c(d.order.orderPlanTutor.teacherIds||[]),serviceDate:n(Number(d.order.orderPlanTutor.startTime)),serviceStartTime:r(d.order),hotelAddress:d.order.orderPlanTutor.address,confirmedTherapistId:d.order.orderPlanTutor.confirmedTeacherId||null}}),c=C=>C.map(p=>{const v=i.therapists.find(F=>F.id===p);return v?`${p}.${v.name}`:`未知老師(${p})`}).join(", "),V=K(()=>{var _,b,I,$,m,A;const C=(_=d.order.userInfo.socialMedia.find(S=>S.type==="line"))==null?void 0:_.accountId,p=(b=d.order.userInfo.socialMedia.find(S=>S.type==="wechat"))==null?void 0:b.accountId,v=(I=d.order.userInfo.socialMedia.find(S=>S.type==="telegram"))==null?void 0:I.accountId,F=($=d.order.userInfo.socialMedia.find(S=>S.type==="zalo"))==null?void 0:$.accountId;return{firstName:d.order.userInfo.firstName,email:d.order.userInfo.email,phone:(m=d.order.userInfo.phone)==null?void 0:m.phoneNumber,phoneCode:(A=d.order.userInfo.phone)==null?void 0:A.code,lineId:C,wechatId:p,telegramId:v,zaloId:F}}),E=e,k=async()=>{d.order.manualOperationStatus!==f.value.manualOperationStatus&&await ce.updateManualOperationStatus({orderId:d.order.id,manualOperationStatus:f.value.manualOperationStatus}),d.order.orderPlanTutor.confirmedTeacherId!==H.value&&await ce.updateOrder({category:d.order.type,orderId:d.order.id,planParams:{confirmedTeacherId:H.value}}),E("save")};St(()=>{H.value=f.value.confirmedTherapistId||null});const D=async C=>{if(C)try{await navigator.clipboard.writeText(C),t({message:`已複製到剪貼簿: ${C}`,duration:3e3})}catch(p){alert(`Failed to copy text: ${p}`)}},w=K(()=>{if(!d.order)return[];const C=[],{formatDateTimeV:p}=ve();return d.order.orderPlanTutor.startTime&&C.push({text:`預約時間: ${p(Number(d.order.orderPlanTutor.startTime))}`,value:d.order.orderPlanTutor.startTime}),C}),T=K(()=>i.therapists.filter(C=>C.isActive).map(C=>({text:`${C.number}.${C.name}`,value:C.id}))),H=B(null),W=B("");return(C,p)=>{const v=L("VaDivider"),F=L("VaInput"),_=L("VaTextarea"),b=L("VaSelect"),I=L("VaIcon"),$=L("VaButton"),m=L("VaForm");return Q(),pe(m,{ref:"add-user-form",class:"flex-col justify-start items-start gap-4 inline-flex w-full"},{default:x(({isValid:A})=>[g("div",ei,[o(v,{class:"w-full",orientation:"left"},{default:x(()=>[ti]),_:1}),g("div",ai,[o(F,{modelValue:f.value.id,"onUpdate:modelValue":p[0]||(p[0]=S=>f.value.id=S),label:"訂單編號",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:f.value.createdAt,"onUpdate:modelValue":p[1]||(p[1]=S=>f.value.createdAt=S),label:"下訂時間",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",si,[o(F,{modelValue:f.value.category,"onUpdate:modelValue":p[2]||(p[2]=S=>f.value.category=S),label:"訂購項目",class:"w-full sm:w-1/2",name:"category",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:f.value.plan,"onUpdate:modelValue":p[3]||(p[3]=S=>f.value.plan=S),label:"訂購方案",class:"w-full sm:w-1/2",name:"plan",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",ni,[o(F,{modelValue:f.value.serviceDate,"onUpdate:modelValue":p[4]||(p[4]=S=>f.value.serviceDate=S),label:"預約日期",class:"w-full sm:w-1/2",name:"fullname",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:f.value.serviceStartTime,"onUpdate:modelValue":p[5]||(p[5]=S=>f.value.serviceStartTime=S),label:"起始時間",class:"w-full sm:w-1/2",name:"serviceStartTime",readonly:"",preset:"solid"},null,8,["modelValue"])]),g("div",li,[o(F,{modelValue:f.value.selectedTherapists,"onUpdate:modelValue":p[6]||(p[6]=S=>f.value.selectedTherapists=S),label:"老師偏好",class:"w-full",name:"guideExpect",readonly:"",preset:"solid"},null,8,["modelValue"])]),o(_,{modelValue:f.value.hotelAddress,"onUpdate:modelValue":p[7]||(p[7]=S=>f.value.hotelAddress=S),label:"上課地址",class:"w-full",name:"customLocation",readonly:"",preset:"solid"},null,8,["modelValue"]),o(v,{class:"w-full",orientation:"left"},{default:x(()=>[ri]),_:1}),g("div",oi,[o(b,{modelValue:H.value,"onUpdate:modelValue":p[8]||(p[8]=S=>H.value=S),label:"家教老師指派",class:"w-full",options:T.value,name:"projects","text-by":"text","track-by":"value","value-by":"value",placeholder:"未指派"},null,8,["modelValue","options"]),o(b,{modelValue:W.value,"onUpdate:modelValue":p[9]||(p[9]=S=>W.value=S),label:"時間確認",class:"w-full mt-4",options:w.value,name:"confirmedTime","text-by":"text","track-by":"value","value-by":"value",placeholder:"請選擇確認時間",clearable:""},null,8,["modelValue","options"])]),o(v,{class:"w-full",orientation:"left"},{default:x(()=>[ii]),_:1}),o(b,{modelValue:f.value.manualOperationStatus,"onUpdate:modelValue":p[10]||(p[10]=S=>f.value.manualOperationStatus=S),label:"操作狀態",class:"w-full",options:h,name:"projects","text-by":"text","track-by":"value","value-by":"value"},null,8,["modelValue"]),o(v,{class:"w-full",orientation:"left"},{default:x(()=>[ui]),_:1}),g("div",di,[o(F,{modelValue:V.value.firstName,"onUpdate:modelValue":p[11]||(p[11]=S=>V.value.firstName=S),label:"訂購人",class:"w-full sm:w-1/2",name:"firstName",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:V.value.email,"onUpdate:modelValue":p[13]||(p[13]=S=>V.value.email=S),label:"連絡信箱",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(I,{name:"content_copy",color:"secondary",onClick:p[12]||(p[12]=()=>D(V.value.email))})]),_:1},8,["modelValue"])]),g("div",ci,[o(F,{modelValue:V.value.phoneCode,"onUpdate:modelValue":p[14]||(p[14]=S=>V.value.phoneCode=S),label:"手機國碼",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},null,8,["modelValue"]),o(F,{modelValue:V.value.phone,"onUpdate:modelValue":p[16]||(p[16]=S=>V.value.phone=S),label:"手機號碼",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},{appendInner:x(()=>[o(I,{name:"content_copy",color:"secondary",onClick:p[15]||(p[15]=()=>D(V.value.phone))})]),_:1},8,["modelValue"])]),g("div",mi,[o(F,{modelValue:V.value.lineId,"onUpdate:modelValue":p[18]||(p[18]=S=>V.value.lineId=S),label:"Line ID",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[V.value.lineId?{name:"appendInner",fn:x(()=>[o(I,{name:"content_copy",color:"secondary",onClick:p[17]||(p[17]=()=>D(V.value.lineId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(F,{modelValue:V.value.wechatId,"onUpdate:modelValue":p[20]||(p[20]=S=>V.value.wechatId=S),label:"WECHAT ID",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[V.value.wechatId?{name:"appendInner",fn:x(()=>[o(I,{name:"content_copy",color:"secondary",onClick:p[19]||(p[19]=()=>D(V.value.wechatId))})]),key:"0"}:void 0]),1032,["modelValue"])]),g("div",fi,[o(F,{modelValue:V.value.telegramId,"onUpdate:modelValue":p[22]||(p[22]=S=>V.value.telegramId=S),label:"TELEGRAM",class:"w-full sm:w-1/2",name:"id",readonly:"",preset:"solid"},X({_:2},[V.value.telegramId?{name:"appendInner",fn:x(()=>[o(I,{name:"content_copy",color:"secondary",onClick:p[21]||(p[21]=()=>D(V.value.telegramId))})]),key:"0"}:void 0]),1032,["modelValue"]),o(F,{modelValue:V.value.zaloId,"onUpdate:modelValue":p[24]||(p[24]=S=>V.value.zaloId=S),label:"ZALO",class:"w-full sm:w-1/2",name:"createdAt",readonly:"",preset:"solid"},X({_:2},[V.value.zaloId?{name:"appendInner",fn:x(()=>[o(I,{name:"content_copy",color:"secondary",onClick:p[23]||(p[23]=()=>D(V.value.zaloId))})]),key:"0"}:void 0]),1032,["modelValue"])]),o(v,{class:"w-full",orientation:"left"},{default:x(()=>[pi]),_:1}),g("div",hi,[o($,{preset:"secondary",color:"secondary",onClick:p[25]||(p[25]=S=>C.$emit("close"))},{default:x(()=>[ye("取消")]),_:1}),o($,{disabled:!A,onClick:k},{default:x(()=>[ye(te(a.saveButtonLabel),1)]),_:2},1032,["disabled"])])])]),_:1},512)}}}),gi=g("h1",{class:"page-title"},"訂單管理",-1),vi={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between"},wi={class:"flex flex-col md:flex-row gap-2 justify-start"},Vi={class:"va-h5"},Oi=Pe({__name:"OrdersPage",setup(a){const e=B(!1),{orders:t,isLoading:s,filters:n,sorting:l,pagination:r,...i}=Ee(),u=B(null),h=E=>{u.value=E,e.value=!0},{init:d}=Be(),y=async()=>{i.fetch()},f=async E=>{await i.remove(E),d({message:`${E.id} has been deleted`,color:"success"})},c=B(),V=async E=>{E()};return(E,k)=>{const D=L("VaButtonToggle"),w=L("VaIcon"),T=L("VaInput"),H=L("VaCardContent"),W=L("VaCard"),C=L("VaModal");return Q(),Ie(gt,null,[gi,o(W,null,{default:x(()=>[o(H,null,{default:x(()=>[g("div",vi,[g("div",wi,[o(D,{modelValue:G(n).isActive,"onUpdate:modelValue":k[0]||(k[0]=p=>G(n).isActive=p),color:"background-element","border-color":"background-element",options:[{label:"訂單",value:!0},{label:"草稿",value:!1}]},null,8,["modelValue"]),o(T,{modelValue:G(n).search,"onUpdate:modelValue":k[1]||(k[1]=p=>G(n).search=p),placeholder:"Search"},{prependInner:x(()=>[o(w,{name:"search",color:"secondary",size:"small"})]),_:1},8,["modelValue"])])]),o(hr,{"sort-by":G(l).sortBy,"onUpdate:sortBy":k[2]||(k[2]=p=>G(l).sortBy=p),"sorting-order":G(l).sortingOrder,"onUpdate:sortingOrder":k[3]||(k[3]=p=>G(l).sortingOrder=p),orders:G(t),loading:G(s),pagination:G(r),onEditOrder:h,onDeleteUser:f},null,8,["sort-by","sorting-order","orders","loading","pagination"])]),_:1})]),_:1}),o(C,{modelValue:e.value,"onUpdate:modelValue":k[4]||(k[4]=p=>e.value=p),size:"small","mobile-fullscreen":"","close-button":"","hide-default-actions":"","before-cancel":V},{default:x(({cancel:p,ok:v})=>[g("h1",Vi,"訂單編號 "+te(u.value.id),1),u.value.type===G(ne).ESCORT?(Q(),pe(Cr,{key:0,ref_key:"editFormRef",ref:c,order:u.value,"save-button-label":"儲存",onClose:p,onSave:()=>{y(),v()}},null,8,["order","onClose","onSave"])):Ze("",!0),u.value.type===G(ne).MASSAGE?(Q(),pe(Yo,{key:1,ref_key:"editFormRef",ref:c,order:u.value,"save-button-label":"儲存",onClose:p,onSave:()=>{y(),v()}},null,8,["order","onClose","onSave"])):u.value.type===G(ne).SHUTTLE?(Q(),pe(Xr,{key:2,ref_key:"editFormRef",ref:c,order:u.value,"save-button-label":"儲存",onClose:p,onSave:()=>{y(),v()}},null,8,["order","onClose","onSave"])):u.value.type===G(ne).CHARTER?(Q(),pe(yo,{key:3,ref_key:"editFormRef",ref:c,order:u.value,"save-button-label":"儲存",onClose:p,onSave:()=>{y(),v()}},null,8,["order","onClose","onSave"])):u.value.type===G(ne).TUTOR?(Q(),pe(yi,{key:4,ref_key:"editFormRef",ref:c,order:u.value,"save-button-label":"儲存",onClose:p,onSave:()=>{y(),v()}},null,8,["order","onClose","onSave"])):Ze("",!0)]),_:1},8,["modelValue"])],64)}}});export{Oi as default};
//# sourceMappingURL=OrdersPage-896d6271.js.map
