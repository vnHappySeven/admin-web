{"version":3,"file":"Login-c7af398f.js","sources":["../../src/pages/auth/Login.vue"],"sourcesContent":["<template>\n    <VaForm ref=\"form\" @submit.prevent=\"submit\">\n        <h1 class=\"font-semibold text-4xl mb-4\">Log in</h1>\n        <p class=\"text-base mb-4 leading-5\">\n            New to Vuestic?\n            <RouterLink :to=\"{ name: 'signup' }\" class=\"font-semibold text-primary\">Sign up</RouterLink>\n        </p>\n        <VaInput\n            v-model=\"formData.email\"\n            :rules=\"[validators.required, validators.email]\"\n            class=\"mb-4\"\n            label=\"Email\"\n            type=\"email\"\n        />\n        <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n            <VaInput\n                v-model=\"formData.password\"\n                :rules=\"[validators.required]\"\n                :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n                class=\"mb-4\"\n                label=\"Password\"\n                @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n            >\n                <template #appendInner>\n                    <VaIcon\n                        :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n                        class=\"cursor-pointer\"\n                        color=\"secondary\"\n                    />\n                </template>\n            </VaInput>\n        </VaValue>\n\n        <div class=\"auth-layout__options flex flex-col sm:flex-row items-start sm:items-center justify-between\">\n            <VaCheckbox v-model=\"formData.keepLoggedIn\" class=\"mb-2 sm:mb-0\" label=\"Keep me signed in on this device\" />\n            <RouterLink :to=\"{ name: 'recover-password' }\" class=\"mt-2 sm:mt-0 sm:ml-1 font-semibold text-primary\">\n                Forgot password?\n            </RouterLink>\n        </div>\n\n        <div class=\"flex justify-center mt-4\">\n            <VaButton class=\"w-full\" @click=\"submit\"> Login</VaButton>\n        </div>\n    </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useForm, useToast } from 'vuestic-ui'\nimport { validators } from '../../services/utils'\nimport useFirebase from '../../composables/useFirebase'\nimport api from '../../services/api'\nimport { usePublicStore } from '../../stores/public-store'\nconst { firebaseLogin } = useFirebase()\nconst { validate } = useForm('form')\nconst { push } = useRouter()\nconst { init } = useToast()\nconst publicStore = usePublicStore()\nconst formData = reactive({\n    email: '',\n    password: '',\n    keepLoggedIn: false,\n})\n\nconst submit = async () => {\n    if (validate()) {\n        const { accessToken } = await firebaseLogin(formData.email, formData.password)\n        api.setAuthToken(accessToken)\n        try {\n            await api.login()\n            await publicStore.doAfterLogin()\n        } catch (error) {\n            console.error('Login failed:', error)\n            init({ message: 'Login failed. Please try again.', color: 'danger' })\n            return\n        }\n        init({ message: \"You've successfully logged in\", color: 'success' })\n        push({ name: 'dashboard' })\n    }\n}\n</script>\n"],"names":["firebaseLogin","useFirebase","validate","useForm","push","useRouter","init","useToast","publicStore","usePublicStore","formData","reactive","submit","accessToken","api","error"],"mappings":"0hBAsDM,KAAA,CAAE,cAAAA,GAAkBC,IACpB,CAAE,SAAAC,CAAA,EAAaC,EAAQ,MAAM,EAC7B,CAAE,KAAAC,GAASC,IACX,CAAE,KAAAC,GAASC,IACXC,EAAcC,IACdC,EAAWC,EAAS,CACtB,MAAO,GACP,SAAU,GACV,aAAc,EAAA,CACjB,EAEKC,EAAS,SAAY,CACvB,GAAIV,IAAY,CACN,KAAA,CAAE,YAAAW,CAAgB,EAAA,MAAMb,EAAcU,EAAS,MAAOA,EAAS,QAAQ,EAC7EI,EAAI,aAAaD,CAAW,EACxB,GAAA,CACA,MAAMC,EAAI,QACV,MAAMN,EAAY,qBACbO,EAAO,CACJ,QAAA,MAAM,gBAAiBA,CAAK,EACpCT,EAAK,CAAE,QAAS,kCAAmC,MAAO,QAAU,CAAA,EACpE,MACJ,CACAA,EAAK,CAAE,QAAS,gCAAiC,MAAO,SAAW,CAAA,EAC9DF,EAAA,CAAE,KAAM,WAAA,CAAa,CAC9B,CAAA"}